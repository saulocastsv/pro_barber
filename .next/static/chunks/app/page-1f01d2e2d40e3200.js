(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{693:(e,t,s)=>{Promise.resolve().then(s.bind(s,87299))},87299:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>sc});var a=s(95155),l=s(12115),r=s(15239),i=function(e){return e.OWNER="OWNER",e.BARBER="BARBER",e.CUSTOMER="CUSTOMER",e}({}),n=s(20508);let d=e=>{let{url:t,name:s="Usuario",size:l="md",className:r=""}=e,i={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return t?(0,a.jsx)("div",{className:"".concat(i[l]," rounded-lg overflow-hidden bg-brand-light flex items-center justify-center ").concat(r),children:(0,a.jsx)("img",{src:t,alt:s,className:"w-full h-full object-cover"})}):(0,a.jsx)("div",{className:"".concat(i[l]," rounded-lg bg-gradient-to-br from-brand-accent to-blue-600 flex items-center justify-center shadow-md ").concat(r),children:(0,a.jsx)(n.A,{size:{sm:16,md:24,lg:32}[l],className:"text-white"})})};var o=s(59384),c=s(16485),x=s(26983),m=s(67030),u=s(1524),b=s(33),p=s(42024),h=s(80003),g=s(55136),f=s(26617),j=s(11716),v=s(91761),N=s(91169),w=s(60952),y=s(87066),k=s(403),A=s(15870),C=s(65229),S=s(84926),I=s(9540),E=s(1226),R=s(26550),z=s(85998),D=s(93165);let P=e=>{var t;let{children:s,currentUser:n,onNavigate:P,currentView:M,onLogout:T,notifications:B,onMarkAllRead:L}=e,[O,_]=(0,l.useState)(!1),[q,F]=(0,l.useState)(!1),[U,V]=(0,l.useState)(!1),W=(0,l.useRef)(null),$=B.filter(e=>!e.read).length;(0,l.useEffect)(()=>{_(!1),V(!1)},[M]),(0,l.useEffect)(()=>{let e=e=>{W.current&&!W.current.contains(e.target)&&V(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let G=[{id:"dashboard",label:"In\xedcio",icon:o.A,roles:[i.OWNER,i.BARBER,i.CUSTOMER]},{id:"calendar",label:"Agenda",icon:c.A,roles:[i.OWNER]},{id:"queue",label:"Fila",icon:x.A,roles:[i.OWNER,i.BARBER]},{id:"services",label:"Servi\xe7os",icon:m.A,roles:[i.OWNER]},{id:"strategic",label:"Assinaturas",icon:u.A,roles:[i.OWNER]},{id:"investor",label:"Vis\xe3o Investidor",icon:b.A,roles:[i.OWNER]},{id:"booking",label:"Reservar",icon:p.A,roles:[i.CUSTOMER]},{id:"appointments",label:"Cortes",icon:h.A,roles:[i.CUSTOMER]},{id:"shop",label:"Loja",icon:g.A,roles:[i.CUSTOMER]},{id:"orders",label:"Pedidos",icon:f.A,roles:[i.CUSTOMER]},{id:"order_management",label:"Pedidos Loja",icon:j.A,roles:[i.OWNER]},{id:"financials",label:"Financeiro",icon:v.A,roles:[i.OWNER]},{id:"team",label:"Equipe",icon:N.A,roles:[i.OWNER]},{id:"inventory",label:"Estoque",icon:w.A,roles:[i.OWNER]},{id:"crm",label:"Clientes",icon:y.A,roles:[i.OWNER,i.BARBER]},{id:"marketing",label:"Marketing",icon:k.A,roles:[i.OWNER]},{id:"settings",label:"Ajustes",icon:A.A,roles:[i.OWNER,i.BARBER,i.CUSTOMER]}],H=(null==n?void 0:n.role)||i.CUSTOMER,X=n?G.filter(e=>e.roles.includes(H)):[{id:"booking",label:"Reservar",icon:p.A,roles:[i.CUSTOMER]}],Y=H===i.OWNER?X.filter(e=>["dashboard","calendar","order_management"].includes(e.id)):H===i.BARBER?X.filter(e=>["dashboard","queue","crm"].includes(e.id)):X.filter(e=>["dashboard","booking","orders"].includes(e.id));return(0,a.jsxs)("div",{className:"flex h-screen bg-brand-gray font-sans overflow-hidden select-none",children:[(0,a.jsxs)("aside",{className:"\n        fixed inset-y-0 left-0 z-[60] glass-sidebar text-white transition-all duration-300 ease-in-out flex flex-col\n        ".concat(O?"translate-x-0 w-64":"-translate-x-full w-64"," \n        md:translate-x-0 ").concat(q?"md:w-20":"md:w-64","\n      "),children:[(0,a.jsxs)("div",{className:"h-16 flex items-center ".concat(q?"justify-center":"px-6"," border-b border-white/5"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>P("dashboard"),children:[(0,a.jsx)(r.default,{src:"/logo-branco.png",alt:"Barvo",width:32,height:32,className:"object-contain"}),!q&&(0,a.jsx)("span",{className:"text-lg font-extrabold tracking-tighter italic text-white",children:"BARVO"})]}),O&&(0,a.jsx)("button",{onClick:()=>_(!1),className:"ml-auto p-1.5 md:hidden text-white/50",children:(0,a.jsx)(C.A,{size:20})})]}),(0,a.jsx)("nav",{className:"flex-1 p-3 space-y-0.5 overflow-y-auto custom-scrollbar",children:X.map(e=>{let t=M===e.id;return(0,a.jsxs)("button",{onClick:()=>P(e.id),className:"\n                  w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 group relative\n                  ".concat(t?"bg-white/10 text-white font-semibold":"text-slate-400 hover:text-white hover:bg-white/5","\n                  ").concat(q?"justify-center":"","\n                "),children:[(0,a.jsx)(e.icon,{size:18,className:t?"text-brand-light":"text-slate-500 group-hover:text-white"}),!q&&(0,a.jsx)("span",{className:"text-xs tracking-wide",children:e.label}),t&&!q&&(0,a.jsx)("div",{className:"ml-auto w-1 h-1 bg-brand-light rounded-full"})]},e.id)})}),(0,a.jsx)("div",{className:"p-3 border-t border-white/5",children:(0,a.jsxs)("button",{onClick:T,className:"w-full flex items-center gap-3 p-3 text-slate-500 hover:text-red-400 hover:bg-red-400/5 rounded-xl transition-all ".concat(q?"justify-center":""),children:[(0,a.jsx)(S.A,{size:18})," ",!q&&(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Sair"})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 transition-all duration-300 ".concat(q?"md:ml-20":"md:ml-64"," pb-16 md:pb-0"),children:[(0,a.jsxs)("header",{className:"h-14 bg-white/70 backdrop-blur-md border-b border-slate-200/50 flex items-center justify-between px-4 md:px-8 sticky top-0 z-40",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>_(!0),className:"md:hidden p-1.5 text-brand-dark bg-slate-100 rounded-lg",children:(0,a.jsx)(I.A,{size:18})}),(0,a.jsx)("button",{onClick:()=>F(!q),className:"hidden md:flex p-2 text-slate-400 hover:text-brand-dark hover:bg-white rounded-lg transition-all border border-slate-100",children:q?(0,a.jsx)(E.A,{size:16}):(0,a.jsx)(R.A,{size:16})}),(0,a.jsx)("h1",{className:"text-base md:text-lg font-bold text-brand-black tracking-tight",children:(null==(t=G.find(e=>e.id===M))?void 0:t.label)||"Barvo"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 relative",ref:W,children:[(0,a.jsxs)("div",{onClick:()=>V(!U),className:"bg-white p-2 rounded-lg border border-slate-100 cursor-pointer relative transition-all active:scale-95 ".concat(U?"text-brand-dark border-brand-light":"text-slate-400 hover:text-brand-dark"),children:[(0,a.jsx)(z.A,{size:16}),$>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-black rounded-full border-2 border-white flex items-center justify-center",children:$})]}),U&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-72 md:w-80 bg-white rounded-2xl shadow-2xl border border-slate-100 z-50 overflow-hidden animate-fade-in origin-top-right",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[(0,a.jsx)("span",{className:"text-xs font-black text-brand-dark uppercase tracking-widest",children:"Notifica\xe7\xf5es"}),(0,a.jsx)("button",{onClick:L,className:"text-[10px] font-bold text-blue-600 hover:underline",children:"Marcar todas como lidas"})]}),(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:B.length>0?B.map(e=>(0,a.jsxs)("div",{className:"p-4 border-b border-slate-50 flex gap-3 hover:bg-slate-50 transition-colors ".concat(e.read?"":"bg-blue-50/30"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ".concat(e.read?"bg-slate-200":"bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold ".concat(e.read?"text-slate-600":"text-slate-900"),children:e.title}),(0,a.jsx)("p",{className:"text-[11px] text-slate-500 mt-0.5 leading-relaxed",children:e.message}),(0,a.jsx)("p",{className:"text-[9px] text-slate-400 mt-2 font-medium uppercase",children:e.time})]})]},e.id)):(0,a.jsxs)("div",{className:"p-10 text-center text-slate-400",children:[(0,a.jsx)(z.A,{size:24,className:"mx-auto mb-2 opacity-20"}),(0,a.jsx)("p",{className:"text-xs font-medium",children:"Nenhuma notifica\xe7\xe3o por enquanto."})]})}),(0,a.jsx)("div",{className:"p-3 text-center bg-slate-50 border-t border-slate-100",children:(0,a.jsx)("button",{onClick:()=>V(!1),className:"text-[10px] font-black text-slate-500 uppercase tracking-widest hover:text-brand-dark",children:"Fechar Painel"})})]}),n&&(0,a.jsx)("button",{onClick:()=>P("settings"),className:"hover:opacity-80 transition-all",children:(0,a.jsx)(d,{url:n.avatar,name:n.name,size:"sm",className:"cursor-pointer"})})]})]}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 bg-brand-gray/30 custom-scrollbar",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsx)("div",{className:"animate-fade-in",children:s})})}),(0,a.jsxs)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-14 bg-white/90 backdrop-blur-md border-t border-slate-200 flex items-center justify-around px-2 z-50",children:[Y.map(e=>{let t=M===e.id;return(0,a.jsxs)("button",{onClick:()=>P(e.id),className:"flex flex-col items-center justify-center gap-0.5 flex-1 transition-all ".concat(t?"text-brand-dark":"text-slate-400"),children:[(0,a.jsx)(e.icon,{size:18,className:t?"text-brand-dark":""}),(0,a.jsx)("span",{className:"text-[9px] font-bold uppercase tracking-tighter ".concat(t?"opacity-100":"opacity-60"),children:e.label})]},e.id)}),(0,a.jsxs)("button",{onClick:()=>_(!0),className:"flex flex-col items-center justify-center gap-0.5 flex-1 text-slate-400",children:[(0,a.jsx)(D.A,{size:18}),(0,a.jsx)("span",{className:"text-[9px] font-bold uppercase tracking-tighter opacity-60",children:"Mais"})]})]})]})]})};var M=s(26991),T=s(98128),B=s(68425),L=s(47734),O=s(73697),_=s(23508),q=s(16533),F=s(69386),U=s(52987),V=s(6613),W=s(23327),$=s(91078);let G=e=>{let{level:t,children:s,subtitle:l,className:r=""}=e;return(0,a.jsxs)("div",{className:r,children:[(0,a.jsx)("h".concat(t),{className:"".concat({1:"text-3xl md:text-4xl",2:"text-2xl md:text-3xl",3:"text-xl md:text-2xl",4:"text-lg md:text-xl"}[t]," font-black text-brand-dark tracking-tight"),children:s}),l&&(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-1 font-medium",children:l})]})},H=e=>{let{label:t,value:s,unit:l,trend:r,icon:i,onClick:n}=e;return(0,a.jsx)("div",{onClick:n,className:"p-6 bg-white rounded-2xl border border-slate-100 shadow-sm transition-all ".concat(n?"cursor-pointer hover:shadow-md hover:-translate-y-1":""),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:t}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"text-3xl font-black text-brand-dark",children:s}),l&&(0,a.jsx)("span",{className:"text-sm text-slate-400 font-medium",children:l})]}),r&&(0,a.jsxs)("p",{className:"text-xs font-bold text-emerald-600 mt-2",children:["↑ ",r]})]}),i&&(0,a.jsx)("div",{className:"text-slate-400",children:i})]})})},X=e=>{let{title:t,subtitle:s,action:l,children:r}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)(G,{level:2,subtitle:s,children:t}),l&&(0,a.jsx)("div",{children:l})]}),r]})},Y=e=>{let{stats:t,onNavigate:s}=e,l=[{name:"Seg",revenue:400},{name:"Ter",revenue:300},{name:"Qua",revenue:550},{name:"Qui",revenue:450},{name:"Sex",revenue:900},{name:"Sab",revenue:1200},{name:"Dom",revenue:100}];return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(X,{title:"Painel Executivo",subtitle:"An\xe1lise de performance em tempo real",action:(0,a.jsxs)("button",{onClick:()=>s("financials"),className:"text-xs font-bold text-blue-600 flex items-center gap-1 hover:text-blue-700 transition-colors",children:["Relat\xf3rios ",(0,a.jsx)(U.A,{size:14})]}),children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(H,{label:"Receita Mensal",value:"R$ ".concat((t.monthlyRevenue||0).toLocaleString("pt-BR")),trend:"+12%",icon:(0,a.jsx)(v.A,{size:20,className:"text-blue-600"}),onClick:()=>s("financials")}),(0,a.jsx)(H,{label:"Atendimentos",value:t.totalAppointments||0,trend:"+4%",icon:(0,a.jsx)(c.A,{size:20,className:"text-emerald-600"}),onClick:()=>s("calendar")}),(0,a.jsx)(H,{label:"Novos Clientes",value:"+".concat(t.newCustomers||0),icon:(0,a.jsx)(N.A,{size:20,className:"text-amber-600"}),onClick:()=>s("crm")}),(0,a.jsx)(H,{label:"Ticket M\xe9dio",value:"R$ ".concat(t.avgTicket||0),icon:(0,a.jsx)(u.A,{size:20,className:"text-purple-600"})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-brand-dark",children:"Faturamento (7 Dias)"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-50 px-3 py-1 rounded-lg",children:"Semanal"})]}),(0,a.jsx)("div",{className:"h-[250px]",children:(0,a.jsx)(M.u,{width:"100%",height:"100%",children:(0,a.jsxs)(T.E,{data:l,children:[(0,a.jsx)(B.d,{strokeDasharray:"3 3",vertical:!1,stroke:"#F1F5F9"}),(0,a.jsx)(L.W,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94A3B8",fontSize:11,fontWeight:600},dy:10}),(0,a.jsx)(O.h,{hide:!0}),(0,a.jsx)(_.m,{cursor:{fill:"#F8FAFC"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)",fontSize:"12px",fontWeight:"bold"}}),(0,a.jsx)(q.y,{dataKey:"revenue",radius:[8,8,0,0],barSize:32,children:l.map((e,t)=>(0,a.jsx)(F.f,{fill:5===t?"#081E26":"#B8D0D9",className:"hover:opacity-80 transition-opacity"},"cell-".concat(t)))})]})})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-brand-dark mb-6 flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"text-amber-500",size:18})," Top Profissionais"]}),(0,a.jsx)("div",{className:"space-y-4 flex-1",children:[{name:"Marcos",val:7850,color:"bg-brand-dark"},{name:"Jo\xe3o",val:5400,color:"bg-brand-light"},{name:"Felipe",val:4200,color:"bg-slate-300"}].map((e,t)=>(0,a.jsxs)("div",{className:"space-y-2 group cursor-pointer",onClick:()=>s("team"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"font-bold text-slate-900 text-sm group-hover:text-blue-600 transition-colors",children:[t+1,"\xb0 ",e.name]}),(0,a.jsxs)("span",{className:"font-bold text-slate-600 text-xs",children:["R$ ",(e.val/100).toLocaleString("pt-BR")]})]}),(0,a.jsx)("div",{className:"h-2.5 w-full bg-slate-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full ".concat(e.color," rounded-full transition-all"),style:{width:"".concat(e.val/7850*100,"%")}})})]},t))}),(0,a.jsx)("button",{onClick:()=>s("team"),className:"mt-6 w-full py-3 bg-slate-50 hover:bg-slate-100 text-slate-600 font-bold rounded-xl text-xs uppercase tracking-widest transition-all",children:"Ver Equipe Completa"})]})]})]})};var K=s(6191),J=s(90368),Q=s(27937),Z=s(10383);let ee=e=>{let{appointments:t,barbers:s,services:r,onAddAppointment:i}=e,[o,c]=(0,l.useState)(!1),[x,m]=(0,l.useState)({time:"",barberId:"",customerName:"",serviceId:""}),[u,b]=(0,l.useState)(null),[h,g]=(0,l.useState)(new Date),f=[];for(let e=9;e<=19;e++)f.push("".concat(e.toString().padStart(2,"0"),":00")),f.push("".concat(e.toString().padStart(2,"0"),":30"));let j=(e,t)=>{var a,l;m({time:e||"09:00",barberId:t||(null==(a=s[0])?void 0:a.id)||"",customerName:"",serviceId:(null==(l=r[0])?void 0:l.id)||""}),c(!0)},v=e=>{let t=new Date(h);t.setDate(t.getDate()+e),g(t)};return(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-sm border border-slate-100 overflow-hidden flex flex-col h-[calc(100vh-160px)] animate-fade-in relative",children:[u&&(0,a.jsxs)("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 bg-brand-dark text-white px-6 py-3 rounded-2xl shadow-2xl z-50 flex items-center gap-3 animate-fade-in border border-white/10",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-emerald-500 rounded-full flex items-center justify-center text-white",children:(0,a.jsx)(K.A,{size:14,strokeWidth:4})}),(0,a.jsx)("span",{className:"text-xs font-black uppercase tracking-widest",children:u})]}),(0,a.jsxs)("div",{className:"px-6 py-5 border-b border-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 bg-white sticky top-0 z-20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-slate-50 p-1 rounded-xl border border-slate-100",children:[(0,a.jsx)("button",{onClick:()=>v(-1),className:"p-2 hover:bg-white hover:shadow-sm rounded-lg transition-all text-slate-400 hover:text-brand-dark",children:(0,a.jsx)(J.A,{size:18})}),(0,a.jsxs)("div",{className:"px-4 flex flex-col items-center min-w-[140px]",children:[(0,a.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] leading-none mb-1",children:h.toLocaleDateString("pt-BR",{weekday:"short"})}),(0,a.jsx)("span",{className:"text-sm font-black text-brand-dark",children:h.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})})]}),(0,a.jsx)("button",{onClick:()=>v(1),className:"p-2 hover:bg-white hover:shadow-sm rounded-lg transition-all text-slate-400 hover:text-brand-dark",children:(0,a.jsx)(Q.A,{size:18})})]}),(0,a.jsx)("button",{onClick:()=>g(new Date),className:"text-[10px] font-black text-slate-400 hover:text-brand-dark uppercase tracking-widest px-3 py-2 bg-slate-50 rounded-lg border border-slate-100 transition-all active:scale-95",children:"Hoje"})]}),(0,a.jsxs)("button",{onClick:()=>j(),className:"w-full md:w-auto bg-brand-dark text-white px-6 py-3.5 rounded-2xl text-xs font-black uppercase tracking-[0.15em] hover:bg-black transition-all shadow-xl shadow-brand-dark/10 flex items-center justify-center gap-3 active:scale-95 group",children:[(0,a.jsx)("div",{className:"bg-white/10 p-1 rounded-lg group-hover:scale-110 transition-transform",children:(0,a.jsx)(K.A,{size:16,strokeWidth:3})}),"Novo Agendamento"]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto bg-slate-50/30 relative custom-scrollbar",children:(0,a.jsxs)("div",{className:"min-w-[800px]",children:[(0,a.jsxs)("div",{className:"flex border-b border-slate-100 sticky top-0 bg-white/90 backdrop-blur-md z-10 shadow-sm",children:[(0,a.jsx)("div",{className:"w-24 p-4 border-r border-slate-50 font-black text-slate-300 text-[10px] uppercase tracking-widest text-center flex items-center justify-center",children:"Hor\xe1rio"}),s.map(e=>(0,a.jsxs)("div",{className:"flex-1 p-4 border-r border-slate-50 flex items-center justify-center gap-4 min-w-[200px]",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d,{url:e.avatar,name:e.name,size:"sm",className:"w-10 h-10 border-2 border-white shadow-md"}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-emerald-500 border-2 border-white rounded-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block font-black text-brand-dark text-sm tracking-tight",children:e.name.split(" ")[0]}),(0,a.jsx)("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Dispon\xedvel"})]})]},e.id))]}),(0,a.jsx)("div",{className:"divide-y divide-slate-50 bg-white",children:f.map(e=>(0,a.jsxs)("div",{className:"flex h-32 group/row",children:[(0,a.jsx)("div",{className:"w-24 border-r border-slate-50 flex items-start justify-center pt-4 text-[11px] font-black text-slate-400 bg-slate-50/20 group-hover/row:bg-slate-50 transition-colors",children:e}),s.map(s=>{var l;let i,n=(i=s.id,t.find(t=>{let s=new Date(t.startTime),a="".concat(s.getHours().toString().padStart(2,"0"),":").concat(s.getMinutes().toString().padStart(2,"0")),l=s.toDateString()===h.toDateString();return t.barberId===i&&a===e&&"CANCELLED"!==t.status&&l}));return(0,a.jsx)("div",{className:"flex-1 border-r border-slate-50 p-2 relative min-w-[200px] group/slot transition-colors hover:bg-slate-50/30",children:n?(0,a.jsxs)("div",{className:"\n                          w-full h-full rounded-[1.5rem] p-4 border-l-[6px] shadow-sm flex flex-col justify-center cursor-pointer \n                          transition-all duration-300 hover:shadow-xl hover:scale-[1.02] hover:z-10 relative group/card\n                          ".concat("COMPLETED"===n.status?"bg-slate-50 border-slate-400 text-slate-500 opacity-60":"bg-white border-brand-dark text-brand-dark ring-1 ring-slate-100","\n                        "),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,a.jsx)("p",{className:"font-black text-sm tracking-tight truncate leading-tight pr-4",children:n.customerName}),"COMPLETED"!==n.status&&(0,a.jsx)(Z.A,{size:12,className:"text-brand-dark/20"})]}),(0,a.jsx)("p",{className:"text-[9px] font-black uppercase tracking-widest opacity-60 mb-2 truncate",children:(null==(l=r.find(e=>e.id===n.serviceId))?void 0:l.name)||"Servi\xe7o"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-current animate-pulse"}),(0,a.jsx)("span",{className:"text-[8px] font-bold uppercase tracking-widest",children:"COMPLETED"===n.status?"Finalizado":"Confirmado"})]})]}):(0,a.jsx)("button",{onClick:()=>j(e,s.id),className:"w-full h-full rounded-[1.5rem] border-2 border-dashed border-transparent hover:border-slate-200 hover:bg-slate-50 flex items-center justify-center cursor-pointer transition-all duration-300 group/btn",children:(0,a.jsx)("div",{className:"bg-slate-100 text-slate-300 p-2 rounded-xl group-hover/btn:bg-brand-dark group-hover/btn:text-white transition-all opacity-0 group-hover/slot:opacity-100 scale-75 group-hover/btn:scale-100",children:(0,a.jsx)(K.A,{size:20,strokeWidth:3})})})},"".concat(s.id,"-").concat(e))})]},e))})]})}),o&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-brand-dark/60 backdrop-blur-md p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-md overflow-hidden animate-slide-in",children:[(0,a.jsxs)("div",{className:"bg-slate-50 px-8 py-6 border-b border-slate-100 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-black text-brand-dark tracking-tighter uppercase italic leading-none",children:"Agendar Manual"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Cria\xe7\xe3o r\xe1pida de reserva"})]}),(0,a.jsx)("button",{onClick:()=>c(!1),className:"p-2.5 bg-white hover:bg-slate-100 rounded-full text-slate-400 transition-all active:scale-90 shadow-sm border border-slate-100",children:(0,a.jsx)(C.A,{size:18})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let[t,s]=x.time.split(":").map(Number),a=new Date(h);a.setHours(t,s,0,0),i({barberId:x.barberId,customerName:x.customerName,serviceId:x.serviceId,startTime:a}),c(!1),b("Agendamento manual criado!"),setTimeout(()=>b(null),3e3)},className:"p-8 space-y-5 bg-white",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Nome do Cliente"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:18}),(0,a.jsx)("input",{required:!0,type:"text",className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-brand-light font-bold text-sm",placeholder:"Ex: Lucas Moura",value:x.customerName,onChange:e=>m({...x,customerName:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Barbeiro"}),(0,a.jsx)("select",{className:"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold text-sm appearance-none cursor-pointer",value:x.barberId,onChange:e=>m({...x,barberId:e.target.value}),children:s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name.split(" ")[0]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Hor\xe1rio"}),(0,a.jsx)("select",{className:"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold text-sm appearance-none cursor-pointer",value:x.time,onChange:e=>m({...x,time:e.target.value}),children:f.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Servi\xe7o Principal"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:18}),(0,a.jsx)("select",{className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold text-sm appearance-none cursor-pointer",value:x.serviceId,onChange:e=>m({...x,serviceId:e.target.value}),children:r.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - R$",e.price]},e.id))})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-5 bg-brand-dark text-white font-black rounded-2xl shadow-xl shadow-brand-dark/20 hover:bg-black transition-all mt-4 uppercase text-xs tracking-widest active:scale-95",children:"Confirmar Reserva"})]})]})})]})};var et=s(52508),es=s(85921),ea=s(27816);let el=e=>{let{initialQueue:t,services:s}=e,[r,i]=(0,l.useState)(t),[n,d]=(0,l.useState)(""),[o,c]=(0,l.useState)(s[0].id);return(0,a.jsxs)("div",{className:"flex flex-col gap-6 animate-fade-in pb-12",children:[(0,a.jsxs)("div",{className:"md:hidden bg-brand-dark text-white p-5 rounded-[1.5rem] shadow-xl flex justify-between items-center relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-2xl -mr-16 -mt-16"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-brand-light/60 mb-1",children:"Pessoas na Fila"}),(0,a.jsxs)("h3",{className:"text-3xl font-black tracking-tighter",children:[r.length," ",(0,a.jsx)("span",{className:"text-sm font-bold opacity-40 ml-1",children:"esperando"})]})]}),(0,a.jsxs)("div",{className:"relative z-10 text-right",children:[(0,a.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-brand-light/60 mb-1",children:"Espera M\xe9dia"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 justify-end",children:[(0,a.jsx)(x.A,{size:14,className:"text-amber-400"}),(0,a.jsxs)("span",{className:"text-xl font-black",children:[20*r.length," min"]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-[2rem] shadow-sm border border-slate-100 h-fit",children:[(0,a.jsxs)("h2",{className:"text-xl font-black text-brand-dark mb-6 flex items-center gap-2 uppercase tracking-tighter",children:[(0,a.jsx)(et.A,{className:"text-brand-dark",size:24})," Novo Walk-in"]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Nome do Cliente"}),(0,a.jsx)("input",{type:"text",className:"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-brand-light focus:bg-white focus:outline-none transition-all font-bold text-slate-800 placeholder:text-slate-300",placeholder:"Ex: Jo\xe3o da Silva",value:n,onChange:e=>d(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Servi\xe7o Desejado"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{className:"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-brand-light focus:bg-white focus:outline-none transition-all font-bold text-slate-800 appearance-none",value:o,onChange:e=>c(e.target.value),children:s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - R$",e.price]},e.id))}),(0,a.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:(0,a.jsx)(p.A,{size:18})})]})]}),(0,a.jsxs)("button",{onClick:()=>{if(!n)return;let e=r.reduce((e,t)=>e+20*("WAITING"===t.status),10);i([...r,{id:Math.random().toString(36).substr(2,9),customerName:n,serviceId:o,joinedAt:new Date,estimatedWaitMinutes:e,status:"WAITING"}]),d("")},disabled:!n,className:"w-full bg-brand-dark text-white font-black py-4 rounded-2xl shadow-xl hover:bg-black transition-all flex items-center justify-center gap-3 uppercase text-xs tracking-widest disabled:opacity-30 active:scale-95",children:[(0,a.jsx)(N.A,{size:18})," Adicionar \xe0 Fila"]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-5 flex gap-4",children:[(0,a.jsx)($.A,{className:"text-blue-500 flex-shrink-0",size:24}),(0,a.jsx)("p",{className:"text-xs text-blue-700 font-medium leading-relaxed",children:"A fila walk-in \xe9 ideal para clientes que chegam sem agendamento. O tempo \xe9 calculado automaticamente com base no servi\xe7o."})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,a.jsxs)("h2",{className:"text-xl font-black text-brand-dark uppercase tracking-tighter flex items-center gap-2",children:[(0,a.jsx)(h.A,{size:22})," Ordem de Chamada"]}),(0,a.jsxs)("span",{className:"hidden md:inline-flex items-center gap-1.5 text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-100 px-3 py-1 rounded-full",children:["Tempo M\xe9dio: ",20*r.length," min"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===r.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-[2rem] border border-dashed border-slate-200",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.A,{size:32,className:"text-slate-200"})}),(0,a.jsx)("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"A fila est\xe1 livre agora"})]}):r.map((e,t)=>{let l=s.find(t=>t.id===e.serviceId),n="WAITING"===e.status,d="IN_CHAIR"===e.status;return(0,a.jsxs)("div",{className:"\n                            flex items-center justify-between p-4 md:p-6 rounded-[2rem] border transition-all active:scale-[0.98]\n                            ".concat(n?"bg-white border-slate-100 shadow-sm":"bg-brand-dark border-brand-dark text-white shadow-xl scale-[1.02]","\n                            animate-fade-in\n                        "),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 md:gap-6",children:[(0,a.jsx)("div",{className:"\n                                    w-10 h-10 md:w-12 md:h-12 rounded-2xl flex items-center justify-center font-black text-base\n                                    ".concat(n?"bg-slate-100 text-slate-400":"bg-brand-light text-brand-dark shadow-inner","\n                                "),children:t+1}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("h3",{className:"font-black text-base md:text-xl tracking-tight truncate ".concat(!n&&"text-white"),children:e.customerName}),d&&(0,a.jsx)("span",{className:"bg-emerald-500 text-white text-[8px] font-black px-1.5 py-0.5 rounded-md uppercase animate-pulse",children:"Na Cadeira"})]}),(0,a.jsx)("p",{className:"text-[10px] md:text-xs font-bold uppercase tracking-widest ".concat(n?"text-slate-400":"text-brand-light opacity-80"),children:null==l?void 0:l.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right hidden sm:block",children:[n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:"Espera"}),(0,a.jsxs)("p",{className:"text-sm font-black text-slate-600",children:["~",e.estimatedWaitMinutes," min"]})]}),d&&(0,a.jsx)("p",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest",children:"Atendendo..."})]}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void i(r.map(e=>{if(e.id===t){if("WAITING"===e.status)return{...e,status:"IN_CHAIR"};if("IN_CHAIR"===e.status)return{...e,status:"COMPLETED"}}return e}).filter(e=>"COMPLETED"!==e.status))},title:n?"Chamar para cadeira":"Finalizar atendimento",className:"\n                                        w-12 h-12 md:w-14 md:h-14 rounded-2xl flex items-center justify-center transition-all shadow-lg active:scale-90\n                                        ".concat(n?"bg-brand-dark text-brand-light hover:bg-black":"bg-white text-brand-dark hover:bg-slate-50","\n                                    "),children:n?(0,a.jsx)(es.A,{size:20,fill:"currentColor"}):(0,a.jsx)(ea.A,{size:24,strokeWidth:3})})]})]},e.id)})})]})]})]})},er={POINTS_PER_CURRENCY:1,MIN_POINTS_TO_REDEEM:100,DISCOUNT_CONVERSION_RATE:10},ei={shopName:"Barvo Matriz",address:"Rua Augusta, 1500 - S\xe3o Paulo, SP",phone:"(11) 99999-0000",openingHours:{start:"09:00",end:"20:00"},workingDays:["Seg","Ter","Qua","Qui","Sex","Sab"],defaultCommissionRate:50},en=[{id:"n1",title:"Novo Agendamento",message:"Lucas Moura agendou para hoje \xe0s 15:00",time:"10 min atr\xe1s",read:!1,type:"INFO"},{id:"n2",title:"Estoque Baixo",message:"Shampoo Mentolado atingiu n\xedvel m\xednimo.",time:"1 hora atr\xe1s",read:!1,type:"ALERT"},{id:"n3",title:"Meta Batida",message:"Parab\xe9ns! Faturamento di\xe1rio superou a meta.",time:"Ontem",read:!0,type:"SUCCESS"}],ed=[{id:"auto1",title:"Fidelidade 5 Cortes",triggerType:"APPOINTMENT_COUNT",triggerValue:5,message:"Parab\xe9ns! Voc\xea completou 5 cortes conosco na Barvo. Aqui est\xe1 um cupom de 20% OFF: #BARVO20",active:!0,channel:"WHATSAPP"},{id:"auto2",title:"Feliz Anivers\xe1rio",triggerType:"BIRTHDAY",triggerValue:0,message:"Parab\xe9ns pelo seu dia! \uD83C\uDF82 Venha dar um trato no visual por nossa conta hoje na Barvo.",active:!1,channel:"WHATSAPP"}],eo=[{id:"u1",name:"Carlos Dono",role:i.OWNER,avatar:"https://picsum.photos/seed/u1/100/100",email:"admin@barber.com",password:"123",phone:"(11) 99999-9999"},{id:"u2",name:"Marcos Barbeiro",role:i.BARBER,avatar:"https://picsum.photos/seed/u2/100/100",email:"marcos@barber.com",password:"123",phone:"(11) 88888-8888"},{id:"u3",name:"Jo\xe3o Barbeiro",role:i.BARBER,avatar:"https://picsum.photos/seed/u3/100/100",email:"joao@barber.com",password:"123",phone:"(11) 77777-7777"},{id:"u4",name:"Cliente Teste",role:i.CUSTOMER,avatar:"https://picsum.photos/seed/u4/100/100",email:"cliente@gmail.com",password:"123",phone:"(11) 66666-6666",points:450,paymentMethods:[{id:"pm1",type:"CARD",brand:"visa",last4:"4242",expiry:"12/26",isDefault:!0},{id:"pm2",type:"CARD",brand:"mastercard",last4:"8888",expiry:"08/25",isDefault:!1}]},{id:"c1",name:"Roberto Silva",role:i.CUSTOMER,avatar:"https://picsum.photos/seed/c1/100/100",email:"roberto@gmail.com",phone:"(11) 91111-1111",points:120},{id:"c2",name:"Lucas Moura",role:i.CUSTOMER,avatar:"https://picsum.photos/seed/c2/100/100",email:"lucas@gmail.com",phone:"(11) 92222-2222",points:0}],ec=[{id:"s1",name:"Corte de Cabelo",durationMinutes:30,price:50,cost:15,margin:70,description:"Corte moderno com tesoura ou m\xe1quina."},{id:"s2",name:"Barba Terapia",durationMinutes:30,price:40,cost:12,margin:70,description:"Modelagem de barba com toalha quente."},{id:"s3",name:"Combo (Corte + Barba)",durationMinutes:50,price:80,cost:25,margin:68,description:"O pacote completo."},{id:"s4",name:"Pezinho / Acabamento",durationMinutes:15,price:20,cost:5,margin:75,description:"Apenas os contornos."}],ex=new Date,em=(e,t,s)=>{let a=new Date(e);return a.setHours(t,s,0,0),a},eu=new Date(ex);eu.setDate(eu.getDate()+1);let eb=new Date(ex);eb.setDate(eb.getDate()-1);let ep=new Date(ex);ep.setMonth(ep.getMonth()-1);let eh=[{id:"a1",barberId:"u2",customerId:"c1",customerName:"Roberto Silva",serviceId:"s1",startTime:em(ex,10,0),status:"COMPLETED",paymentMethod:"CREDIT_CARD"},{id:"a2",barberId:"u2",customerId:"c2",customerName:"Lucas Moura",serviceId:"s3",startTime:em(ex,11,0),status:"CONFIRMED",paymentMethod:"PIX"},{id:"a3",barberId:"u3",customerId:"c3",customerName:"Andr\xe9 Santos",serviceId:"s2",startTime:em(ex,10,30),status:"CONFIRMED",paymentMethod:"PRESENTIAL"},{id:"a4",barberId:"u3",customerId:"c4",customerName:"Felipe Neto",serviceId:"s1",startTime:em(ex,14,0),status:"CONFIRMED",paymentMethod:"DEBIT_CARD"},{id:"a5",barberId:"u2",customerId:"u4",customerName:"Cliente Teste",serviceId:"s3",startTime:em(eu,15,30),status:"CONFIRMED",paymentMethod:"CREDIT_CARD"},{id:"a6",barberId:"u3",customerId:"u4",customerName:"Cliente Teste",serviceId:"s1",startTime:em(eb,18,0),status:"COMPLETED",paymentMethod:"PIX"},{id:"a7",barberId:"u2",customerId:"u4",customerName:"Cliente Teste",serviceId:"s2",startTime:em(ep,10,0),status:"COMPLETED",paymentMethod:"PRESENTIAL"}],eg=[{id:"q1",customerName:"Pedro Henrique",serviceId:"s1",joinedAt:new Date(Date.now()-12e5),estimatedWaitMinutes:10,status:"WAITING"},{id:"q2",customerName:"Gabriel Costa",serviceId:"s2",joinedAt:new Date(Date.now()-3e5),estimatedWaitMinutes:25,status:"WAITING"}],ef=[{id:"t1",date:"2023-10-25",amount:80,type:"SERVICE",description:"Combo Corte + Barba",barberId:"u2",paymentMethod:"CREDIT_CARD"},{id:"t2",date:"2023-10-25",amount:50,type:"SERVICE",description:"Corte Simples",barberId:"u3",paymentMethod:"PIX"},{id:"t3",date:"2023-10-25",amount:45,type:"PRODUCT",description:"Pomada Matte",paymentMethod:"DEBIT_CARD"},{id:"t4",date:"2023-10-24",amount:120,type:"SERVICE",description:"Corte + Pigmenta\xe7\xe3o",barberId:"u2",paymentMethod:"PRESENTIAL"},{id:"t5",date:"2023-10-24",amount:40,type:"SERVICE",description:"Barba",barberId:"u3",paymentMethod:"CREDIT_CARD"},{id:"t6",date:"2023-10-23",amount:200,type:"SERVICE",description:"Dia do Noivo",barberId:"u2",paymentMethod:"PIX"},{id:"t7",date:"2023-10-23",amount:90,type:"SERVICE",description:"Combo VIP",barberId:"u3",paymentMethod:"DEBIT_CARD"}],ej={monthlyRevenue:15450,totalAppointments:234,newCustomers:45,avgTicket:66},ev=[{id:"p1",name:"Pomada Matte Barvo Series",quantity:15,price:45,minLevel:10,category:"Finaliza\xe7\xe3o"},{id:"p2",name:"Shampoo Mentolado 5L",quantity:5,price:35,minLevel:8,category:"Lavat\xf3rio"},{id:"p3",name:"\xd3leo de Barba Premium",quantity:12,price:40,minLevel:5,category:"Barba"},{id:"p4",name:"Cerveja Artesanal IPA",quantity:48,price:15,minLevel:24,category:"Bar"}],eN=[{id:"c1",title:"Ver\xe3o Barvo 2024",type:"WHATSAPP",status:"SENT",sentCount:150,openRate:85,date:"2023-12-20",content:"Fique no estilo com a Barvo! Desconto de 20% at\xe9 o final do m\xeas!"},{id:"c2",title:"Volta \xe0s Aulas",type:"EMAIL",status:"DRAFT",sentCount:0,date:"2024-01-15",content:"Volte com estilo na Barvo. Agende seu corte."}],ew=[{id:"plan1",name:"Barvo Essencial",price:80,servicesPerMonth:2,includedServiceIds:["s1"],includesBeard:!1,benefits:["Acesso priorit\xe1rio","Caf\xe9 gr\xe1tis"],activeMembers:45,utilizationRate:75,revenueGenerated:3600},{id:"plan2",name:"Barvo VIP",price:150,servicesPerMonth:0,includedServiceIds:["s1","s2","s3"],includesBeard:!0,benefits:["Cortes ilimitados","Barba inclusa","Cerveja cortesia","10% OFF em produtos"],activeMembers:28,utilizationRate:60,revenueGenerated:4200}],ey={mrr:7800,churnRate:3.5,clv:1250},ek=[{id:"n1",customerId:"c1",barberId:"u2",date:"2023-10-15",note:"Cliente prefere disfar\xe7ado na 0.5 (Mid Fade). Cuidado com sinal na sobrancelha direita.",tags:["Mid Fade","Sobrancelha"]},{id:"n2",customerId:"c2",barberId:"u3",date:"2023-10-10",note:"Barba desenhada com navalha, pele sens\xedvel. Usar toalha morna, n\xe3o quente.",tags:["Pele Sens\xedvel","Barba"]}],eA=[{id:"sp1",name:"Pomada Modeladora Barvo Matte",description:"Fixa\xe7\xe3o forte com efeito seco natural. F\xf3rmula exclusiva da Barvo \xe0 base de \xe1gua.",price:45,category:"Cabelo",rating:4.8,reviewsCount:124,images:["https://images.unsplash.com/photo-1626285861696-9f0bf5a49c6d?auto=format&fit=crop&q=80&w=600"],variations:["100g","50g"],inStock:!0},{id:"sp2",name:"\xd3leo para Barba Barvo Viking",description:"Hidrata\xe7\xe3o profunda com fragr\xe2ncia amadeirada exclusiva.",price:39.9,category:"Barba",rating:4.9,reviewsCount:89,images:["https://images.unsplash.com/photo-1626285861696-9f0bf5a49c6d?auto=format&fit=crop&q=80&w=600"],variations:["30ml","60ml"],inStock:!0}];var eC=s(5917),eS=s(919),eI=s(39324),eE=s(78519),eR=s(56154),ez=s(75882),eD=s(60709),eP=s(5937);let eM="pro_barber_memberships",eT="pro_barber_usage",eB={u4:{planId:"mp1",startDate:new Date(Date.now()-2592e6).toISOString()}};function eL(e,t){return!!eU()[e]||null!=t&&!!t.membershipId||e in eB}function eO(e){let t=eU();return t[e]?t[e]:e in eB?eB[e]:null}function e_(){return Object.keys(eU()).length+Object.keys(eB).length}function eq(e,t){let s=function(e){let t=eV(e);if(!t){var s;let a=new Date,l="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0")),r=new Date(a.getFullYear(),a.getMonth()+1,1);t={planId:(null==(s=eO(e))?void 0:s.planId)||"",customerId:e,servicesUsedThisMonth:0,month:l,createdAt:new Date().toISOString(),resetDate:r.toISOString()}}return function(e){let t=eV(e);return!!t&&new Date>new Date(t.resetDate)}(e)&&(eF(e),t=eV(e)),t}(e);return s.servicesUsedThisMonth,s.servicesUsedThisMonth<t&&(s.servicesUsedThisMonth+=1,eW(s)),{currentUsage:s.servicesUsedThisMonth,remaining:Math.max(0,t-s.servicesUsedThisMonth),isLimitReached:s.servicesUsedThisMonth>=t}}function eF(e){var t;let s=new Date,a="".concat(s.getFullYear(),"-").concat(String(s.getMonth()+1).padStart(2,"0")),l=new Date(s.getFullYear(),s.getMonth()+1,1);eW({planId:(null==(t=eO(e))?void 0:t.planId)||"",customerId:e,servicesUsedThisMonth:0,month:a,createdAt:new Date().toISOString(),resetDate:l.toISOString()})}function eU(){let e=localStorage.getItem(eM);return e?JSON.parse(e):{}}function eV(e){let t=localStorage.getItem(eT);return(t?JSON.parse(t):{})[e]||null}function eW(e){let t=localStorage.getItem(eT),s=t?JSON.parse(t):{};s[e.customerId]=e,localStorage.setItem(eT,JSON.stringify(s))}function e$(e){return Math.floor(e*er.POINTS_PER_CURRENCY)}let eG=e=>{let{message:t,type:s,onClose:l}=e;return(0,a.jsxs)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-2 px-4 py-3 rounded-lg shadow-xl animate-fade-in border ".concat("success"===s?"bg-emerald-600 border-emerald-500 text-white":"bg-white border-red-100 text-red-600"),children:["success"===s?(0,a.jsx)(eC.A,{size:16,className:"text-white"}):(0,a.jsx)($.A,{size:16}),(0,a.jsx)("span",{className:"font-semibold text-xs",children:t}),(0,a.jsx)("button",{onClick:l,className:"ml-2 text-sm opacity-70",children:"\xd7"})]})},eH=e=>{var t,s,r,n,o;let{currentUser:c,initialData:m,services:u,onBook:b,shopSettings:h,allAppointments:g,availabilityExceptions:f}=e,[j,v]=(0,l.useState)(1),[N,w]=(0,l.useState)({serviceIds:[],barberId:"",date:new Date().toISOString().split("T")[0],time:"",paymentMethod:"PRESENTIAL",selectedCardId:(null==c||null==(s=c.paymentMethods)||null==(t=s.find(e=>e.isDefault))?void 0:t.id)||(null==c||null==(n=c.paymentMethods)||null==(r=n[0])?void 0:r.id)||""}),[y,k]=(0,l.useState)(!1),[A,C]=(0,l.useState)({name:"",phone:""}),[S,I]=(0,l.useState)(null),[E,R]=(0,l.useState)("IDLE"),[z,D]=(0,l.useState)(300);(0,l.useEffect)(()=>{m&&(w(e=>({...e,serviceIds:m.serviceIds||[],barberId:m.barberId||""})),m.customerName&&C(e=>({...e,name:m.customerName||""})))},[m]),(0,l.useEffect)(()=>{if("DISPLAY"===E&&z>0){let e=setInterval(()=>D(e=>e-1),1e3);return()=>clearInterval(e)}},[E,z]);let P=eo.filter(e=>"BARBER"===e.role),M=(0,l.useMemo)(()=>{let e=[],[t]=h.openingHours.start.split(":").map(Number),[s]=h.openingHours.end.split(":").map(Number);for(let a=t;a<s;a++)e.push("".concat(a.toString().padStart(2,"0"),":00")),e.push("".concat(a.toString().padStart(2,"0"),":30"));return e},[h]),T=(0,l.useMemo)(()=>{let e=[],t=new Date;for(let s=0;s<7;s++){let a=new Date(t);a.setDate(t.getDate()+s),e.push({iso:a.toISOString().split("T")[0],label:a.toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit"}),isToday:0===s})}return e},[]),B=u.filter(e=>N.serviceIds.includes(e.id)),L=B.reduce((e,t)=>e+t.durationMinutes,0),O=B.reduce((e,t)=>e+Number(t.price),0),_=(null==m?void 0:m.customerId)?eo.find(e=>e.id===m.customerId):c,q=!!_&&eL(_.id,_);_&&eO(_.id);let F=O,V=0,W=0,G=!0,H=0;if(q&&_){N.serviceIds[0]&&((G=function(e,t){let s=eV(e);return!!s&&s.servicesUsedThisMonth<4}(_.id,0))||(H=eq(_.id,4).remaining));let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return e*t}(e,t);return{finalPrice:e-s,discountAmount:s,savingsPercentage:100*t}}(O,.15);F=e.finalPrice,V=e.discountAmount,W=e.savingsPercentage}(null==c?void 0:c.points)&&c.points;let X=eo.find(e=>e.id===N.barberId),Y=(e,t)=>{I({message:e,type:t}),setTimeout(()=>I(null),4e3)},K=e=>{if(!N.barberId||0===N.serviceIds.length)return!0;let[t,s]=e.split(":").map(Number),a=new Date(N.date);a.setHours(t,s,0,0);let l=new Date(a);if(l.setMinutes(l.getMinutes()+L),N.date===new Date().toISOString().split("T")[0]&&a<new Date)return!1;let[r,i]=h.openingHours.end.split(":").map(Number),n=new Date(N.date);return n.setHours(r,i,0,0),!(l>n)&&!(g.filter(e=>{if(e.barberId!==N.barberId||"CANCELLED"===e.status)return!1;let t=new Date(e.startTime),s=u.find(t=>t.id===e.serviceId),r=s?s.durationMinutes:30,i=new Date(t);return i.setMinutes(i.getMinutes()+r),a<i&&l>t}).length>0)&&!f.some(e=>{if(e.barberId!==N.barberId||e.date!==N.date)return!1;let[t,s]=e.startTime.split(":").map(Number),r=new Date(N.date);r.setHours(t,s,0,0);let i=new Date(r);return i.setMinutes(i.getMinutes()+30),a<i&&l>r})};(0,l.useEffect)(()=>{N.time&&!K(N.time)&&(w(e=>({...e,time:""})),j>4&&(v(4),Y("O hor\xe1rio n\xe3o comporta mais a dura\xe7\xe3o total dos servi\xe7os.","error")))},[N.serviceIds,L]);let Z=()=>{if(4===j&&N.time&&!K(N.time))return void Y("Conflito de agenda. Escolha outro hor\xe1rio.","error");if(5===j&&"PIX"===N.paymentMethod&&"IDLE"===E){R("GENERATING"),setTimeout(()=>R("DISPLAY"),1500);return}k(!0),setTimeout(()=>{v(e=>e+1),k(!1)},300)};return(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-[2.5rem] shadow-2xl border border-slate-100 overflow-hidden min-h-[550px] flex flex-col transition-all duration-300 relative ".concat(5===j?"max-w-5xl":""),children:[S&&(0,a.jsx)(eG,{message:S.message,type:S.type,onClose:()=>I(null)}),5!==j&&7!==j&&(0,a.jsxs)("div",{className:"bg-brand-dark py-8 px-8 text-white text-center relative overflow-hidden",children:[(0,a.jsx)("h1",{className:"text-xl font-black tracking-tighter uppercase italic mb-4",children:"Novo Agendamento"}),(0,a.jsx)("div",{className:"flex justify-center gap-1.5",children:[1,2,3,4,5,6].map(e=>(0,a.jsx)("div",{className:"h-1.5 rounded-full transition-all duration-300 ".concat(j>=e?"bg-brand-light w-8":"bg-white/10 w-2")},e))})]}),(0,a.jsxs)("div",{className:"p-6 md:p-8 flex-1 flex flex-col relative overflow-hidden ".concat(5===j?"p-0":"bg-slate-50/20"),children:[1===j&&(0,a.jsxs)("div",{className:"space-y-4 animate-fade-in flex-1 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h2",{className:"text-lg font-black text-brand-dark uppercase tracking-tighter",children:"Servi\xe7os"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[B.length," selecionado"]}),q&&(0,a.jsx)("span",{className:"text-[10px] font-black px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full uppercase",children:"✓ Assinante"})]})]}),(0,a.jsx)("div",{className:"grid gap-2 pb-24 overflow-y-auto custom-scrollbar",children:u.map(e=>{let t=N.serviceIds.includes(e.id),s=q?.15*e.price:0;return(0,a.jsxs)("button",{onClick:()=>(e=>{w(t=>{let s=t.serviceIds.includes(e)?t.serviceIds.filter(t=>t!==e):[...t.serviceIds,e];return{...t,serviceIds:s}})})(e.id),className:"w-full text-left p-4 md:p-5 border-2 rounded-2xl transition-all relative ".concat(t?"border-brand-dark bg-white shadow-md ring-4 ring-brand-dark/5":"border-slate-100 bg-white"),children:[q&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 bg-emerald-500 text-white text-[10px] font-black px-2 py-1 rounded-full",children:"-15%"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center transition-colors ".concat(t?"bg-brand-dark text-white":"bg-slate-100 text-slate-400"),children:t?(0,a.jsx)(eC.A,{size:20,strokeWidth:4}):(0,a.jsx)(p.A,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block font-black text-sm md:text-base ".concat(t?"text-brand-dark":"text-slate-800"),children:e.name}),(0,a.jsxs)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[e.durationMinutes," min"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[q&&s>0&&(0,a.jsxs)("div",{className:"text-[10px] text-slate-400 line-through",children:["R$ ",Number(e.price).toFixed(0)]}),(0,a.jsxs)("div",{className:"text-base font-black ".concat(t?"text-brand-dark":"text-slate-900"),children:["R$ ",q?(e.price-s).toFixed(0):Number(e.price).toFixed(0)]})]})]})]},e.id)})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-5 bg-white/95 backdrop-blur-md border-t border-slate-100 flex items-center justify-between shadow-[0_-10px_20px_rgba(0,0,0,0.02)]",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Total"}),(0,a.jsxs)("span",{className:"text-xl font-black text-brand-dark leading-none",children:["R$ ",F.toFixed(2)]})]}),(0,a.jsxs)("button",{onClick:Z,disabled:0===N.serviceIds.length,className:"bg-brand-dark text-white px-8 py-3.5 rounded-2xl font-black shadow-2xl disabled:opacity-20 transition-all flex items-center gap-2 text-sm uppercase tracking-widest active:scale-95",children:["Avan\xe7ar ",(0,a.jsx)(Q.A,{size:18,strokeWidth:3})]})]})]}),2===j&&(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in flex-1",children:[(0,a.jsxs)("button",{onClick:()=>v(1),className:"text-[10px] font-black text-slate-400 flex items-center gap-1 uppercase tracking-widest hover:text-brand-dark",children:[(0,a.jsx)(J.A,{size:16})," Voltar"]}),(0,a.jsx)("h2",{className:"text-xl font-black text-brand-dark tracking-tighter",children:"Escolha o Barbeiro"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:P.map(e=>(0,a.jsxs)("button",{onClick:()=>{w({...N,barberId:e.id}),Z()},className:"p-6 border-2 rounded-[2rem] bg-white transition-all flex flex-col items-center gap-3 active:scale-95 ".concat(N.barberId===e.id?"border-brand-dark shadow-xl ring-4 ring-brand-dark/5":"border-slate-100"),children:[(0,a.jsx)(d,{url:e.avatar,name:e.name,size:"lg",className:"!w-20 !h-20 shadow-lg border-2 border-white"}),(0,a.jsx)("span",{className:"font-black text-brand-dark text-sm uppercase tracking-tighter",children:e.name.split(" ")[0]})]},e.id))})]}),3===j&&(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in flex-1",children:[(0,a.jsxs)("button",{onClick:()=>v(2),className:"text-[10px] font-black text-slate-400 flex items-center gap-1 uppercase tracking-widest",children:[(0,a.jsx)(J.A,{size:16})," Voltar"]}),(0,a.jsx)("h2",{className:"text-xl font-black text-brand-dark text-center tracking-tighter",children:"Para quando?"}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-3",children:T.map(e=>(0,a.jsxs)("button",{onClick:()=>{w({...N,date:e.iso}),Z()},className:"py-5 rounded-2xl border-2 transition-all flex flex-col items-center justify-center active:scale-90 ".concat(N.date===e.iso?"bg-brand-dark border-brand-dark text-white shadow-xl":"bg-white border-slate-100 text-slate-600"),children:[(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60 mb-1",children:e.label.split(" ")[0]}),(0,a.jsx)("span",{className:"text-2xl font-black tracking-tighter",children:e.label.split(" ")[1]})]},e.iso))})]}),4===j&&(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in flex-1",children:[(0,a.jsxs)("button",{onClick:()=>v(3),className:"text-[10px] font-black text-slate-400 flex items-center gap-1 uppercase tracking-widest",children:[(0,a.jsx)(J.A,{size:16})," Voltar"]}),(0,a.jsx)("h2",{className:"text-xl font-black text-brand-dark text-center tracking-tighter",children:"Qual hor\xe1rio?"}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-100 p-3 rounded-xl flex items-center gap-2 mb-2",children:[(0,a.jsx)(x.A,{size:16,className:"text-blue-500"}),(0,a.jsxs)("p",{className:"text-[10px] font-bold text-blue-700 uppercase",children:["Estimado: ",L," min de atendimento"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 overflow-y-auto max-h-[300px] pr-2 custom-scrollbar",children:M.map(e=>{let t=K(e);return(0,a.jsx)("button",{disabled:!t,onClick:()=>{w({...N,time:e}),Z()},className:"py-4 border-2 rounded-xl font-black text-sm tracking-tighter transition-all active:scale-95 ".concat(t?N.time===e?"bg-brand-dark border-brand-dark text-white shadow-lg":"bg-white border-slate-100 text-slate-700":"bg-slate-50 text-slate-200 border-slate-50 cursor-not-allowed opacity-40"),children:e},e)})})]}),5===j&&(0,a.jsxs)("div",{className:"animate-fade-in flex flex-col md:flex-row min-h-[500px]",children:[(0,a.jsxs)("div",{className:"flex-1 p-8 md:p-12 bg-white",children:[(0,a.jsxs)("button",{onClick:()=>{"IDLE"!==E?R("IDLE"):v(4)},className:"text-slate-400 hover:text-brand-dark mb-8 flex items-center gap-1 text-[10px] font-black uppercase tracking-widest",children:[(0,a.jsx)(J.A,{size:16})," Voltar"]}),(0,a.jsxs)("div",{className:"max-w-sm mx-auto",children:[(0,a.jsx)("h2",{className:"text-3xl font-black text-slate-800 mb-8 tracking-tighter",children:"Checkout"}),"GENERATING"===E&&(0,a.jsxs)("div",{className:"text-center py-20 animate-pulse",children:[(0,a.jsx)(eS.A,{className:"animate-spin mx-auto text-emerald-500 mb-4",size:48}),(0,a.jsx)("p",{className:"text-sm font-black text-slate-600 uppercase tracking-widest",children:"Gerando Pix..."})]}),"DISPLAY"===E&&(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,a.jsxs)("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border-2 border-emerald-100 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"bg-white p-4 rounded-[2rem] shadow-2xl mb-4",children:(0,a.jsx)("img",{src:"https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=BARVO_BOOKING_PIX",className:"w-40 h-40",alt:"QR Pix"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-emerald-600 font-black mb-2",children:[(0,a.jsx)(eI.A,{size:20})," ",(0,a.jsx)("span",{className:"text-xl",children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(z)})]}),(0,a.jsx)("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest text-center",children:"Pagamento Instant\xe2neo"})]}),(0,a.jsx)("button",{onClick:Z,className:"w-full bg-emerald-600 text-white py-5 rounded-[2rem] font-black text-sm uppercase tracking-widest shadow-2xl shadow-emerald-500/20 active:scale-95 transition-all",children:"Confirmar Pagamento"})]}),"IDLE"===E&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Meios de Pagamento"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[null==c||null==(o=c.paymentMethods)?void 0:o.map(e=>(0,a.jsxs)("button",{onClick:()=>w({...N,paymentMethod:"CREDIT_CARD",selectedCardId:e.id}),className:"p-5 border-2 rounded-2xl transition-all flex items-center gap-4 text-left active:scale-[0.98] ".concat(N.selectedCardId===e.id?"border-brand-dark bg-slate-50 ring-4 ring-brand-dark/5 shadow-md":"border-slate-100 bg-white"),children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(N.selectedCardId===e.id?"bg-brand-dark text-white":"bg-slate-50 text-slate-400"),children:(0,a.jsx)(eE.A,{size:20})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("p",{className:"font-black text-slate-800 text-sm tracking-tight",children:["Cart\xe3o Final ",e.last4]})}),N.selectedCardId===e.id&&(0,a.jsx)(eC.A,{size:18,className:"text-brand-dark",strokeWidth:4})]},e.id)),(0,a.jsxs)("button",{onClick:()=>w({...N,paymentMethod:"PIX",selectedCardId:""}),className:"p-5 border-2 rounded-2xl transition-all flex items-center gap-4 text-left active:scale-[0.98] ".concat("PIX"===N.paymentMethod?"border-emerald-600 bg-emerald-50 ring-4 ring-emerald-600/5 shadow-md":"border-slate-100 bg-white"),children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat("PIX"===N.paymentMethod?"bg-emerald-600 text-white":"bg-slate-50 text-slate-400"),children:(0,a.jsx)(eR.A,{size:20})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"font-black text-slate-800 text-sm tracking-tight",children:"Pix (5% Desconto)"})}),"PIX"===N.paymentMethod&&(0,a.jsx)(eC.A,{size:18,className:"text-emerald-600",strokeWidth:4})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Pagar Localmente"}),(0,a.jsxs)("button",{onClick:()=>w({...N,paymentMethod:"PRESENTIAL",selectedCardId:""}),className:"w-full p-6 border-2 border-dashed rounded-2xl transition-all flex items-center gap-4 text-left active:scale-[0.98] ".concat("PRESENTIAL"===N.paymentMethod?"border-slate-800 bg-slate-50":"border-slate-100 bg-white"),children:[(0,a.jsx)(ez.A,{size:24,className:"text-slate-400"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"font-black text-slate-800 text-sm tracking-tight",children:"Pagar na Barbearia"})})]})]}),(0,a.jsxs)("button",{onClick:Z,className:"w-full mt-4 ".concat("PIX"===N.paymentMethod?"bg-emerald-600":"bg-brand-dark"," text-white py-5 rounded-[2rem] font-black text-sm uppercase tracking-widest shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3"),children:["Revisar Reserva ",(0,a.jsx)(U.A,{size:20,strokeWidth:3})]})]})]})]}),(0,a.jsxs)("div",{className:"w-full md:w-96 bg-slate-50 p-8 md:p-12 border-l border-slate-100 flex flex-col justify-center",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-8 text-center md:text-left",children:"Resumo"}),(0,a.jsx)("div",{className:"space-y-4 mb-10",children:B.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1 pr-4",children:[(0,a.jsx)("p",{className:"font-black text-slate-800 text-sm tracking-tight leading-tight",children:e.name}),(0,a.jsxs)("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:[e.durationMinutes," min"]})]}),(0,a.jsxs)("span",{className:"font-black text-slate-900 text-sm",children:["R$ ",Number(e.price).toFixed(2)]})]},e.id))}),(0,a.jsxs)("div",{className:"pt-6 border-t-2 border-slate-200/50 space-y-4",children:[q&&V>0&&(0,a.jsxs)("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-4 flex items-start gap-3",children:[(0,a.jsx)(eD.A,{size:18,className:"text-emerald-600 mt-0.5 flex-shrink-0",fill:"currentColor"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-emerald-700 uppercase tracking-widest mb-1",children:"Desconto Assinante"}),(0,a.jsxs)("p",{className:"text-sm font-black text-emerald-900",children:["-R$ ",V.toFixed(2)," (",W.toFixed(0),"%)"]})]})]}),q&&!G&&(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[(0,a.jsx)($.A,{size:18,className:"text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-amber-700 uppercase tracking-widest mb-1",children:"Limite de Servi\xe7os"}),(0,a.jsxs)("p",{className:"text-xs text-amber-800",children:["Voc\xea tem ",H," servi\xe7os restantes neste m\xeas."]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xl font-black text-slate-900 tracking-tighter uppercase",children:"Total"}),(0,a.jsxs)("span",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:["R$ ",F.toFixed(2)]})]})]})]})]}),6===j&&(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in flex-1 flex flex-col",children:[(0,a.jsxs)("button",{onClick:()=>v(5),className:"text-[10px] font-black text-slate-400 flex items-center gap-1 uppercase tracking-widest",children:[(0,a.jsx)(J.A,{size:16})," Voltar"]}),(0,a.jsx)("h2",{className:"text-2xl font-black text-brand-dark tracking-tighter",children:"Confirma\xe7\xe3o"}),(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] border border-slate-100 p-8 space-y-6 shadow-xl relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 pb-4",children:[(0,a.jsx)("span",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px]",children:"Agendamento"}),(0,a.jsx)("span",{className:"font-black text-right pl-4",children:B.map(e=>e.name).join(", ")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 pb-4",children:[(0,a.jsx)("span",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px]",children:"Data e Hora"}),(0,a.jsxs)("span",{className:"font-black",children:[new Date(N.date).toLocaleDateString("pt-BR")," \xe0s ",N.time]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 pb-4",children:[(0,a.jsx)("span",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px]",children:"Barbeiro"}),(0,a.jsx)("span",{className:"font-black",children:null==X?void 0:X.name})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px]",children:"Pagamento"}),(0,a.jsx)("span",{className:"font-black uppercase text-[10px] px-3 py-1 rounded-full ".concat("PRESENTIAL"===N.paymentMethod?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"),children:"PIX"===N.paymentMethod?"Pix":"PRESENTIAL"===N.paymentMethod?"Presencial":"App"})]})]}),(!c||c.role!==i.CUSTOMER&&!(null==m?void 0:m.customerId))&&(0,a.jsxs)("div",{className:"space-y-4 bg-white p-6 rounded-2xl border border-slate-100 shadow-sm",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Seu Nome"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(et.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Como quer ser chamado?",className:"w-full pl-12 pr-4 py-4 bg-slate-50 border border-slate-100 rounded-xl outline-none text-sm font-black",value:A.name,onChange:e=>C({...A,name:e.target.value})})]})]}),(0,a.jsx)("div",{className:"mt-auto pt-8",children:(0,a.jsx)("button",{onClick:()=>{let e=(null==m?void 0:m.customerId)||(null==c?void 0:c.id)||"guest",t=(null==c?void 0:c.id)===e?c.name:A.name||"Cliente";if("guest"===e&&!A.name)return void Y("Nome do cliente \xe9 obrigat\xf3rio.","error");if(!K(N.time)){Y("Este hor\xe1rio acabou de ser ocupado. Por favor, mude o hor\xe1rio.","error"),v(4);return}k(!0);let[s,a]=N.time.split(":").map(Number),l=new Date(N.date);l.setHours(s,a,0,0),N.serviceIds.forEach(s=>{b({barberId:N.barberId,serviceId:s,startTime:l,customerName:t,customerId:e,paymentMethod:N.paymentMethod,paymentStatus:"PRESENTIAL"!==N.paymentMethod?"PAID":"PENDING",isMembershipUsage:q}),q&&_&&eq(_.id,4)}),setTimeout(()=>{v(7),k(!1),Y("Hor\xe1rio Confirmado!","success")},1e3)},disabled:y,className:"w-full bg-brand-dark text-white py-5 rounded-[2rem] font-black text-base uppercase tracking-widest shadow-2xl active:scale-95 flex items-center justify-center gap-3",children:y?(0,a.jsx)(eS.A,{className:"animate-spin",size:24}):"Finalizar Agendamento"})})]}),7===j&&(0,a.jsxs)("div",{className:"text-center space-y-8 animate-fade-in my-auto flex flex-col items-center justify-center flex-1",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-600 shadow-inner",children:(0,a.jsx)(ea.A,{size:48,strokeWidth:3,className:"animate-bounce"})}),(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("h2",{className:"text-3xl font-black text-brand-dark tracking-tighter uppercase italic",children:"Agendado!"}),(0,a.jsxs)("p",{className:"text-slate-500 mt-2 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Tudo certo, ",(0,a.jsx)("b",{children:(null==c?void 0:c.name.split(" ")[0])||A.name.split(" ")[0]}),"! Seu hor\xe1rio est\xe1 garantido para dia ",(0,a.jsx)("b",{children:new Date(N.date).toLocaleDateString("pt-BR")})," \xe0s ",(0,a.jsx)("b",{children:N.time}),"."]})]}),(0,a.jsxs)("div",{className:"w-full max-w-xs space-y-3",children:[(0,a.jsxs)("a",{href:(()=>{let e=(null==m?void 0:m.customerName)||(null==c?void 0:c.name)||A.name,t=B.map(e=>e.name).join(", "),s="PIX"===N.paymentMethod?"Pix (Pago)":"PRESENTIAL"===N.paymentMethod?"Pagamento Local":"Pago via App",[a,l,r]=N.date.split("-"),i="".concat(r,"/").concat(l,"/").concat(a),n="Ol\xe1! Sou o ".concat(e,". Acabei de confirmar meu agendamento na Barvo! \uD83D\uDC88✂️\n\n✅ *Detalhes:*\n\n✂️ *Servi\xe7o:* ").concat(t,"\n\uD83D\uDC88 *Barbeiro:* ").concat(null==X?void 0:X.name,"\n\uD83D\uDCC5 *Data:* ").concat(i," \xe0s ").concat(N.time,"\n\uD83D\uDCB0 *Status:* ").concat(s,"\n\uD83D\uDCB5 *Total:* R$ ").concat(F.toFixed(2),"\n\n\uD83D\uDCCC *Lembrete:* Fique atento! Enviaremos uma confirma\xe7\xe3o para voc\xea no dia anterior ao seu servi\xe7o para garantir que seu hor\xe1rio esteja ok. \uD83D\uDE09");return"https://wa.me/".concat(h.phone.replace(/\D/g,""),"?text=").concat(encodeURIComponent(n))})(),target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-3 bg-emerald-600 text-white font-black py-4 rounded-2xl shadow-xl shadow-emerald-600/20 active:scale-95 transition-all text-xs uppercase tracking-widest",children:[(0,a.jsx)(eP.A,{size:18})," Notificar no WhatsApp"]}),(0,a.jsx)("button",{onClick:()=>{v(1),R("IDLE")},className:"text-slate-400 font-bold text-[10px] uppercase tracking-widest pt-2",children:"Fazer outra reserva"})]})]})]})]})};var eX=s(92373),eY=s(95704);let eK=eY.env.NEXT_PUBLIC_SUPABASE_URL,eJ=eY.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,eQ=()=>!!(eK&&eJ&&eK.startsWith("http")),eZ=(0,eX.UU)(eK||"https://placeholder.supabase.co",eJ||"placeholder-key");eQ()||console.warn("⚠️ Supabase n\xe3o configurado. Verifique o arquivo .env ou as vari\xe1veis de ambiente.");let e0="pro_barber_demo_db_v1",e1=()=>"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2,10),e2={users:{},profiles:{},barbershops:[],services:[],appointments:[],inventory:[],orders:[]};function e4(){return void 0!==window.localStorage}function e5(){if(e4())try{window.localStorage.setItem(e0,JSON.stringify(e2))}catch(e){console.warn("Could not save demo DB state",e)}}!function(){if(e4())try{let e=window.localStorage.getItem(e0);e&&(e2=JSON.parse(e))}catch(e){console.warn("Could not load demo DB state",e)}}();let e6={async createUser(e,t){if(e2.users[e])throw Error("User already exists");let s=e1();return e2.users[e]={id:s,email:e,password:t,createdAt:Date.now()},await this.createProfile({id:s,name:"",role:"customer",email:e}),e5(),{id:s,email:e}},async signIn(e,t){let s=e2.users[e];if(!s||s.password!==t)throw Error("Invalid credentials");return{id:s.id,email:s.email}},getProfile:async e=>e2.profiles[e]||null,async createProfile(e){let t=e.id||e1(),s={id:t,name:e.name||"",role:e.role||"customer",avatar:e.avatar||"",points:e.points||0,email:e.email||""};return e2.profiles[t]=s,e5(),s},updateProfile:async(e,t)=>e2.profiles[e]?(e2.profiles[e]={...e2.profiles[e],...t},e5(),e2.profiles[e]):null,async createBarbershop(e){let t=e.id||e1(),s={...e,id:t,staff:e.staff||[]};return e2.barbershops.push(s),e5(),s},getBarbershopByOwner:async e=>e2.barbershops.find(t=>t.owner_id===e)||null,getBarbershopById:async e=>e2.barbershops.find(t=>t.id===e)||null,async addStaffToBarbershop(e,t,s){let a=e2.barbershops.find(t=>t.id===e);if(!a)throw Error("Barbershop not found");return a.staff=a.staff||[],a.staff.includes(t)||a.staff.push(t),e5(),a},getServices:async e=>e2.services.filter(t=>t.barbershop_id===e),async saveService(e){if(!e.id){let t={...e,id:e1()};return e2.services.push(t),e5(),t}let t=e2.services.findIndex(t=>t.id===e.id);if(t>=0)return e2.services[t]={...e2.services[t],...e},e5(),e2.services[t];let s={...e,id:e.id};return e2.services.push(s),e5(),s},async deleteService(e){e2.services=e2.services.filter(t=>t.id!==e),e5()},getAppointments:async e=>(function(e,t){return t?e.filter(e=>e.barbershop_id===t):e})(e2.appointments,e).map(e=>({...e,startTime:new Date(e.startTime)})),async createAppointment(e){let t={...e,id:e1(),status:"scheduled",createdAt:Date.now()};return e2.appointments.push(t),e5(),t},async updateAppointmentStatus(e,t,s){let a=e2.appointments.findIndex(t=>t.id===e);a>=0&&(e2.appointments[a].status=t,s&&(e2.appointments[a].customerRating=s),e5())},getInventory:async e=>e2.inventory.filter(t=>t.barbershop_id===e),async upsertInventoryItem(e){if(!e.id){let t={...e,id:e1()};return e2.inventory.push(t),e5(),t}let t=e2.inventory.findIndex(t=>t.id===e.id);if(t>=0)return e2.inventory[t]={...e2.inventory[t],...e},e5(),e2.inventory[t];let s={...e,id:e.id};return e2.inventory.push(s),e5(),s},getOrders:async e=>e2.orders.filter(t=>t.barbershop_id===e).sort((e,t)=>{let s="number"==typeof e.createdAt?e.createdAt:parseInt(e.createdAt)||0;return("number"==typeof t.createdAt?t.createdAt:parseInt(t.createdAt)||0)-s}),async createOrder(e){let t=[];for(let a of e.items||[]){var s;let l=e2.inventory.find(t=>t.id===a.productId&&t.barbershop_id===e.barbershop_id);if(!l){t.push({productId:a.productId,reason:"not found"});continue}(null!=(s=l.quantity)?s:0)<a.qty&&t.push({productId:a.productId,reason:"insufficient",avail:l.quantity})}if(t.length)throw Error("Insufficient inventory: "+JSON.stringify(t));for(let t of e.items||[]){let s=e2.inventory.find(s=>s.id===t.productId&&s.barbershop_id===e.barbershop_id);s&&(s.quantity=(s.quantity||0)-t.qty)}let a={...e,id:e1(),createdAt:Date.now(),status:"created"};return e2.orders.push(a),e5(),a},async updateOrderStatus(e,t,s){let a=e2.orders.findIndex(t=>t.id===e);a>=0&&(e2.orders[a].status=t,s&&(e2.orders[a].trackingCode=s),e5())}},e3={async signUp(e){let{email:t,password:s,options:a}=e;try{var l,r;let e=await e6.createUser(t,s);return await e6.updateProfile(e.id,{name:(null==a||null==(l=a.data)?void 0:l.full_name)||"",role:(null==a||null==(r=a.data)?void 0:r.role)||"customer",email:t}),{data:{user:{id:e.id,email:t}},error:null}}catch(e){return{data:null,error:e}}},async signInWithPassword(e){let{email:t,password:s}=e;try{let e=await e6.signIn(t,s);return{data:{user:{id:e.id,email:e.email}},error:null}}catch(e){return{data:null,error:e}}}},e8={signUp:async e=>eQ()?eZ.auth.signUp(e):e3.signUp(e),signInWithPassword:async e=>eQ()?eZ.auth.signInWithPassword(e):e3.signInWithPassword(e)},e9="true"===s(95704).env.NEXT_PUBLIC_DEMO_DB||!eQ();e9&&console.info("⚠️ Usando demo DB em mem\xf3ria (NEXT_PUBLIC_DEMO_DB=true ou Supabase n\xe3o configurado)");let e7=e9?e6:{async getProfile(e){try{let{data:t,error:s}=await eZ.from("profiles").select("*").eq("id",e).single();if(s)throw s;return t}catch(e){return console.error("Erro ao buscar perfil:",e),null}},async createProfile(e){let{data:t,error:s}=await eZ.from("profiles").insert([e]).select().single();if(s)throw s;return t},async getBarbershopByOwner(e){let{data:t,error:s}=await eZ.from("barbershops").select("*").eq("owner_id",e).single();return s?null:t},async createBarbershop(e){let{data:t,error:s}=await eZ.from("barbershops").insert([e]).select().single();if(s)throw s;return t},async getBarbershopById(e){let{data:t,error:s}=await eZ.from("barbershops").select("*").eq("id",e).single();return s?null:t},async getServices(e){let{data:t,error:s}=await eZ.from("services").select("*").eq("barbershop_id",e).order("name");if(s)throw s;return t},async saveService(e){let{data:t,error:s}=await eZ.from("services").upsert([e]).select().single();if(s)throw s;return t},async deleteService(e){let{error:t}=await eZ.from("services").delete().eq("id",e);if(t)throw t},async getAppointments(e){let{data:t,error:s}=await eZ.from("appointments").select("*").eq("barbershop_id",e).order("startTime",{ascending:!0});if(s)throw s;return t.map(e=>({...e,startTime:new Date(e.startTime)}))},async createAppointment(e){let{data:t,error:s}=await eZ.from("appointments").insert([e]).select().single();if(s)throw s;return t},async updateAppointmentStatus(e,t,s){let a={status:t};s&&(a.customerRating=s);let{error:l}=await eZ.from("appointments").update(a).eq("id",e);if(l)throw l},async getInventory(e){let{data:t,error:s}=await eZ.from("inventory").select("*").eq("barbershop_id",e);if(s)throw s;return t},async upsertInventoryItem(e){let{data:t,error:s}=await eZ.from("inventory").upsert([e]).select().single();if(s)throw s;return t},async getOrders(e){let{data:t,error:s}=await eZ.from("orders").select("*").eq("barbershop_id",e).order("createdAt",{ascending:!1});if(s)throw s;return t},async createOrder(e){let{data:t,error:s}=await eZ.from("orders").insert([e]).select().single();if(s)throw s;return t},async updateOrderStatus(e,t,s){let a={status:t};s&&(a.trackingCode=s);let{error:l}=await eZ.from("orders").update(a).eq("id",e);if(l)throw l}};var te=s(23664),tt=s(99708),ts=s(70532),ta=s(57828),tl=s(66721);let tr=e=>{let{onLogin:t,onGuestContinue:s}=e,[d,o]=(0,l.useState)("login"),[c,x]=(0,l.useState)(!1),[m,u]=(0,l.useState)(null),[b,p]=(0,l.useState)(!1),[h,f]=(0,l.useState)(!1),[j,v]=(0,l.useState)({email:"",password:"",name:"",shopName:"",role:i.CUSTOMER}),N=async e=>{e.preventDefault(),x(!0),u(null);try{if("login"===d){let{data:e,error:s}=await e8.signInWithPassword({email:j.email,password:j.password});if(s)throw s;let a=await e7.getProfile(e.user.id);t({...a,email:e.user.email})}else{let{data:e,error:s}=await e8.signUp({email:j.email,password:j.password,options:{data:{full_name:j.name,role:j.role}}});if(s)throw s;if(!e||!e.user)throw Error("Erro ao criar usu\xe1rio.");let a={id:e.user.id,name:j.name,role:j.role,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(e.user.id),points:0},l=await e7.createProfile(a);j.role===i.OWNER&&await e7.createBarbershop({owner_id:e.user.id,name:j.shopName,slug:j.shopName.toLowerCase().replace(/ /g,"-"),opening_hours:{start:"09:00",end:"19:00"},working_days:["Seg","Ter","Qua","Qui","Sex","Sab"]}),t({...l,email:j.email})}}catch(e){u(e.message||"Ocorreu um erro na autentica\xe7\xe3o.")}finally{x(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-brand-gray flex items-center justify-center p-4 sm:p-6 overflow-hidden",children:(0,a.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col lg:flex-row",children:[(0,a.jsxs)("div",{className:"hidden lg:block lg:w-1/2 relative h-96 bg-brand-dark",children:[(0,a.jsx)(r.default,{src:"/hero_barber.jpg",alt:"Barvo",fill:!0,className:"object-cover",priority:!0,sizes:"(max-width: 1024px) 0px, 50vw"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-brand-dark/50"}),(0,a.jsxs)("div",{className:"absolute top-6 left-6 z-10 flex items-center gap-2 text-white",children:[(0,a.jsx)(r.default,{src:"/logo-branco.png",alt:"Barvo",width:36,height:36,className:"object-contain"}),(0,a.jsx)("span",{className:"font-bold text-xl tracking-tight",children:"Barvo"})]}),(0,a.jsxs)("div",{className:"absolute bottom-8 left-8 z-10 text-white max-w-sm",children:[(0,a.jsx)("p",{className:"text-2xl font-extrabold leading-tight mb-4",children:'"Tudo que meu time e eu precisamos."'}),(0,a.jsx)("p",{className:"text-sm opacity-90",children:"Gerente de Barbearia"}),(0,a.jsx)("p",{className:"text-xs opacity-80",children:"Sistema completo de gest\xe3o"})]})]}),(0,a.jsx)("div",{className:"w-full lg:w-1/2 p-4 sm:p-6 lg:p-8 flex flex-col items-center justify-center min-h-screen lg:min-h-auto overflow-y-auto lg:overflow-y-visible",children:(0,a.jsxs)("div",{className:"w-full max-w-xs",children:[(0,a.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,a.jsxs)("div",{className:"flex lg:hidden items-center gap-2 mb-4",children:[(0,a.jsx)(r.default,{src:"/logo-preto.png",alt:"Barvo",width:32,height:32,className:"object-contain"}),(0,a.jsx)("span",{className:"font-bold text-lg text-brand-dark",children:"Barvo"})]}),(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-extrabold text-brand-dark mb-1",children:"Bem-vindo ao Barvo"}),(0,a.jsx)("p",{className:"text-[11px] sm:text-xs text-brand-midGray",children:"Gerencie sua barbearia com intelig\xeancia e efici\xeancia."})]}),(0,a.jsxs)("div",{className:"flex gap-5 mb-4 border-b border-brand-light",children:[(0,a.jsx)("button",{onClick:()=>{o("login"),u(null)},className:"pb-3 text-sm font-bold transition-colors ".concat("login"===d?"text-brand-accent border-b-2 border-brand-accent -mb-px":"text-brand-midGray hover:text-brand-dark"),children:"Entrar"}),(0,a.jsx)("button",{onClick:()=>{o("register"),u(null)},className:"pb-3 text-sm font-bold transition-colors ".concat("register"===d?"text-brand-accent border-b-2 border-brand-accent -mb-px":"text-brand-midGray hover:text-brand-dark"),children:"Cadastro"})]}),m&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2 text-red-600 text-xs font-medium",children:[(0,a.jsx)($.A,{size:16,className:"flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{children:m})]}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-3",children:["register"===d&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[11px] font-bold text-brand-dark uppercase tracking-wider mb-1.5 block",children:"Nome Completo"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-brand-midGray",size:18}),(0,a.jsx)("input",{required:!0,placeholder:"Jo\xe3o Silva",value:j.name,onChange:e=>v({...j,name:e.target.value}),className:"w-full pl-12 pr-4 py-2.5 bg-white border border-brand-light rounded-lg outline-none focus:ring-2 focus:ring-brand-accent focus:border-brand-accent font-medium text-xs transition-all placeholder:text-brand-midGray/50"})]})]}),"register"===d&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[11px] font-bold text-brand-dark uppercase tracking-wider mb-1.5 block",children:"Tipo de Conta"}),(0,a.jsxs)("select",{value:j.role,onChange:e=>v({...j,role:e.target.value}),className:"w-full px-4 py-2.5 bg-white border border-brand-light rounded-lg outline-none focus:ring-2 focus:ring-brand-accent focus:border-brand-accent font-medium text-xs appearance-none transition-all cursor-pointer text-brand-dark",children:[(0,a.jsx)("option",{value:i.CUSTOMER,children:"Cliente"}),(0,a.jsx)("option",{value:i.BARBER,children:"Barbeiro (Equipe)"}),(0,a.jsx)("option",{value:i.OWNER,children:"Dono (Criar Barbearia)"})]})]}),"register"===d&&j.role===i.OWNER&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[11px] font-bold text-brand-dark uppercase tracking-wider mb-1.5 block",children:"Nome da Barbearia"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-brand-midGray",size:18}),(0,a.jsx)("input",{required:!0,placeholder:"Minha Barbearia",value:j.shopName,onChange:e=>v({...j,shopName:e.target.value}),className:"w-full pl-12 pr-4 py-2.5 bg-white border border-brand-light rounded-lg outline-none focus:ring-2 focus:ring-brand-accent focus:border-brand-accent font-medium text-xs text-brand-dark transition-all placeholder:text-brand-midGray/50"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[11px] font-bold text-brand-dark uppercase tracking-wider mb-1.5 block",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(te.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-brand-midGray",size:18}),(0,a.jsx)("input",{required:!0,type:"email",placeholder:"seu@email.com",value:j.email,onChange:e=>{var t;v({...j,email:e.target.value}),f((t=e.target.value,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)))},className:"w-full pl-12 pr-12 py-2.5 bg-white border border-brand-light rounded-lg outline-none focus:ring-2 focus:ring-brand-accent focus:bg-white font-medium text-xs transition-all placeholder:text-brand-midGray/50"}),h&&(0,a.jsx)(eC.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",size:20,strokeWidth:3})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[11px] font-bold text-brand-dark uppercase tracking-wider mb-1.5 block",children:"Senha"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tt.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-brand-midGray",size:18}),(0,a.jsx)("input",{required:!0,type:b?"text":"password",placeholder:"••••••••",value:j.password,onChange:e=>v({...j,password:e.target.value}),className:"w-full pl-12 pr-12 py-2.5 bg-white border border-brand-light rounded-lg outline-none focus:ring-2 focus:ring-brand-accent focus:bg-white font-medium text-xs transition-all placeholder:text-brand-midGray/50"}),(0,a.jsx)("button",{type:"button",onClick:()=>p(!b),className:"absolute right-4 top-1/2 -translate-y-1/2 text-brand-midGray hover:text-brand-dark transition-colors",children:b?(0,a.jsx)(ts.A,{size:16}):(0,a.jsx)(ta.A,{size:16})})]})]}),(0,a.jsxs)("button",{disabled:c||"register"===d&&!h,type:"submit",className:"w-full bg-brand-accent hover:bg-blue-600 disabled:bg-brand-light text-white font-bold py-2.5 rounded-lg shadow-lg hover:shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2 text-sm disabled:cursor-not-allowed mt-1",children:[c?(0,a.jsx)(eS.A,{className:"animate-spin",size:18}):null,"login"===d?"Entrar":"Criar Conta"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 my-3",children:[(0,a.jsx)("div",{className:"flex-1 h-px bg-brand-light"}),(0,a.jsx)("span",{className:"text-[11px] text-brand-midGray font-medium",children:"OU"}),(0,a.jsx)("div",{className:"flex-1 h-px bg-brand-light"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2",children:(0,a.jsxs)("button",{className:"flex items-center justify-center gap-2 py-2 px-4 border-2 border-brand-light rounded-lg hover:border-brand-accent hover:bg-brand-gray transition-all font-medium text-xs text-brand-dark",children:[(0,a.jsx)(tl.A,{size:16}),(0,a.jsx)("span",{children:"Continuar com Google"})]})}),(0,a.jsx)("div",{className:"mt-3 text-center",children:(0,a.jsxs)("span",{className:"text-xs text-brand-midGray",children:["login"===d?"N\xe3o tem uma conta? ":"J\xe1 tem uma conta? ",(0,a.jsx)("button",{onClick:()=>{o("login"===d?"register":"login"),u(null)},className:"font-bold text-brand-accent hover:text-blue-600 transition-colors",children:"login"===d?"Cadastre-se":"Entre"})]})}),(0,a.jsx)("button",{onClick:s,className:"mt-3 w-full py-2 border-2 border-dashed border-brand-light text-brand-midGray font-bold rounded-lg hover:border-brand-accent hover:text-brand-accent transition-all text-xs",children:"Continuar como Convidado"}),(0,a.jsxs)("div",{className:"text-center text-[10px] text-brand-midGray space-y-0.5 mt-3",children:[(0,a.jsx)("p",{children:"Ao fazer login, voc\xea concorda com nossos"}),(0,a.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,a.jsx)("a",{href:"#",className:"hover:text-brand-accent transition-colors",children:"Termos de Servi\xe7o"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("a",{href:"#",className:"hover:text-brand-accent transition-colors",children:"Pol\xedtica de Privacidade"})]})]})]})})]})})};var ti=s(37586),tn=s(78192),td=s(18085);let to=async(e,t)=>{try{var s,a;await new Promise(e=>setTimeout(e,800));let l=(null==(a=e[e.length-1])||null==(s=a.text)?void 0:s.toLowerCase())||"";if((null==t?void 0:t.role)===i.OWNER){if(l.includes("faturamento")||l.includes("receita")||l.includes("lucro"))return"Analisando seus dados: o faturamento mensal esta em R$ 15.450, com ticket medio de R$ 66. Recomendo focar em upsell de combos para aumentar o ticket medio em pelo menos 15%.";if(l.includes("equipe")||l.includes("barbeiro"))return"Sua equipe tem 2 barbeiros ativos. Para otimizar a agenda, considere definir horarios de pico e distribuir os agendamentos de forma equilibrada.";return"Como consultor de negocios da Barvo, posso ajudar com analise de faturamento, gestao de equipe, estrategias de crescimento e otimizacao de servicos. O que gostaria de explorar?"}if((null==t?void 0:t.role)===i.BARBER){if(l.includes("venda")||l.includes("produto"))return"Dica de venda: apos o corte, mostre o resultado usando a pomada matte. Clientes que experimentam tem 3x mais chance de comprar. Ofereca com naturalidade!";return"Estou aqui para ajudar com tecnicas de atendimento, dicas de venda e fidelizacao de clientes. Manda sua duvida!"}if(l.includes("horario")||l.includes("agendar")||l.includes("marcar"))return"Voce pode agendar diretamente pela aba 'Reservar' no menu. Temos horarios disponiveis todos os dias uteis das 09:00 as 20:00!";if(l.includes("preco")||l.includes("valor")||l.includes("quanto"))return"Nossos precos: Corte R$ 50, Barba R$ 40, Combo (Corte + Barba) R$ 80 e Pezinho R$ 20. Confira todos os servicos na aba Reservar!";return"Ola! Sou o assistente da Barvo. Posso ajudar com informacoes sobre servicos, precos e agendamentos. Como posso te ajudar?"}catch(e){return console.error("Chat Service Error:",e),"Estou com dificuldades no momento. Tente novamente em instantes."}},tc=e=>{let{currentUser:t}=e,[s,r]=(0,l.useState)(!1),[d,o]=(0,l.useState)([]),[c,x]=(0,l.useState)(""),[m,u]=(0,l.useState)(!1),b=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e="Fala, parceiro! \uD83D\uDC4A Sou o assistente da Barvo. Como posso te ajudar hoje? \uD83D\uDC88\uD83D\uDD25";(null==t?void 0:t.role)===i.OWNER?e="Ol\xe1, Comandante ".concat(t.name.split(" ")[0],"! \uD83D\uDCC8 Estou pronto para te ajudar com insights de gest\xe3o, an\xe1lise de lucros e estrat\xe9gias para a Barvo crescer. O que vamos analisar hoje?"):(null==t?void 0:t.role)===i.BARBER&&(e="E a\xed, fera! ✂️ Bora turbinar sua agenda? Posso criar legendas pro seu Insta, te ajudar a vender mais produtos ou sugerir como abordar aquele cliente dif\xedcil. Manda a braba!"),o(t=>0===t.length?[{role:"assistant",text:e}]:t)},[t]),(0,l.useEffect)(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},[d,s]);let p=async()=>{if(!c.trim()||m)return;x("");let e=[...d,{role:"user",text:c}];o(e),u(!0);try{let s=await to(e,t);o(e=>[...e,{role:"assistant",text:s}])}catch(e){o(e=>[...e,{role:"assistant",text:"Desculpe, tive um problema de conex\xe3o. Tente novamente."}])}finally{u(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>r(!s),className:"fixed bottom-6 right-6 p-4 rounded-full shadow-lg z-50 transition-all transform hover:scale-110 flex items-center justify-center ".concat(s?"bg-red-500 rotate-90":"bg-brand-dark hover:bg-brand-dark/90"),children:s?(0,a.jsx)(C.A,{color:"white"}):(0,a.jsx)(ti.A,{color:"white"})}),s&&(0,a.jsxs)("div",{className:"fixed bottom-24 right-6 w-80 md:w-96 bg-white rounded-2xl shadow-2xl border border-slate-200 z-50 flex flex-col overflow-hidden animate-fade-in h-[500px]",children:[(0,a.jsxs)("div",{className:"bg-brand-dark p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-brand-light rounded-full",children:(0,a.jsx)(tn.A,{size:20,className:"text-brand-dark"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-bold",children:(null==t?void 0:t.role)===i.OWNER?"Barvo Business AI":(null==t?void 0:t.role)===i.BARBER?"Barvo Sales Mentor":"Suporte Barvo"}),(0,a.jsxs)("p",{className:"text-brand-gray/50 text-xs flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full block"}),"Intelig\xeancia Artificial Ativa"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",ref:b,children:[d.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 ".concat("user"===e.role?"flex-row-reverse":""),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat("user"===e.role?"bg-brand-light/30 text-brand-dark":"bg-brand-gray/10 text-brand-midGray"),children:"user"===e.role?(0,a.jsx)(n.A,{size:14}):(0,a.jsx)(tn.A,{size:14})}),(0,a.jsx)("div",{className:"p-3 rounded-2xl text-sm max-w-[80%] ".concat("user"===e.role?"bg-brand-dark text-white rounded-tr-none":"bg-white text-slate-700 shadow-sm border border-slate-100 rounded-tl-none"),children:e.text})]},t)),m&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-brand-gray/10 flex items-center justify-center text-brand-midGray",children:(0,a.jsx)(tn.A,{size:14})}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded-2xl rounded-tl-none border border-slate-100 shadow-sm flex gap-1 items-center",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),(0,a.jsx)("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-75"}),(0,a.jsx)("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-150"})]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-white border-t border-slate-100 flex gap-2",children:[(0,a.jsx)("input",{type:"text",className:"flex-1 bg-slate-100 border-none rounded-full px-4 text-sm focus:ring-2 focus:ring-brand-light outline-none",placeholder:"Pergunte qualquer coisa...",value:c,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&p()}}),(0,a.jsx)("button",{onClick:p,disabled:!c.trim()||m,className:"p-3 bg-brand-dark rounded-full text-white hover:bg-brand-dark/90 disabled:opacity-50 transition-colors",children:(0,a.jsx)(td.A,{size:18})})]})]})]})};var tx=s(95740),tm=s(38392),tu=s(68854);let tb=e=>{let{currentUser:t,appointments:s,commissionRate:r,onCompleteAppointment:i,onNoShow:n,services:d,exceptions:o,onBlockTime:x}=e,[m,u]=(0,l.useState)(!1),b=new Date().toISOString().split("T")[0],p=s.filter(e=>e.barberId===t.id).filter(e=>new Date(e.startTime).toISOString().split("T")[0]===b&&"CANCELLED"!==e.status).sort((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()),h=p.filter(e=>"COMPLETED"===e.status).reduce((e,t)=>{if("CANCELLED"===t.status)return e;let s=d.find(e=>e.id===t.serviceId);return e+((null==s?void 0:s.price)||0)*(r/100)},0);return(0,a.jsxs)("div",{className:"space-y-6 pb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-3 border-b border-slate-100 pb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,a.jsxs)("h2",{className:"text-xl md:text-2xl font-black text-brand-black tracking-tight",children:["Ol\xe1, ",t.name.split(" ")[0],"!"]}),(0,a.jsxs)("div",{className:"bg-amber-100 text-amber-700 px-2 py-0.5 rounded-md text-[9px] font-black uppercase tracking-widest flex items-center gap-1",children:[(0,a.jsx)(tx.A,{size:10})," Pro"]})]}),(0,a.jsx)("p",{className:"text-brand-midGray text-xs font-medium",children:"Bora dar aquele talento nos clientes de hoje? ✂️"})]}),(0,a.jsxs)("button",{onClick:()=>u(!m),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-bold text-xs transition-all active:scale-95 ".concat(m?"bg-brand-dark text-white":"bg-white text-slate-700 border border-slate-200"),children:[(0,a.jsx)(tm.A,{size:16})," ",m?"Ver Agenda":"Bloquear Hor\xe1rio"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-brand-dark p-5 rounded-2xl shadow-md relative overflow-hidden",children:[(0,a.jsx)("p",{className:"text-brand-light/60 text-[9px] font-bold uppercase tracking-widest mb-1",children:"Comiss\xe3o Hoje"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1 text-white",children:[(0,a.jsx)("span",{className:"font-bold text-sm opacity-40",children:"R$"}),(0,a.jsx)("h3",{className:"text-2xl md:text-3xl font-black tracking-tighter",children:h.toFixed(2)})]})]}),(0,a.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm",children:[(0,a.jsx)("p",{className:"text-slate-400 text-[9px] font-bold uppercase tracking-widest mb-1",children:"Cortes Hoje"}),(0,a.jsx)("h3",{className:"text-xl md:text-2xl font-black text-brand-black tracking-tighter",children:p.length})]}),(0,a.jsxs)("div",{className:"hidden md:block bg-white p-5 rounded-2xl border border-slate-100 shadow-sm",children:[(0,a.jsx)("p",{className:"text-slate-400 text-[9px] font-bold uppercase tracking-widest mb-1",children:"Meta Batida"}),(0,a.jsx)("div",{className:"h-1.5 w-full bg-slate-100 rounded-full mt-2",children:(0,a.jsx)("div",{className:"h-full bg-emerald-500 rounded-full w-[65%]"})})]})]}),m?(0,a.jsxs)("div",{className:"bg-white p-5 md:p-6 rounded-2xl border border-slate-100 shadow-sm animate-fade-in",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-brand-black uppercase tracking-wider mb-4 flex items-center gap-2",children:[(0,a.jsx)(tm.A,{size:18,className:"text-red-500"})," Bloquear Hor\xe1rios"]}),(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"].map(e=>{let s=o.some(s=>s.barberId===t.id&&s.startTime===e&&s.date===b);return(0,a.jsx)("button",{disabled:s,onClick:()=>x(t.id,b,e),className:"p-3 border rounded-lg font-bold text-xs active:scale-95 transition-all ".concat(s?"bg-red-50 text-red-200 border-red-50 cursor-not-allowed":"bg-slate-50 text-slate-600 border-transparent hover:border-brand-dark"),children:e},e)})})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-brand-black uppercase tracking-wider flex items-center gap-2 px-1",children:[(0,a.jsx)(c.A,{size:18,className:"text-brand-dark"})," Pr\xf3ximos Atendimentos"]}),(0,a.jsx)("div",{className:"grid gap-3",children:p.length>0?p.map(e=>{let t=d.find(t=>t.id===e.serviceId),s="COMPLETED"===e.status,l=new Date(e.startTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return(0,a.jsx)("div",{className:"bg-white p-3 md:p-4 rounded-xl border transition-all ".concat(s?"opacity-50 grayscale bg-slate-50":"hover:shadow-md border-slate-100"),children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,a.jsxs)("div",{className:"w-12 h-12 rounded-lg flex flex-col items-center justify-center font-bold text-sm shadow-inner ".concat(s?"bg-slate-200 text-slate-400":"bg-brand-dark text-brand-light"),children:[(0,a.jsx)("span",{className:"text-[7px] uppercase opacity-50 tracking-tighter",children:"Hora"}),l]}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-bold text-brand-black text-sm md:text-base tracking-tight",children:e.customerName}),e.customerId.startsWith("c")&&(0,a.jsx)(tu.A,{size:12,className:"text-amber-500 fill-amber-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:[(0,a.jsx)("span",{children:null==t?void 0:t.name}),(0,a.jsx)("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),(0,a.jsxs)("span",{children:[null==t?void 0:t.durationMinutes," min"]})]})]})]}),(0,a.jsx)("div",{className:"w-full md:w-auto flex gap-2",children:s?(0,a.jsxs)("div",{className:"flex-1 md:flex-none flex items-center justify-center gap-1.5 text-emerald-600 font-bold bg-emerald-50 px-3 py-2 rounded-lg text-[10px] uppercase border border-emerald-100",children:[(0,a.jsx)(ea.A,{size:14})," Feito"]}):(0,a.jsx)("button",{onClick:()=>i(e.id),className:"flex-1 md:flex-none bg-brand-dark text-white px-5 py-2 rounded-lg font-bold text-[10px] uppercase tracking-widest active:scale-95 transition-all shadow-md",children:"Concluir"})})]})},e.id)}):(0,a.jsx)("div",{className:"text-center py-10 bg-white rounded-2xl border border-dashed border-slate-200",children:(0,a.jsx)("p",{className:"text-slate-400 text-sm font-medium",children:"Sem agendamentos para agora."})})})]})]})};var tp=s(39347),th=s(25563);let tg=e=>{var t;let{currentUser:s,appointments:l,onNavigate:r,membershipPlans:i}=e,n=s.points||0,d=[{id:"r1",name:"50% de Desconto na Barba",pts:150,icon:(0,a.jsx)(tp.A,{className:"text-amber-500"})},{id:"r2",name:"Pomada Barvo Matte",pts:200,icon:(0,a.jsx)(w.A,{className:"text-blue-500"})},{id:"r3",name:"Corte de Cabelo Gr\xe1tis",pts:350,icon:(0,a.jsx)(V.A,{className:"text-emerald-500"})}],o=d.find(e=>e.pts>n)||d[d.length-1],x=Math.min(n/o.pts*100,100),m=l.filter(e=>e.customerId===s.id&&"CONFIRMED"===e.status&&new Date(e.startTime)>new Date).sort((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime())[0],u=n/er.DISCOUNT_CONVERSION_RATE;return(0,a.jsxs)("div",{className:"space-y-8 animate-fade-in pb-10",children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-brand-dark tracking-tight",children:["Ol\xe1, ",s.name.split(" ")[0],"! \uD83D\uDC4B"]}),(0,a.jsx)("p",{className:"text-brand-midGray mt-1 font-medium",children:"Bem-vindo de volta \xe0 sua barbearia favorita."})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"bg-brand-dark text-white p-8 rounded-[2.5rem] shadow-2xl relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-light/10 rounded-full blur-[80px] -mr-20 -mt-20 transition-transform group-hover:scale-110"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-brand-light/60 text-xs font-bold uppercase tracking-widest mb-2",children:"Seu Saldo Fidelidade"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("h3",{className:"text-6xl font-black tracking-tighter",children:n}),(0,a.jsx)("span",{className:"text-xl font-bold text-brand-light",children:"pts"})]})]}),(0,a.jsx)("div",{className:"bg-white/10 p-4 rounded-3xl backdrop-blur-md border border-white/10",children:(0,a.jsx)(eD.A,{size:32,className:"text-brand-light"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-end text-sm",children:[(0,a.jsxs)("span",{className:"font-bold text-brand-light/80",children:["Progresso para: ",(0,a.jsx)("span",{className:"text-white",children:o.name})]}),(0,a.jsxs)("span",{className:"font-black",children:[n,"/",o.pts]})]}),(0,a.jsx)("div",{className:"h-4 bg-white/10 rounded-full p-1 border border-white/5",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-brand-light to-white rounded-full transition-all duration-1000 ease-out shadow-[0_0_15px_rgba(184,208,217,0.5)]",style:{width:"".concat(x,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-2",children:[(0,a.jsxs)("h4",{className:"text-xl font-bold text-brand-dark flex items-center gap-2",children:[(0,a.jsx)(tu.A,{size:22,className:"text-amber-500 fill-amber-500"})," Barvo Club"]}),(0,a.jsx)("span",{className:"text-[10px] font-black bg-amber-100 text-amber-700 px-3 py-1 rounded-full uppercase tracking-widest",children:"Premium"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(e=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm hover:shadow-md transition-all relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-brand-light/10 rounded-full blur-2xl -mr-8 -mt-8"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("h5",{className:"font-black text-brand-dark text-lg leading-tight mb-1",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-slate-400 font-bold mb-4 uppercase",children:0===e.servicesPerMonth?"Ilimitado":"".concat(e.servicesPerMonth,"x servi\xe7os /m\xeas")}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1 mb-6",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-slate-400",children:"R$"}),(0,a.jsx)("span",{className:"text-3xl font-black text-brand-dark",children:e.price.toFixed(2)})]}),(0,a.jsx)("button",{className:"w-full py-3 bg-brand-dark text-white rounded-xl text-xs font-bold hover:bg-black transition-all",children:"Assinar Clube"})]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm",children:[(0,a.jsxs)("h4",{className:"font-bold text-brand-dark mb-4 flex items-center gap-2",children:[(0,a.jsx)(c.A,{size:18,className:"text-blue-500"})," Pr\xf3ximo Corte"]}),m?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(p.A,{size:20,className:"text-slate-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-brand-dark text-sm leading-tight",children:null==(t=ec.find(e=>e.id===m.serviceId))?void 0:t.name}),(0,a.jsxs)("p",{className:"text-xs text-brand-midGray font-medium mt-1",children:[new Date(m.startTime).toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long"})," \xe0s ",new Date(m.startTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,a.jsx)("button",{onClick:()=>r("appointments"),className:"w-full py-3 bg-slate-100 text-slate-600 rounded-2xl text-xs font-bold hover:bg-slate-200 transition-all",children:"Ver detalhes"})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Voc\xea n\xe3o tem agendamentos futuros."}),(0,a.jsx)("button",{onClick:()=>r("booking"),className:"w-full py-3 bg-brand-dark text-white rounded-2xl text-xs font-bold hover:bg-black transition-all shadow-lg shadow-brand-dark/20",children:"Agendar Agora"})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-700 p-6 rounded-[2rem] text-white shadow-xl relative overflow-hidden",children:[(0,a.jsx)(th.A,{size:80,className:"absolute -bottom-6 -right-6 text-white/10 transform -rotate-12"}),(0,a.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-80 mb-1",children:"Desconto Acumulado"}),(0,a.jsxs)("h4",{className:"text-3xl font-black mb-4",children:["R$ ",u.toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs font-medium leading-relaxed opacity-90 mb-6",children:"Voc\xea pode usar esse valor como desconto em qualquer servi\xe7o ou produto da nossa loja."}),(0,a.jsxs)("button",{onClick:()=>r("shop"),className:"w-full py-3 bg-white text-emerald-700 rounded-2xl text-xs font-bold hover:bg-emerald-50 transition-all flex items-center justify-center gap-2",children:["Ir para a Loja ",(0,a.jsx)(w.A,{size:14})]})]})]})]})]})};var tf=s(34747),tj=s(89715),tv=s(89559),tN=s(71360),tw=s(9582),ty=s(41016);let tk=e=>{let{currentUser:t,appointments:s,onRebook:r,onCancel:i,onNavigate:n,services:o}=e,[m,u]=(0,l.useState)("upcoming"),[b,h]=(0,l.useState)(null),[g,f]=(0,l.useState)(null),[j,v]=(0,l.useState)(null),[N,w]=(0,l.useState)(null),[y,k]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=()=>k(null);return y&&document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[y]);let A=new Date,C=s.filter(e=>e.customerId===t.id),S=C.filter(e=>new Date(e.startTime)>A&&"CANCELLED"!==e.status&&"COMPLETED"!==e.status).sort((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()),I=C.filter(e=>new Date(e.startTime)<=A||"COMPLETED"===e.status||"CANCELLED"===e.status).sort((e,t)=>new Date(t.startTime).getTime()-new Date(e.startTime).getTime()),E=(e,t)=>"CANCELLED"===e.status?{label:"Cancelado",classes:"bg-red-100 text-red-700"}:"COMPLETED"===e.status?{label:"Conclu\xeddo",classes:"bg-emerald-100 text-emerald-700"}:t?{label:"Ausente / Pendente",classes:"bg-amber-100 text-amber-700"}:{label:"Confirmado",classes:"bg-blue-100 text-blue-700"},R=(e,t)=>{let s=o.find(t=>t.id===e.serviceId),l=eo.find(t=>t.id===e.barberId),i=new Date(e.startTime);i.toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"});let n=i.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),c=E(e,t);return(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm p-6 flex flex-col md:flex-row items-center gap-6 transition-all hover:shadow-md group relative",children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 rounded-l-2xl ".concat("CANCELLED"===e.status?"bg-red-400":"COMPLETED"===e.status?"bg-emerald-400":"bg-blue-400")}),(0,a.jsxs)("div",{className:"absolute top-4 right-4 z-20",children:[(0,a.jsx)("button",{onClick:t=>((e,t)=>{e.stopPropagation(),k(y===t?null:t)})(t,e.id),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:(0,a.jsx)(tf.A,{size:20})}),y===e.id&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden animate-fade-in origin-top-right",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>v(e),className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,a.jsx)(tj.A,{size:16,className:"text-slate-400"})," Ver Detalhes"]}),t?(0,a.jsxs)("button",{onClick:()=>r(e),className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,a.jsx)(tv.A,{size:16,className:"text-blue-500"})," Agendar Novamente"]}):(0,a.jsxs)("button",{onClick:()=>f(e),className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,a.jsx)(Z.A,{size:16,className:"text-blue-500"})," Remarcar"]}),!t&&"CANCELLED"!==e.status&&(0,a.jsxs)("button",{onClick:()=>h(e.id),className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 border-t border-slate-50",children:[(0,a.jsx)(tN.A,{size:16})," Cancelar"]})]})})]}),(0,a.jsxs)("div",{className:"\n                flex-shrink-0 w-full md:w-24 h-24 rounded-2xl flex flex-col items-center justify-center border transition-colors\n                ".concat(t?"bg-slate-50 border-slate-200 text-slate-400":"bg-blue-50 border-blue-100 text-blue-600 group-hover:bg-blue-100","\n            "),children:[(0,a.jsx)("span",{className:"text-2xl font-bold",children:i.getDate()}),(0,a.jsx)("span",{className:"text-xs uppercase font-bold",children:i.toLocaleDateString("pt-BR",{month:"short"})}),(0,a.jsx)("span",{className:"text-sm mt-1",children:n})]}),(0,a.jsxs)("div",{className:"flex-1 w-full text-center md:text-left",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:null==s?void 0:s.name}),(0,a.jsx)("span",{className:"text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide ".concat(c.classes),children:c.label})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center md:justify-start gap-2 md:gap-6 text-sm text-slate-500 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-slate-50 px-3 py-1 rounded-full border border-slate-100",children:[(0,a.jsx)(d,{url:null==l?void 0:l.avatar,name:null==l?void 0:l.name,size:"sm",className:"-m-2 w-5 h-5 rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:null==l?void 0:l.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{size:14})," ",(0,a.jsxs)("span",{children:[null==s?void 0:s.durationMinutes," min"]})]})]}),t?(0,a.jsx)("div",{className:"flex gap-3 justify-center md:justify-start",children:(0,a.jsxs)("button",{onClick:()=>r(e),className:"px-4 py-2 text-sm font-bold text-blue-600 bg-blue-50 border border-blue-100 rounded-lg hover:bg-blue-100 transition-colors flex items-center gap-2",children:[(0,a.jsx)(tv.A,{size:16})," Agendar Novamente"]})}):(0,a.jsx)("div",{className:"flex gap-3 justify-center md:justify-start",children:(0,a.jsxs)("button",{onClick:()=>f(e),className:"px-4 py-2 text-sm font-bold text-white bg-slate-900 rounded-lg hover:bg-slate-800 transition-colors flex items-center gap-2 shadow-lg shadow-slate-900/10",children:[(0,a.jsx)(Z.A,{size:16})," Remarcar"]})})]}),(0,a.jsxs)("div",{className:"text-right hidden md:block mr-8",children:[(0,a.jsxs)("p",{className:"text-xl font-bold text-slate-900",children:["R$ ",Number((null==s?void 0:s.price)||0).toFixed(2)]}),t&&"COMPLETED"===e.status&&(0,a.jsx)("div",{className:"text-xs text-emerald-600 font-bold mt-1 bg-emerald-50 px-2 py-1 rounded-full inline-block",children:"+10 pts"})]})]},e.id)};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in pb-10 relative",children:[N&&(0,a.jsxs)("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-xl shadow-2xl z-50 flex items-center gap-2 animate-fade-in",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(eC.A,{size:12,strokeWidth:4})}),N]}),b&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 transform scale-100",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-4 mx-auto",children:(0,a.jsx)(tw.A,{size:24})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-800 text-center mb-2",children:"Cancelar Agendamento?"}),(0,a.jsx)("p",{className:"text-slate-500 text-center text-sm mb-6",children:"Tem certeza? O hor\xe1rio ser\xe1 liberado para outros clientes. Essa a\xe7\xe3o n\xe3o pode ser desfeita."}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>h(null),className:"flex-1 py-3 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"N\xe3o, Voltar"}),(0,a.jsx)("button",{onClick:()=>{b&&(i(b),h(null),w("Agendamento cancelado com sucesso."),setTimeout(()=>w(null),3e3))},className:"flex-1 py-3 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition-colors shadow-lg shadow-red-500/20",children:"Sim, Cancelar"})]})]})}),g&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 transform scale-100",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mb-4 mx-auto",children:(0,a.jsx)(Z.A,{size:24})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-800 text-center mb-2",children:"Remarcar Hor\xe1rio"}),(0,a.jsxs)("p",{className:"text-slate-500 text-center text-sm mb-6",children:["Para mudar o hor\xe1rio, precisamos ",(0,a.jsx)("b",{children:"cancelar o agendamento atual"})," e iniciar um novo. Deseja continuar?"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>f(null),className:"flex-1 py-3 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Voltar"}),(0,a.jsx)("button",{onClick:()=>{g&&(i(g.id),r(g),f(null))},className:"flex-1 py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 transition-colors shadow-lg",children:"Continuar"})]})]})}),j&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-sm w-full overflow-hidden transform scale-100",children:[(0,a.jsxs)("div",{className:"bg-slate-900 p-6 text-white relative",children:[(0,a.jsx)("button",{onClick:()=>v(null),className:"absolute top-4 right-4 p-1 hover:bg-white/10 rounded-full transition-colors",children:(0,a.jsx)(ty.A,{size:24})}),(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Detalhes do Agendamento"}),(0,a.jsxs)("p",{className:"text-slate-400 text-sm opacity-80",children:["ID: #",j.id.toUpperCase()]})]}),(0,a.jsx)("div",{className:"p-6 space-y-6",children:(()=>{let e=o.find(e=>e.id===j.serviceId),t=eo.find(e=>e.id===j.barberId),s=new Date(j.startTime),l=E(j,!0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(p.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Servi\xe7o"}),(0,a.jsx)("p",{className:"font-bold text-slate-800 text-lg",children:null==e?void 0:e.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(d,{url:null==t?void 0:t.avatar,name:null==t?void 0:t.name,size:"md"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Profissional"}),(0,a.jsx)("p",{className:"font-bold text-slate-800 text-lg",children:null==t?void 0:t.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-amber-50 text-amber-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(c.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Data e Hora"}),(0,a.jsxs)("p",{className:"font-bold text-slate-800 text-lg",children:[s.toLocaleDateString("pt-BR")," \xe0s ",s.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl flex justify-between items-center border border-slate-100",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),(0,a.jsx)("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase ".concat(l.classes),children:l.label})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-slate-100 flex justify-between items-center",children:[(0,a.jsx)("p",{className:"font-bold text-slate-500",children:"Total"}),(0,a.jsxs)("p",{className:"font-bold text-2xl text-slate-900",children:["R$ ",Number((null==e?void 0:e.price)||0).toFixed(2)]})]}),(0,a.jsxs)("button",{onClick:()=>{v(null),r(j)},className:"w-full py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(tv.A,{size:18})," Agendar Novamente"]})]})})()})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Meus Agendamentos"}),(0,a.jsx)("p",{className:"text-slate-500 mt-1",children:"Gerencie suas visitas futuras e veja seu hist\xf3rico."})]}),(0,a.jsxs)("button",{onClick:()=>n("booking"),className:"hidden md:flex bg-slate-900 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-slate-800 transition-colors items-center gap-2 shadow-lg hover:-translate-y-1",children:[(0,a.jsx)(K.A,{size:18})," Novo Agendamento"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 border-b border-slate-200",children:[(0,a.jsxs)("button",{onClick:()=>u("upcoming"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("upcoming"===m?"text-blue-600":"text-slate-500 hover:text-slate-700"),children:["Pr\xf3ximos (",S.length,")","upcoming"===m&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),(0,a.jsxs)("button",{onClick:()=>u("history"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("history"===m?"text-blue-600":"text-slate-500 hover:text-slate-700"),children:["Hist\xf3rico (",I.length,")","history"===m&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]})]}),(0,a.jsx)("div",{className:"space-y-4 min-h-[400px]",children:"upcoming"===m?S.length>0?S.map(e=>R(e,!1)):(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-slate-200",children:[(0,a.jsx)(c.A,{size:48,className:"mx-auto text-slate-300 mb-4"}),(0,a.jsx)("p",{className:"text-slate-500 font-medium mb-4",children:"Voc\xea n\xe3o tem agendamentos futuros."}),(0,a.jsxs)("button",{onClick:()=>n("booking"),className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-slate-800 transition-colors inline-flex items-center gap-2 shadow-lg hover:-translate-y-1",children:[(0,a.jsx)(K.A,{size:18})," Agendar Agora"]})]}):I.length>0?I.map(e=>R(e,!0)):(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-slate-200",children:[(0,a.jsx)(x.A,{size:48,className:"mx-auto text-slate-300 mb-4"}),(0,a.jsx)("p",{className:"text-slate-500 font-medium",children:"Seu hist\xf3rico est\xe1 vazio."})]})})]})};var tA=s(86651),tC=s(24326);let tS=e=>{let{services:t,onUpdateServices:s}=e,[r,i]=(0,l.useState)(!1),[n,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(""),[m,b]=(0,l.useState)({name:"",durationMinutes:30,price:0,cost:0,margin:0,description:""}),p=(e,t)=>{let s={...m,[e]:t};("price"===e||"cost"===e)&&(s.margin=((e,t)=>e&&0!==e?Math.round((e-t)/e*100):0)(Number(s.price),Number(s.cost))),b(s)},h=()=>{i(!1),d(null),b({name:"",durationMinutes:30,price:0,cost:0,margin:0,description:""})},g=t.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())),f=e=>e<30?{text:"text-red-600",bg:"bg-red-50",border:"border-red-200"}:e<=50?{text:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200"}:{text:"text-emerald-600",bg:"bg-emerald-50",border:"border-emerald-200"};return(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in pb-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-brand-dark tracking-tight",children:"Servi\xe7os"}),(0,a.jsx)("p",{className:"text-brand-midGray mt-1 font-medium",children:"Configure seu cat\xe1logo e margens de lucro."})]}),(0,a.jsxs)("button",{onClick:()=>i(!0),className:"bg-brand-dark text-white px-5 py-2.5 rounded-xl font-bold hover:bg-black transition-all shadow-lg flex items-center gap-2",children:[(0,a.jsx)(K.A,{size:18})," Novo Servi\xe7o"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] border border-slate-100 shadow-sm overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-100 flex items-center gap-2",children:[(0,a.jsx)(tA.A,{size:18,className:"text-slate-400 ml-2"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar servi\xe7o...",className:"flex-1 border-none focus:ring-0 text-sm outline-none",value:o,onChange:e=>c(e.target.value)})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500 text-[10px] font-bold uppercase tracking-widest",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Nome / Descri\xe7\xe3o"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Dura\xe7\xe3o"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Pre\xe7o (R$)"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Margem"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"A\xe7\xf5es"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:g.map(e=>{let l=f(e.margin);return(0,a.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors group",children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("p",{className:"font-bold text-brand-dark text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-slate-400 line-clamp-1",children:e.description})]}),(0,a.jsx)("td",{className:"px-6 py-4 text-slate-500 text-sm",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{size:14})," ",e.durationMinutes," min"]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsxs)("p",{className:"font-bold text-brand-dark",children:["R$ ",Number(e.price).toFixed(2)]}),(0,a.jsxs)("p",{className:"text-[10px] text-slate-400",children:["Custo: R$ ",Number(e.cost).toFixed(2)]})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"px-2 py-1 rounded-lg text-xs font-bold ".concat(l.bg," ").concat(l.text),children:[e.margin,"%"]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>(e=>{d(e.id),b(e),i(!0)})(e),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,a.jsx)(tC.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>{var a;return a=e.id,void(window.confirm("Excluir este servi\xe7o? Isso afetar\xe1 novos agendamentos.")&&s(t.filter(e=>e.id!==a)))},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:(0,a.jsx)(tN.A,{size:16})})]})})]},e.id)})})]})})]}),r&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-brand-dark/60 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden border border-slate-100",children:[(0,a.jsxs)("div",{className:"p-8 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[(0,a.jsx)("h3",{className:"text-2xl font-black text-brand-dark tracking-tighter",children:n?"Editar Servi\xe7o":"Novo Servi\xe7o"}),(0,a.jsx)("button",{onClick:h,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:(0,a.jsx)(C.A,{})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a={...m,price:Number(m.price||0),cost:Number(m.cost||0),durationMinutes:Number(m.durationMinutes||0),margin:Number(m.margin||0)};n?s(t.map(e=>e.id===n?{...e,...a}:e)):s([...t,{...a,id:"s_".concat(Date.now())}]),h()},className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Nome do Servi\xe7o"}),(0,a.jsx)("input",{required:!0,type:"text",className:"w-full px-5 py-3.5 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:border-brand-dark font-bold text-lg",value:m.name,onChange:e=>p("name",e.target.value)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Pre\xe7o Venda (R$)"}),(0,a.jsx)("input",{required:!0,type:"number",step:"0.01",className:"w-full px-5 py-3.5 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:border-brand-dark font-bold",value:m.price,onChange:e=>p("price",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Custo Insumo (R$)"}),(0,a.jsx)("input",{required:!0,type:"number",step:"0.01",className:"w-full px-5 py-3.5 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:border-brand-dark font-bold",value:m.cost,onChange:e=>p("cost",e.target.value)})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-2xl border transition-all flex justify-between items-center ".concat(void 0!==m.margin&&m.margin<30?"bg-red-50 border-red-200":"bg-brand-light/10 border-brand-light/20"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-brand-dark",children:[(0,a.jsx)(u.A,{size:18}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase",children:"Margem Calculada"}),void 0!==m.margin&&m.margin<30&&(0,a.jsx)("span",{className:"text-[9px] font-bold text-red-600 uppercase",children:"Rentabilidade Baixa"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[void 0!==m.margin&&m.margin<30&&(0,a.jsx)($.A,{size:20,className:"text-red-600 animate-pulse"}),(0,a.jsxs)("span",{className:"text-xl font-black ".concat(void 0!==m.margin?f(m.margin).text:""),children:[m.margin,"%"]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Dura\xe7\xe3o (Min)"}),(0,a.jsx)("input",{required:!0,type:"number",className:"w-full px-5 py-3.5 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:border-brand-dark font-bold",value:m.durationMinutes,onChange:e=>p("durationMinutes",e.target.value)})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Descri\xe7\xe3o Curta"}),(0,a.jsx)("textarea",{rows:2,className:"w-full px-5 py-3.5 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:border-brand-dark font-medium text-sm resize-none",value:m.description,onChange:e=>p("description",e.target.value)})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-4 bg-brand-dark text-white font-bold rounded-2xl shadow-xl hover:bg-black transition-all",children:n?"Salvar Altera\xe7\xf5es":"Criar Servi\xe7o"})]})]})})]})};var tI=s(25718),tE=s(92927),tR=s(39867),tz=s(78765),tD=s(12235);let tP=e=>{let{transactions:t}=e,[s,r]=(0,l.useState)("report"),[i,n]=(0,l.useState)(!1),[d,o]=(0,l.useState)(t.slice(0,10)),c=(0,l.useMemo)(()=>{let e={CREDIT_CARD:{count:0,total:0},DEBIT_CARD:{count:0,total:0},PIX:{count:0,total:0},PRESENTIAL:{count:0,total:0}};return t.forEach(t=>{e[t.paymentMethod]&&(e[t.paymentMethod].count+=1,e[t.paymentMethod].total+=t.amount)}),e},[t]),x=[{name:"Cr\xe9dito",value:c.CREDIT_CARD.total,color:"#081E26"},{name:"D\xe9bito",value:c.DEBIT_CARD.total,color:"#3B82F6"},{name:"Pix",value:c.PIX.total,color:"#10B981"},{name:"Presencial",value:c.PRESENTIAL.total,color:"#F59E0B"}].filter(e=>e.value>0),m=()=>{let e=encodeURI("data:text/csv;charset=utf-8,ID,Data,Descricao,Tipo,Metodo,Valor,Barbeiro\n"+t.map(e=>[e.id,e.date,e.description,e.type,e.paymentMethod,e.amount.toString(),e.barberId||"-"]).map(e=>e.join(",")).join("\n")),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download","financeiro_barvo_".concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(s),s.click(),document.body.removeChild(s)},u=e=>{let{label:t,value:s,count:l,icon:r,color:i}=e;return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex flex-col justify-between group hover:shadow-md transition-all",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(i),children:r}),(0,a.jsxs)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[l," transa\xe7\xf5es"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:t}),(0,a.jsxs)("h4",{className:"text-2xl font-black text-slate-900 tracking-tight",children:["R$ ",s.toLocaleString("pt-BR")]})]})]})};return(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in pb-10",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Financeiro & Receb\xedveis"}),(0,a.jsx)("p",{className:"text-slate-500 mt-1",children:"Vis\xe3o estrat\xe9gica de faturamento por modalidade."})]}),(0,a.jsxs)("div",{className:"flex bg-white p-1 rounded-xl border border-slate-100 shadow-sm",children:[(0,a.jsxs)("button",{onClick:()=>r("report"),className:"px-4 py-2 rounded-lg text-xs font-bold transition-all flex items-center gap-2 ".concat("report"===s?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:text-slate-800"),children:[(0,a.jsx)(tI.A,{size:14})," Relat\xf3rio de Pagamentos"]}),(0,a.jsxs)("button",{onClick:()=>r("history"),className:"px-4 py-2 rounded-lg text-xs font-bold transition-all flex items-center gap-2 ".concat("history"===s?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:text-slate-800"),children:[(0,a.jsx)(h.A,{size:14})," Hist\xf3rico Geral"]})]})]}),"report"===s&&(0,a.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(u,{label:"Cart\xe3o de Cr\xe9dito",value:c.CREDIT_CARD.total,count:c.CREDIT_CARD.count,icon:(0,a.jsx)(eE.A,{size:20}),color:"bg-slate-900 text-white"}),(0,a.jsx)(u,{label:"Cart\xe3o de D\xe9bito",value:c.DEBIT_CARD.total,count:c.DEBIT_CARD.count,icon:(0,a.jsx)(tE.A,{size:20}),color:"bg-blue-50 text-blue-600"}),(0,a.jsx)(u,{label:"Pagamento via Pix",value:c.PIX.total,count:c.PIX.count,icon:(0,a.jsx)(eR.A,{size:20}),color:"bg-emerald-50 text-emerald-600"}),(0,a.jsx)(u,{label:"Feito Presencial",value:c.PRESENTIAL.total,count:c.PRESENTIAL.count,icon:(0,a.jsx)(ez.A,{size:20}),color:"bg-amber-50 text-amber-600"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-8 flex items-center gap-2",children:[(0,a.jsx)(tI.A,{size:20,className:"text-blue-500"})," Mix de Pagamento"]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(M.u,{width:"100%",height:"100%",children:(0,a.jsxs)(tz.r,{children:[(0,a.jsx)(tD.F,{data:x,innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:x.map((e,t)=>(0,a.jsx)(F.f,{fill:e.color},"cell-".concat(t)))}),(0,a.jsx)(_.m,{})]})})}),(0,a.jsx)("div",{className:"mt-6 space-y-3",children:x.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:e.name})]}),(0,a.jsxs)("span",{className:"font-bold text-slate-900",children:["R$ ",e.value.toFixed(2)]})]},e.name))})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"Volume por Modalidade"}),(0,a.jsxs)("button",{onClick:m,className:"text-xs font-bold text-blue-600 flex items-center gap-1 hover:underline",children:[(0,a.jsx)(tR.A,{size:14})," Exportar Detalhado"]})]}),(0,a.jsx)("div",{className:"flex-1 h-64",children:(0,a.jsx)(M.u,{width:"100%",height:"100%",children:(0,a.jsxs)(T.E,{data:x,children:[(0,a.jsx)(B.d,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),(0,a.jsx)(L.W,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fontWeight:"bold"}}),(0,a.jsx)(O.h,{axisLine:!1,tickLine:!1,tick:{fontSize:12}}),(0,a.jsx)(_.m,{cursor:{fill:"#f8fafc"}}),(0,a.jsx)(q.y,{dataKey:"value",radius:[6,6,0,0],children:x.map((e,t)=>(0,a.jsx)(F.f,{fill:e.color},"cell-".concat(t)))})]})})})]})]})]}),"history"===s&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden animate-fade-in",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"Todas as Transa\xe7\xf5es"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{className:"bg-slate-50 border-none text-xs font-bold text-slate-600 rounded-lg px-3 py-2 focus:ring-0 cursor-pointer uppercase tracking-widest",children:[(0,a.jsx)("option",{children:"Filtrar por Per\xedodo"}),(0,a.jsx)("option",{children:"Hoje"}),(0,a.jsx)("option",{children:"\xdaltimos 7 dias"}),(0,a.jsx)("option",{children:"Este M\xeas"})]}),(0,a.jsx)("button",{onClick:m,className:"p-2 bg-slate-50 text-slate-400 hover:text-slate-900 rounded-lg transition-colors",children:(0,a.jsx)(tR.A,{size:18})})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500 text-[10px] font-bold uppercase tracking-widest",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Data"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Descri\xe7\xe3o"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"M\xe9todo"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Respons\xe1vel"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"Valor"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:d.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-slate-600 text-sm font-medium",children:e.date}),(0,a.jsx)("td",{className:"px-6 py-4 font-bold text-slate-800 text-sm",children:e.description}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-tighter ".concat("CREDIT_CARD"===e.paymentMethod?"text-slate-900":"PIX"===e.paymentMethod?"text-emerald-600":"DEBIT_CARD"===e.paymentMethod?"text-blue-600":"text-amber-600"),children:["CREDIT_CARD"===e.paymentMethod&&(0,a.jsx)(eE.A,{size:10}),"PIX"===e.paymentMethod&&(0,a.jsx)(eR.A,{size:10}),"DEBIT_CARD"===e.paymentMethod&&(0,a.jsx)(tE.A,{size:10}),"PRESENTIAL"===e.paymentMethod&&(0,a.jsx)(et.A,{size:10}),e.paymentMethod.replace("_CARD","").replace("CREDIT","CR\xc9DITO").replace("DEBIT","D\xc9BITO")]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-slate-500 text-xs font-bold",children:e.barberId?"Barbeiro "+e.barberId.replace("u",""):"-"}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right font-black text-slate-900 text-sm",children:["R$ ",e.amount.toFixed(2)]}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("span",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded-lg border border-emerald-100 uppercase",children:"Aprovado"})})]},e.id))})]})}),d.length<t.length&&(0,a.jsx)("div",{className:"p-4 border-t border-slate-100 bg-slate-50 text-center",children:(0,a.jsx)("button",{onClick:()=>{n(!0),setTimeout(()=>{o(t),n(!1)},1e3)},disabled:i,className:"text-xs font-black text-blue-600 uppercase tracking-widest hover:text-blue-800 transition-colors flex items-center gap-2 mx-auto disabled:opacity-50",children:i?(0,a.jsx)(eS.A,{size:16,className:"animate-spin"}):"Ver mais registros"})})]})]})};var tM=s(69141);let tT=e=>{let{barbers:t,setUsers:s}=e,[r,n]=(0,l.useState)(!1),[o,c]=(0,l.useState)({name:"",email:"",phone:""}),[x,m]=(0,l.useState)(null);return(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in relative pb-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Equipe"}),(0,a.jsx)("p",{className:"text-slate-500 mt-1",children:"Gerencie seus barbeiros e visualize o desempenho individual."})]}),(0,a.jsxs)("button",{onClick:()=>n(!0),className:"bg-slate-900 text-white px-5 py-2.5 rounded-xl font-medium hover:bg-slate-800 transition-colors shadow-lg flex items-center gap-2",children:[(0,a.jsx)(K.A,{size:18})," Novo Barbeiro"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-visible group hover:shadow-md transition-all duration-300 hover:-translate-y-1 relative",children:[(0,a.jsx)("div",{className:"h-24 bg-brand-dark relative rounded-t-2xl",children:(0,a.jsxs)("div",{className:"absolute top-4 right-4 z-10",children:[(0,a.jsx)("button",{onClick:()=>m(x===e.id?null:e.id),className:"text-white/70 hover:text-white transition-colors p-1",children:(0,a.jsx)(D.A,{size:20})}),x===e.id&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-xl border border-slate-100 py-1 z-20",children:(0,a.jsxs)("button",{onClick:()=>{var t;return t=e.id,void(window.confirm("Remover este barbeiro da equipe?")&&s(e=>e.filter(e=>e.id!==t)),m(null))},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,a.jsx)(tN.A,{size:14})," Remover"]})})]})}),(0,a.jsxs)("div",{className:"px-6 pb-6 relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-end -mt-10 mb-4",children:[(0,a.jsx)(d,{url:e.avatar,name:e.name,size:"lg",className:"!w-20 !h-20 border-4 border-white shadow-md"}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1 text-amber-500 font-bold text-sm mb-1",children:["4.9 ",(0,a.jsx)(tp.A,{size:14,fill:"currentColor"})]})})]}),(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-800",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mb-6",children:"Barbeiro Especialista"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 rounded-xl border border-blue-100",children:[(0,a.jsx)("p",{className:"text-[10px] text-blue-500 font-bold uppercase mb-1",children:"Cortes"}),(0,a.jsx)("p",{className:"text-lg font-bold text-slate-800",children:45+2*t})]}),(0,a.jsxs)("div",{className:"p-3 bg-emerald-50 rounded-xl border border-emerald-100",children:[(0,a.jsx)("p",{className:"text-[10px] text-emerald-600 font-bold uppercase mb-1",children:"Score"}),(0,a.jsx)("p",{className:"text-lg font-bold text-slate-800",children:"98%"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"w-full py-2 flex items-center gap-2 text-sm font-medium text-slate-600",children:[(0,a.jsx)(tM.A,{size:14,className:"text-slate-400"})," ",e.phone||"(11) 99999-0000"]}),(0,a.jsxs)("div",{className:"w-full py-2 flex items-center gap-2 text-sm font-medium text-slate-600",children:[(0,a.jsx)(te.A,{size:14,className:"text-slate-400"})," ",e.email]})]})]})]},e.id))}),r&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"Novo Barbeiro"}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"text-slate-400",children:(0,a.jsx)(C.A,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={id:"u".concat(Date.now()),name:o.name,email:o.email,phone:o.phone,role:i.BARBER,avatar:"https://picsum.photos/seed/".concat(Date.now(),"/100/100")};s(e=>[...e,t]),n(!1),c({name:"",email:"",phone:""})},className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome"}),(0,a.jsx)("input",{required:!0,type:"text",className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Lucas Mendes",value:o.name,onChange:e=>c({...o,name:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"E-mail"}),(0,a.jsx)("input",{required:!0,type:"email",className:"w-full p-2.5 border border-slate-200 rounded-lg outline-none",placeholder:"barbeiro@email.com",value:o.email,onChange:e=>c({...o,email:e.target.value})})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-slate-900 text-white font-bold py-3 rounded-xl hover:bg-slate-800 transition-colors shadow-lg mt-2",children:"Contratar Barbeiro"})]})]})})]})};var tB=s(63581),tL=s(45345),tO=s(79397),t_=s(37107);let tq=e=>{let{items:t,onUpdateItem:s}=e,[r,i]=(0,l.useState)(""),[n,d]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[x,m]=(0,l.useState)({}),[u,b]=(0,l.useState)(!1),[p,h]=(0,l.useState)({name:"",category:"Cabelo",quantity:0,price:0,minLevel:5}),g=t.reduce((e,t)=>e+t.price*t.quantity,0),j=t.filter(e=>e.quantity<=e.minLevel),N=t.filter(e=>{let t=e.name.toLowerCase().includes(r.toLowerCase())||e.category.toLowerCase().includes(r.toLowerCase()),s=!n||e.quantity<=e.minLevel;return t&&s}),w=()=>{c(null),m({})},y=()=>{if(!o)return;let e=t.find(e=>e.id===o);e&&(s({...e,...x},"UPSERT"),c(null),m({}))};return(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in pb-10 relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Gest\xe3o de Estoque"}),(0,a.jsx)("p",{className:"text-slate-500 mt-1",children:"Controle produtos de venda e consumo interno."})]}),(0,a.jsxs)("button",{onClick:()=>b(!0),className:"bg-slate-900 text-white px-5 py-2.5 rounded-xl font-medium hover:bg-slate-800 transition-colors shadow-lg shadow-slate-900/10 flex items-center gap-2",children:[(0,a.jsx)(K.A,{size:18})," Novo Produto"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4 group hover:shadow-md transition-all",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,a.jsx)(f.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Total de Itens"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800",children:t.length})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4 group hover:shadow-md transition-all",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-emerald-100 text-emerald-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,a.jsx)(v.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Valor em Estoque"}),(0,a.jsxs)("h3",{className:"text-2xl font-bold text-slate-800",children:["R$ ",g.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"p-6 rounded-2xl shadow-sm border flex items-center gap-4 group hover:shadow-md transition-all cursor-pointer ".concat(j.length>0?"bg-amber-50 border-amber-100":"bg-white border-slate-100"),onClick:()=>d(!n),children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform ".concat(j.length>0?"bg-amber-200 text-amber-700":"bg-slate-100 text-slate-400"),children:(0,a.jsx)(tw.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium ".concat(j.length>0?"text-amber-800":"text-slate-500"),children:"Estoque Baixo"}),(0,a.jsxs)("h3",{className:"text-2xl font-bold ".concat(j.length>0?"text-amber-900":"text-slate-800"),children:[j.length," itens"]})]})]})]}),j.length>0&&!n&&(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-6 animate-fade-in relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-amber-100 rounded-full blur-2xl -mr-10 -mt-10 opacity-50"}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-amber-900 flex items-center gap-2",children:[(0,a.jsx)(tw.A,{size:20,className:"text-amber-600"})," Alerta de Reposi\xe7\xe3o"]}),(0,a.jsxs)("button",{onClick:()=>d(!0),className:"text-xs font-bold text-amber-700 hover:text-amber-900 flex items-center gap-1 hover:underline",children:["Ver todos na lista ",(0,a.jsx)(U.A,{size:12})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 relative z-10",children:j.slice(0,4).map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-amber-100 shadow-sm flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-slate-400 uppercase bg-slate-50 px-2 py-0.5 rounded",children:e.category}),(0,a.jsx)("span",{className:"text-xs font-bold text-red-500",children:"Cr\xedtico"})]}),(0,a.jsx)("h4",{className:"font-bold text-slate-800 text-sm truncate",title:e.name,children:e.name})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,a.jsxs)("span",{className:"text-slate-500",children:["Restam: ",(0,a.jsx)("b",{className:"text-slate-800",children:e.quantity})]}),(0,a.jsxs)("span",{className:"text-slate-400",children:["Min: ",e.minLevel]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-100 h-1.5 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"bg-red-500 h-full rounded-full",style:{width:"".concat(e.quantity/e.minLevel*50,"%")}})})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-100 flex flex-col md:flex-row gap-4 items-center bg-white sticky top-0 z-20",children:[(0,a.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,a.jsx)(tA.A,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar produtos...",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-200 text-sm",value:r,onChange:e=>i(e.target.value)})]}),(0,a.jsxs)("button",{onClick:()=>d(!n),className:"px-4 py-2 text-sm font-medium border rounded-lg flex items-center gap-2 transition-colors ".concat(n?"bg-amber-50 text-amber-700 border-amber-200":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"),children:[(0,a.jsx)(tB.A,{size:16,className:n?"fill-amber-700":""}),n?"Vendo Estoque Baixo":"Filtrar"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500 text-xs font-bold uppercase tracking-wider",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Produto"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Categoria"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Quantidade"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Pre\xe7o Unit."}),(0,a.jsx)("th",{className:"px-6 py-4",children:o?"N\xedvel M\xednimo":"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"A\xe7\xf5es"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-slate-100",children:[N.map(e=>(0,a.jsx)("tr",{className:"hover:bg-slate-50 transition-colors group ".concat(o===e.id?"bg-blue-50/30":""),children:o===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-slate-800",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-slate-500",children:e.category}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("input",{type:"number",className:"w-20 p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:x.quantity,onChange:e=>m({...x,quantity:Number(e.target.value)})})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("input",{type:"number",step:"0.01",className:"w-24 p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:x.price,onChange:e=>m({...x,price:Number(e.target.value)})})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"M\xedn:"}),(0,a.jsx)("input",{type:"number",className:"w-20 p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:x.minLevel,onChange:e=>m({...x,minLevel:Number(e.target.value)})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:y,className:"p-2 text-emerald-600 hover:bg-emerald-100 rounded-lg transition-colors",children:(0,a.jsx)(eC.A,{size:18})}),(0,a.jsx)("button",{onClick:w,className:"p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 rounded-lg transition-colors",children:(0,a.jsx)(C.A,{size:18})})]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-slate-800",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 text-slate-500 text-sm",children:(0,a.jsx)("span",{className:"bg-slate-100 px-2 py-1 rounded text-xs font-semibold",children:e.category})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-bold text-slate-700",children:[e.quantity," un"]}),e.quantity<=e.minLevel&&(0,a.jsx)("div",{className:"w-16 h-1.5 bg-slate-200 rounded-full overflow-hidden hidden sm:block",children:(0,a.jsx)("div",{className:"h-full bg-red-500",style:{width:"".concat(Math.min(e.quantity/e.minLevel*100,100),"%")}})})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-slate-600",children:["R$ ",e.price.toFixed(2)]}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.quantity<=e.minLevel?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded-full border border-amber-100",children:[(0,a.jsx)(tw.A,{size:10})," Repor (",e.quantity,"/",e.minLevel,")"]}):(0,a.jsx)("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full border border-emerald-100",children:"Em dia"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>(e=>{c(e.id),m({...e})})(e),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,a.jsx)(tC.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>(e=>{if(window.confirm("Tem certeza que deseja excluir este item do estoque?")){let a=t.find(t=>t.id===e);a&&s(a,"DELETE")}})(e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(tN.A,{size:16})})]})})]})},e.id)),0===N.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-400",children:n?"Tudo certo! Nenhum produto com estoque baixo.":"Nenhum produto encontrado."})})]})]})})]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden transform scale-100",children:[(0,a.jsxs)("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[(0,a.jsx)(f.A,{size:20,className:"text-blue-500"})," Novo Produto"]}),(0,a.jsx)("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-slate-600 hover:bg-slate-200 p-1 rounded-full transition-colors",children:(0,a.jsx)(C.A,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p.name&&p.price&&(s({id:"new_".concat(Date.now()),name:p.name,category:p.category||"Cabelo",quantity:Number(p.quantity),price:Number(p.price),minLevel:Number(p.minLevel)},"UPSERT"),b(!1),h({name:"",category:"Cabelo",quantity:0,price:0,minLevel:5}))},className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 ml-1",children:"Nome do Produto"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tL.A,{size:18,className:"absolute left-3 top-3 text-slate-400"}),(0,a.jsx)("input",{required:!0,type:"text",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm text-slate-900 placeholder:text-slate-400",placeholder:"Ex: Pomada Matte 150g",value:p.name,onChange:e=>h({...p,name:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 ml-1",children:"Categoria"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tO.A,{size:18,className:"absolute left-3 top-3 text-slate-400"}),(0,a.jsxs)("select",{className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm appearance-none text-slate-900",value:p.category,onChange:e=>h({...p,category:e.target.value}),children:[(0,a.jsx)("option",{value:"Cabelo",children:"Cabelo"}),(0,a.jsx)("option",{value:"Barba",children:"Barba"}),(0,a.jsx)("option",{value:"Acess\xf3rios",children:"Acess\xf3rios"}),(0,a.jsx)("option",{value:"Higiene",children:"Higiene"}),(0,a.jsx)("option",{value:"Consumo Interno",children:"Consumo Interno"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 ml-1",children:"Pre\xe7o (R$)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.A,{size:18,className:"absolute left-3 top-3 text-slate-400"}),(0,a.jsx)("input",{required:!0,type:"number",step:"0.01",min:"0",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm text-slate-900",value:p.price,onChange:e=>h({...p,price:Number(e.target.value)})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 ml-1",children:"Quantidade"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(t_.A,{size:18,className:"absolute left-3 top-3 text-slate-400"}),(0,a.jsx)("input",{required:!0,type:"number",min:"0",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm text-slate-900",value:p.quantity,onChange:e=>h({...p,quantity:Number(e.target.value)})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 ml-1",children:"M\xednimo (Alerta)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tw.A,{size:18,className:"absolute left-3 top-3 text-slate-400"}),(0,a.jsx)("input",{required:!0,type:"number",min:"0",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm text-slate-900",value:p.minLevel,onChange:e=>h({...p,minLevel:Number(e.target.value)})})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>b(!1),className:"flex-1 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 shadow-lg transition-all",children:"Salvar Produto"})]})]})]})})]})};var tF=s(54485);let tU=e=>{let{services:t,notes:s,onSaveNote:r,customers:i,appointments:n,onScheduleReturn:o}=e,[x,m]=(0,l.useState)(null),[u,b]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),g=i.filter(e=>{var t;return e.name.toLowerCase().includes(u.toLowerCase())||(null==(t=e.phone)?void 0:t.includes(u))}).map(e=>({...e,...(e=>{let s=n.filter(t=>t.customerId===e),a=s.filter(e=>"COMPLETED"===e.status),l=[...s].sort((e,t)=>new Date(t.startTime).getTime()-new Date(e.startTime).getTime()),r=a.reduce((e,s)=>{let a=t.find(e=>e.id===s.serviceId);return e+((null==a?void 0:a.price)||0)},0),i=a.length>=5||r>=500;return{totalVisits:a.length,ltv:r,history:l,isVIP:i}})(e.id)})),f=x?g.find(e=>e.id===x):null,j=x?s.filter(e=>e.customerId===x):[];return(0,a.jsx)("div",{className:"space-y-4 md:space-y-6 animate-fade-in pb-10 h-[calc(100vh-140px)] flex flex-col",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 bg-white rounded-2xl shadow-sm border border-slate-100 flex flex-col overflow-hidden ".concat(x?"hidden lg:flex":"flex"),children:[(0,a.jsx)("div",{className:"p-4 border-b border-slate-100 bg-white",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tA.A,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar cliente...",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 text-sm",value:u,onChange:e=>b(e.target.value)})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:g.map(e=>(0,a.jsxs)("div",{onClick:()=>m(e.id),className:"p-4 border-b border-slate-50 cursor-pointer transition-all hover:bg-slate-50 flex items-center gap-3 ".concat(x===e.id?"bg-blue-50 border-blue-100":""),children:[(0,a.jsx)(d,{url:e.avatar,name:e.name,size:"md",className:"!w-12 !h-12 rounded-full border"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("h4",{className:"font-bold text-sm truncate",children:e.name}),e.isVIP&&(0,a.jsx)(tp.A,{size:14,className:"text-amber-500 fill-amber-500 flex-shrink-0"})]}),(0,a.jsxs)("div",{className:"flex gap-1 mt-1",children:[e.membershipId&&(0,a.jsx)(tu.A,{size:12,className:"text-amber-500"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-tighter",children:e.membershipId?"Assinante":"Avulso"})]})]})]},e.id))})]}),(0,a.jsx)("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-100 flex-col overflow-hidden ".concat(x?"flex":"hidden lg:flex"),children:f?(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>m(null),className:"lg:hidden p-2 text-slate-500 hover:bg-slate-200 rounded-full mr-1",children:(0,a.jsx)(J.A,{size:24})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d,{url:f.avatar,name:f.name,size:"lg",className:"!w-16 !h-16 shadow-md border-4 border-white"}),f.isVIP&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 bg-amber-500 text-white p-1 rounded-full border-2 border-white shadow-sm",children:(0,a.jsx)(tp.A,{size:12,fill:"currentColor"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-slate-800",children:f.name}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[f.membershipId&&(0,a.jsxs)("span",{className:"bg-amber-100 text-amber-700 text-[9px] font-black px-2 py-0.5 rounded-full border border-amber-200 uppercase tracking-tighter flex items-center gap-1",children:[(0,a.jsx)(tu.A,{size:10})," Barvo Club Premium"]}),f.isVIP&&(0,a.jsx)("span",{className:"bg-amber-500 text-white text-[9px] font-black px-2 py-0.5 rounded-full uppercase tracking-tighter",children:"Cliente VIP"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsxs)("div",{className:"flex gap-4 bg-white p-3 rounded-xl border shadow-sm",children:[(0,a.jsxs)("div",{className:"text-center px-2",children:[(0,a.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"LTV"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-slate-800",children:["R$ ",f.ltv.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"text-center px-2",children:[(0,a.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Visitas"}),(0,a.jsx)("p",{className:"text-lg font-bold text-slate-800",children:f.totalVisits})]})]}),(0,a.jsxs)("button",{onClick:()=>o(f.id,f.name),className:"bg-brand-dark text-white px-5 py-3 rounded-xl font-bold hover:bg-black transition-all flex items-center gap-2 shadow-lg shadow-brand-dark/20 text-sm",children:[(0,a.jsx)(c.A,{size:18})," Agendar Retorno"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[(0,a.jsx)(tj.A,{size:18,className:"text-blue-500"})," Notas T\xe9cnicas"]}),(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4",children:[(0,a.jsx)("textarea",{className:"w-full bg-transparent border-none focus:ring-0 text-sm text-slate-700 placeholder:text-slate-400 resize-none",rows:2,placeholder:"Prefer\xeancias do cliente (ex: Pente 2 baixo)...",value:p,onChange:e=>h(e.target.value)}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)("button",{onClick:()=>{p.trim()&&x&&(r({customerId:x,note:p,tags:["Manual"]}),h(""))},disabled:!p.trim(),className:"bg-amber-500 text-white px-4 py-1.5 rounded-lg text-xs font-bold hover:bg-amber-600 disabled:opacity-50 transition-colors",children:"Salvar Nota"})})]}),(0,a.jsx)("div",{className:"space-y-3",children:j.map(e=>(0,a.jsxs)("div",{className:"bg-white border border-slate-100 rounded-xl p-4 shadow-sm",children:[(0,a.jsx)("p",{className:"text-sm text-slate-700 mb-2",children:e.note}),(0,a.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(e.date).toLocaleDateString("pt-BR")})]},e.id))})]}),(0,a.jsxs)("div",{className:"pt-6 border-t border-slate-100",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsxs)("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[(0,a.jsx)(tF.A,{size:18,className:"text-purple-500"})," Hist\xf3rico de Visitas"]})}),(0,a.jsx)("div",{className:"space-y-3",children:f.history.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-xl border border-slate-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("p",{className:"text-sm font-bold text-slate-800",children:null==(s=t.find(t=>t.id===e.serviceId))?void 0:s.name}),void 0!==e.paymentMethod&&"PRESENTIAL"!==e.paymentMethod?(0,a.jsx)(et.A,{size:12,className:"text-emerald-500"}):(0,a.jsx)(eE.A,{size:12,className:"text-blue-500"})]}),(0,a.jsxs)("p",{className:"text-[10px] text-slate-400",children:[new Date(e.startTime).toLocaleDateString("pt-BR")," \xe0s ",new Date(e.startTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,a.jsx)("span",{className:"text-[9px] font-black px-2 py-0.5 rounded uppercase ".concat("COMPLETED"===e.status?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-500"),children:e.status}),void 0!==e.paymentMethod&&"PRESENTIAL"!==e.paymentMethod&&(0,a.jsx)("span",{className:"text-[8px] font-bold text-emerald-600 uppercase",children:"Pago via App"})]})]},e.id)})})]})]})]}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:(0,a.jsx)("p",{children:"Selecione um cliente para ver os detalhes."})})})]})})};var tV=s(53511);let tW=e=>{let{automations:t=[],setAutomations:s}=e,[r,i]=(0,l.useState)("campaigns"),[n,d]=(0,l.useState)(eN),[o,c]=(0,l.useState)(!1),[x,m]=(0,l.useState)(!1),[u,b]=(0,l.useState)({title:"",content:"",type:"WHATSAPP"}),[p,h]=(0,l.useState)({title:"",triggerType:"APPOINTMENT_COUNT",triggerValue:5,message:"",active:!0,channel:"WHATSAPP"});return(0,a.jsxs)("div",{className:"space-y-8 animate-fade-in pb-10 relative",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Marketing & Fidelidade"}),(0,a.jsx)("p",{className:"text-slate-500 mt-1",children:"Engaje seus clientes e aumente a recorr\xeancia."})]})}),(0,a.jsxs)("div",{className:"flex gap-2 border-b border-slate-200",children:[(0,a.jsxs)("button",{onClick:()=>i("campaigns"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("campaigns"===r?"text-blue-600":"text-slate-500 hover:text-slate-700"),children:["Campanhas","campaigns"===r&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),(0,a.jsxs)("button",{onClick:()=>i("automation"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("automation"===r?"text-blue-600":"text-slate-500 hover:text-slate-700"),children:["Automa\xe7\xe3o","automation"===r&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]})]}),"automation"===r?(0,a.jsxs)("div",{className:"animate-fade-in",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[(0,a.jsx)(eR.A,{className:"text-amber-500"})," Regras de Automa\xe7\xe3o"]}),(0,a.jsxs)("button",{onClick:()=>m(!0),className:"bg-slate-900 text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-slate-800 transition-colors flex items-center gap-2",children:[(0,a.jsx)(K.A,{size:16})," Nova Regra"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:t.map(e=>(0,a.jsx)("div",{className:"bg-white p-6 rounded-xl border shadow-sm transition-all ".concat(e.active?"border-l-4 border-l-emerald-500 border-slate-100":"border-slate-200 opacity-70"),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(e.active?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"),children:(0,a.jsx)(eR.A,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-bold text-slate-800",children:e.title}),(0,a.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded font-bold uppercase ".concat(e.active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"),children:e.active?"Ativo":"Pausado"})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:["Gatilho: ","APPOINTMENT_COUNT"===e.triggerType?"".concat(e.triggerValue,"\xba Agendamento"):"Anivers\xe1rio"]}),(0,a.jsxs)("div",{className:"mt-3 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,a.jsxs)("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1 flex items-center gap-1",children:[(0,a.jsx)(eP.A,{size:10})," Mensagem Autom\xe1tica:"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-600 italic",children:['"',e.message,'"']})]})]})]}),(0,a.jsx)("button",{onClick:()=>{var a;return a=e.id,void(s&&s(t.map(e=>e.id===a?{...e,active:!e.active}:e)))},className:"p-2 rounded-lg transition-colors ".concat(e.active?"text-emerald-600 hover:bg-emerald-50":"text-slate-400 hover:bg-slate-100"),title:e.active?"Pausar":"Ativar",children:e.active?(0,a.jsx)(tV.A,{size:20}):(0,a.jsx)(es.A,{size:20})})]})},e.id))})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-fade-in",children:[(0,a.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-amber-50 rounded-bl-full -mr-10 -mt-10 z-0"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-amber-100 text-amber-600 rounded-xl",children:(0,a.jsx)(eD.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-800",children:"Programa de Fidelidade"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Configura\xe7\xe3o de pontos e resgates"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-slate-700",children:"Regra de Ac\xfamulo"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Quantos pontos o cliente ganha por Real gasto."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-2xl text-slate-900",children:"1"}),(0,a.jsx)("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Ponto / R$"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-slate-700",children:"Resgate M\xednimo"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Pontos necess\xe1rios para trocar por pr\xeamios."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-2xl text-slate-900",children:"100"}),(0,a.jsx)("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Pontos"})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-slate-100",children:[(0,a.jsx)("p",{className:"font-bold text-slate-700 mb-3",children:"Recompensas Ativas"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm p-2 hover:bg-slate-50 rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"text-slate-600",children:"Corte de Cabelo Gr\xe1tis"}),(0,a.jsx)("span",{className:"font-bold text-amber-600",children:"350 pts"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm p-2 hover:bg-slate-50 rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"text-slate-600",children:"50% na Barba"}),(0,a.jsx)("span",{className:"font-bold text-amber-600",children:"150 pts"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm p-2 hover:bg-slate-50 rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"text-slate-600",children:"Pomada Modeladora"}),(0,a.jsx)("span",{className:"font-bold text-amber-600",children:"200 pts"})]})]}),(0,a.jsx)("button",{className:"w-full mt-4 py-2 border border-slate-200 text-slate-600 font-bold rounded-lg hover:bg-slate-50 transition-colors text-sm",children:"Gerenciar Recompensas"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-slate-900 text-white p-8 rounded-2xl shadow-lg relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-white/10 rounded-xl backdrop-blur-sm",children:(0,a.jsx)(k.A,{size:24,className:"text-white"})}),(0,a.jsxs)("button",{onClick:()=>c(!0),className:"bg-white text-slate-900 px-4 py-2 rounded-lg font-bold text-sm hover:bg-slate-100 transition-colors flex items-center gap-2",children:[(0,a.jsx)(K.A,{size:16})," Criar Campanha"]})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Disparos Autom\xe1ticos"}),(0,a.jsx)("p",{className:"text-slate-300 text-sm mb-6",children:"Envie promo\xe7\xf5es via WhatsApp ou E-mail para sua base de clientes."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:"Taxa de Abertura"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:"85%"})]}),(0,a.jsxs)("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:"ROI (Retorno)"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:"12x"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 bg-slate-50 border-b border-slate-100 font-bold text-slate-700 text-sm",children:"\xdaltimas Campanhas"}),(0,a.jsx)("div",{className:"divide-y divide-slate-100",children:n.map(e=>(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat("WHATSAPP"===e.type?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-600"),children:"WHATSAPP"===e.type?(0,a.jsx)(eP.A,{size:18}):(0,a.jsx)(te.A,{size:18})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-slate-800 text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:new Date(e.date).toLocaleDateString("pt-BR")})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-[10px] font-bold px-2 py-1 rounded uppercase ".concat("SENT"===e.status?"bg-green-100 text-green-700":"DRAFT"===e.status?"bg-slate-100 text-slate-600":"bg-amber-100 text-amber-700"),children:"SENT"===e.status?"Enviado":"DRAFT"===e.status?"Rascunho":"Agendado"}),e.sentCount>0&&(0,a.jsxs)("p",{className:"text-xs text-slate-400 mt-1 flex items-center justify-end gap-1",children:[(0,a.jsx)(td.A,{size:10})," ",e.sentCount]})]})]},e.id))})]})]})]}),o&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"Nova Campanha"}),(0,a.jsx)("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600 p-1",children:(0,a.jsx)(C.A,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d([{id:"c".concat(Date.now()),title:u.title,content:u.content,type:u.type,status:"SCHEDULED",sentCount:0,date:new Date().toISOString()},...n]),c(!1),b({title:"",content:"",type:"WHATSAPP"}),alert("Campanha agendada com sucesso!")},className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"T\xedtulo da Campanha"}),(0,a.jsx)("input",{required:!0,type:"text",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-900 placeholder:text-slate-400",placeholder:"Ex: Promo\xe7\xe3o Rel\xe2mpago",value:u.title,onChange:e=>b({...u,title:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Canal de Envio"}),(0,a.jsxs)("select",{className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-900",value:u.type,onChange:e=>b({...u,type:e.target.value}),children:[(0,a.jsx)("option",{value:"WHATSAPP",children:"WhatsApp"}),(0,a.jsx)("option",{value:"EMAIL",children:"E-mail Marketing"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Mensagem"}),(0,a.jsx)("textarea",{required:!0,rows:4,className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-900 placeholder:text-slate-400 resize-none",placeholder:"Ol\xe1 {nome}, aproveite 20% off...",value:u.content,onChange:e=>b({...u,content:e.target.value})})]}),(0,a.jsxs)("button",{type:"submit",className:"w-full bg-slate-900 text-white font-bold py-3 rounded-xl hover:bg-slate-800 transition-colors shadow-lg mt-2 flex items-center justify-center gap-2",children:[(0,a.jsx)(td.A,{size:18})," Agendar Disparo"]})]})]})}),x&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"Nova Regra de Fidelidade"}),(0,a.jsx)("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-slate-600 p-1",children:(0,a.jsx)(C.A,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&(s([...t,{id:"auto_".concat(Date.now()),title:p.title||"Nova Automa\xe7\xe3o",triggerType:p.triggerType||"APPOINTMENT_COUNT",triggerValue:Number(p.triggerValue),message:p.message||"",active:!0,channel:"WHATSAPP"}]),m(!1),alert("Automa\xe7\xe3o ativada!"))},className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"T\xedtulo da Regra"}),(0,a.jsx)("input",{required:!0,type:"text",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-900",placeholder:"Ex: Cupom 10\xba Corte",value:p.title,onChange:e=>h({...p,title:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Gatilho"}),(0,a.jsxs)("select",{className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-900",value:p.triggerType,onChange:e=>h({...p,triggerType:e.target.value}),children:[(0,a.jsx)("option",{value:"APPOINTMENT_COUNT",children:"N\xba de Agendamentos"}),(0,a.jsx)("option",{value:"BIRTHDAY",children:"Anivers\xe1rio"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valor"}),(0,a.jsx)("input",{required:!0,type:"number",min:"1",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-900",placeholder:"Ex: 5",value:p.triggerValue,onChange:e=>h({...p,triggerValue:Number(e.target.value)})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Mensagem Autom\xe1tica"}),(0,a.jsx)("textarea",{required:!0,rows:3,className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-900 resize-none",placeholder:"Escreva a mensagem que ser\xe1 enviada...",value:p.message,onChange:e=>h({...p,message:e.target.value})})]}),(0,a.jsxs)("button",{type:"submit",className:"w-full bg-slate-900 text-white font-bold py-3 rounded-xl hover:bg-slate-800 transition-colors shadow-lg mt-2 flex items-center justify-center gap-2",children:[(0,a.jsx)(eC.A,{size:18})," Ativar Regra"]})]})]})})]})};var t$=s(95664),tG=s(46046),tH=s(76907),tX=s(21873),tY=s(19204),tK=s(39068);let tJ=e=>{var t;let{currentUser:s,settings:r,onUpdateSettings:o,onUpdateUser:c}=e,[x,m]=(0,l.useState)(r),[u,b]=(0,l.useState)({...s}),[p,h]=(0,l.useState)("profile"),[f,j]=(0,l.useState)(!1),[v,N]=(0,l.useState)({number:"",expiry:"",cvc:"",name:""});return(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in pb-10 max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-brand-dark tracking-tight",children:"Ajustes"}),(0,a.jsx)("p",{className:"text-brand-midGray mt-1",children:"Configure sua conta e as regras do seu neg\xf3cio."})]}),(0,a.jsxs)("div",{className:"flex gap-2 border-b border-slate-200 mb-6",children:[(0,a.jsxs)("button",{onClick:()=>h("profile"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("profile"===p?"text-brand-dark":"text-slate-400 hover:text-slate-700"),children:["Meu Perfil","profile"===p&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-brand-dark rounded-t-full"})]}),s.role===i.CUSTOMER&&(0,a.jsxs)("button",{onClick:()=>h("payments"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("payments"===p?"text-brand-dark":"text-slate-400 hover:text-slate-700"),children:["Pagamentos","payments"===p&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-brand-dark rounded-t-full"})]}),s.role===i.OWNER&&(0,a.jsxs)("button",{onClick:()=>h("shop"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("shop"===p?"text-brand-dark":"text-slate-400 hover:text-slate-700"),children:["Perfil da Barbearia","shop"===p&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-brand-dark rounded-t-full"})]})]}),"profile"===p&&(0,a.jsx)("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-100 p-8",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),alert("Perfil atualizado com sucesso!")},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"relative group cursor-pointer w-24 h-24",children:[(0,a.jsx)(d,{url:u.avatar,name:u.name,size:"lg",className:"!w-full !h-full rounded-3xl border-4 border-white shadow-xl"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-3xl flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(t$.A,{className:"text-white",size:24})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-brand-dark",children:u.name}),(0,a.jsx)("p",{className:"text-xs text-brand-midGray font-bold uppercase tracking-widest",children:u.role})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Nome Completo"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.A,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-brand-light outline-none text-brand-dark font-medium",value:u.name,onChange:e=>b({...u,name:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest ml-1",children:"E-mail"}),(0,a.jsx)("input",{type:"email",disabled:!0,className:"w-full px-4 py-3.5 bg-slate-100 border border-slate-200 rounded-2xl text-slate-400 cursor-not-allowed font-medium",value:u.email})]})]}),(0,a.jsx)("div",{className:"pt-6 flex justify-end",children:(0,a.jsxs)("button",{type:"submit",className:"bg-brand-dark text-white px-8 py-4 rounded-2xl font-bold hover:bg-black transition-all shadow-xl shadow-brand-dark/20 flex items-center gap-2 active:scale-95",children:[(0,a.jsx)(tG.A,{size:18})," Salvar Altera\xe7\xf5es"]})})]})}),"payments"===p&&(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[(0,a.jsx)(eE.A,{className:"text-blue-500"})," M\xe9todos de Pagamento"]}),(0,a.jsxs)("button",{onClick:()=>j(!0),className:"bg-brand-dark text-white px-4 py-2 rounded-xl text-xs font-bold hover:bg-black transition-all flex items-center gap-2",children:[(0,a.jsx)(K.A,{size:16})," Adicionar Cart\xe3o"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:(null==(t=u.paymentMethods)?void 0:t.length)?u.paymentMethods.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 bg-slate-50 border border-slate-100 rounded-3xl hover:bg-white hover:shadow-md transition-all group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:"bg-white p-3 rounded-xl border border-slate-100 shadow-sm",children:(0,a.jsx)("img",{src:"https://img.icons8.com/color/48/".concat(e.brand,".png"),className:"h-8",alt:e.brand})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-bold text-slate-800",children:["•••• •••• •••• ",e.last4]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsxs)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Expira em ",e.expiry]}),e.isDefault&&(0,a.jsx)("span",{className:"bg-emerald-100 text-emerald-700 text-[8px] font-black px-2 py-0.5 rounded-full uppercase",children:"Padr\xe3o"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[!e.isDefault&&(0,a.jsx)("button",{className:"text-[10px] font-black text-blue-600 hover:underline uppercase tracking-widest px-3",children:"Tornar Padr\xe3o"}),(0,a.jsx)("button",{onClick:()=>(e=>{if(confirm("Tem certeza que deseja remover este cart\xe3o?")){var t;let s=null==(t=u.paymentMethods)?void 0:t.filter(t=>t.id!==e),a={...u,paymentMethods:s};b(a),c&&c(a)}})(e.id),className:"p-2 text-slate-300 hover:text-red-500 transition-colors",children:(0,a.jsx)(tN.A,{size:18})})]})]},e.id)):(0,a.jsxs)("div",{className:"text-center py-16 border-2 border-dashed border-slate-100 rounded-3xl",children:[(0,a.jsx)(eE.A,{size:48,className:"mx-auto text-slate-200 mb-4"}),(0,a.jsx)("p",{className:"text-slate-400 font-bold",children:"Nenhum cart\xe3o cadastrado."}),(0,a.jsx)("button",{onClick:()=>j(!0),className:"mt-4 text-blue-600 font-bold text-sm hover:underline",children:"Clique para adicionar o primeiro"})]})})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-100 rounded-3xl p-6 flex gap-4",children:[(0,a.jsx)(tH.A,{size:32,className:"text-blue-600 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-blue-900 mb-1",children:"Pagamentos Seguros"}),(0,a.jsx)("p",{className:"text-sm text-blue-700/80 leading-relaxed",children:"A Barvo utiliza tecnologia de criptografia de ponta para garantir que seus dados de pagamento nunca sejam armazenados em nossos servidores de forma leg\xedvel. Tudo \xe9 processado via Checkout Seguro."})]})]})]}),"shop"===p&&(0,a.jsx)("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-100 p-8",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o(x),alert("Configura\xe7\xf5es da barbearia salvas com sucesso!")},className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Nome da Unidade"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.A,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-brand-light outline-none text-brand-dark font-bold text-lg",value:x.shopName,onChange:e=>m({...x,shopName:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Endere\xe7o de Localiza\xe7\xe3o"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tX.A,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-brand-light outline-none text-brand-dark font-medium",value:x.address,onChange:e=>m({...x,address:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Comiss\xe3o Padr\xe3o (%)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tY.A,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"number",className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-brand-light outline-none text-brand-dark font-bold",value:x.defaultCommissionRate,onChange:e=>m({...x,defaultCommissionRate:Number(e.target.value)})})]})]})]}),(0,a.jsxs)("div",{className:"pt-6 flex justify-between items-center border-t border-slate-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 text-sm font-medium",children:[(0,a.jsx)(tK.A,{size:16})," Suas altera\xe7\xf5es s\xe3o aplicadas em tempo real."]}),(0,a.jsxs)("button",{type:"submit",className:"bg-brand-dark text-white px-8 py-4 rounded-2xl font-bold hover:bg-black transition-all shadow-xl shadow-brand-dark/20 flex items-center gap-2 active:scale-95",children:[(0,a.jsx)(tG.A,{size:18})," Atualizar Barbearia"]})]})]})}),f&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-md overflow-hidden relative border border-slate-100",children:[(0,a.jsx)("button",{onClick:()=>j(!1),className:"absolute top-6 right-6 p-2 text-slate-300 hover:text-slate-800 transition-colors",children:(0,a.jsx)(C.A,{})}),(0,a.jsxs)("div",{className:"p-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-8 text-brand-dark/40 font-bold text-xs uppercase tracking-widest",children:[(0,a.jsx)(tH.A,{size:18})," ",(0,a.jsx)("span",{children:"Checkout Seguro"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 mb-8 tracking-tight",children:"Adicionar Novo Cart\xe3o"}),(0,a.jsxs)("form",{onSubmit:e=>{var t;e.preventDefault();let s=v.number.slice(-4),a=v.number.startsWith("4")?"visa":"mastercard",l={id:"pm_".concat(Date.now()),type:"CARD",brand:a,last4:s,expiry:v.expiry,isDefault:!(null==(t=u.paymentMethods)?void 0:t.length)},r={...u,paymentMethods:[...u.paymentMethods||[],l]};b(r),c&&c(r),j(!1),N({number:"",expiry:"",cvc:"",name:""}),alert("Cart\xe3o adicionado com sucesso!")},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl overflow-hidden focus-within:ring-2 focus-within:ring-blue-500 transition-all",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-200 flex items-center gap-3",children:[(0,a.jsx)(eE.A,{className:"text-slate-400",size:20}),(0,a.jsx)("input",{required:!0,type:"text",placeholder:"N\xfamero do cart\xe3o",className:"w-full bg-transparent outline-none text-slate-800 font-medium",value:v.number,onChange:e=>N({...v,number:e.target.value})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("img",{src:"https://img.icons8.com/color/48/visa.png",className:"h-5"}),(0,a.jsx)("img",{src:"https://img.icons8.com/color/48/mastercard.png",className:"h-5"})]})]}),(0,a.jsxs)("div",{className:"flex divide-x divide-slate-200",children:[(0,a.jsx)("input",{required:!0,type:"text",placeholder:"MM / AA",className:"w-1/2 p-4 bg-transparent outline-none text-slate-800 text-sm",value:v.expiry,onChange:e=>N({...v,expiry:e.target.value})}),(0,a.jsx)("input",{required:!0,type:"text",placeholder:"CVC",className:"w-1/2 p-4 bg-transparent outline-none text-slate-800 text-sm",value:v.cvc,onChange:e=>N({...v,cvc:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Nome no Cart\xe3o"}),(0,a.jsx)("input",{required:!0,type:"text",placeholder:"Ex: JO\xc3O A SILVA",className:"w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 transition-all font-bold uppercase text-slate-800",value:v.name,onChange:e=>N({...v,name:e.target.value})})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-brand-dark text-white py-5 rounded-[1.5rem] font-black text-lg shadow-xl hover:bg-black transition-all active:scale-95",children:"Salvar Cart\xe3o"})]})]})]})})]})};var tQ=s(10512),tZ=s(7125),t0=s(53409);let t1=e=>{var t,s,r,i,n,d;let{currentUser:o,inventory:c,onPurchase:x}=e,m="barberpro_cart_".concat(o.id),[u,b]=(0,l.useState)(()=>{try{let e=localStorage.getItem(m);return e?JSON.parse(e):[]}catch(e){return[]}});(0,l.useEffect)(()=>{localStorage.setItem(m,JSON.stringify(u))},[u,m]);let[p,h]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),[j,v]=(0,l.useState)(!1),[N,y]=(0,l.useState)(!1),[k,A]=(0,l.useState)(null),[S,I]=(0,l.useState)("Todos"),[E,R]=(0,l.useState)(!1),[z,D]=(0,l.useState)("SAVED_CARD"),[P,M]=(0,l.useState)((null==(s=o.paymentMethods)||null==(t=s.find(e=>e.isDefault))?void 0:t.id)||(null==(i=o.paymentMethods)||null==(r=i[0])?void 0:r.id)||""),[T,B]=(0,l.useState)({number:"",expiry:"",cvc:"",name:""}),[L,O]=(0,l.useState)(300);(0,l.useEffect)(()=>{if("PIX_DISPLAY"===z&&L>0){let e=setInterval(()=>O(e=>e-1),1e3);return()=>clearInterval(e)}},[z,L]);let _=(0,l.useMemo)(()=>{let e=["Lavat\xf3rio","Bar"];return[...eA,...c.filter(t=>!e.includes(t.category)).map(e=>({id:"inv_".concat(e.id),name:e.name,description:"Produto premium dispon\xedvel para retirada imediata na Barvo.",price:e.price,category:e.category,images:["https://images.unsplash.com/photo-1585232561307-3f8d407c95b4?auto=format&fit=crop&q=80&w=600"],rating:5,reviewsCount:0,inStock:e.quantity>0,variations:["Padr\xe3o"]}))]},[c]),q=["Todos",...Array.from(new Set(_.map(e=>e.category)))],F="Todos"===S?_:_.filter(e=>e.category===S),V=u.reduce((e,t)=>e+t.price*t.quantity,0),W=o.points||0,$=W>=er.MIN_POINTS_TO_REDEEM,G=W/er.DISCOUNT_CONVERSION_RATE,H=E&&$?Math.min(G,.5*V):0;E&&er.DISCOUNT_CONVERSION_RATE;let X=V-H,Y=(e,t)=>{b(s=>s.map(s=>{if(s.cartId===e){let e=Math.max(1,s.quantity+t);return{...s,quantity:e}}return s}))},J=async()=>{v(!0);let e=E?H:0;try{if(!await Promise.resolve(x(u,X,E,e)))return void v(!1);let t=E?0:e$(X);setTimeout(()=>{v(!1),f(!1),A({total:X,pointsEarned:t}),y(!0),b([]),R(!1),D("SAVED_CARD")},2e3)}catch(e){console.error("Purchase failed",e),v(!1)}};return(0,a.jsxs)("div",{className:"relative h-full pb-20",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6 animate-fade-in",children:[(0,a.jsxs)("div",{className:"px-1",children:[(0,a.jsxs)("h2",{className:"text-2xl md:text-3xl font-black text-slate-800 tracking-tight flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"text-brand-dark",size:26})," Loja Barvo"]}),(0,a.jsx)("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest mt-1 opacity-60",children:"Cuidados Premium"})]}),(0,a.jsxs)("button",{onClick:()=>h(!0),className:"w-full md:w-auto flex bg-brand-dark text-white px-6 py-4 rounded-2xl hover:bg-black transition-all shadow-xl items-center justify-center gap-3 relative active:scale-95 group",children:[(0,a.jsx)("div",{className:"bg-white/10 p-1.5 rounded-lg group-hover:scale-110 transition-transform",children:(0,a.jsx)(tQ.A,{size:18})}),(0,a.jsx)("span",{className:"font-black text-xs uppercase tracking-[0.15em]",children:"Meu Carrinho"}),u.length>0&&(0,a.jsx)("span",{className:"absolute -top-1.5 -right-1.5 bg-brand-accent text-white text-[10px] font-black w-6 h-6 flex items-center justify-center rounded-full border-2 border-white shadow-lg animate-pulse-soft",children:u.reduce((e,t)=>e+t.quantity,0)})]})]}),(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 no-scrollbar scroll-smooth",children:q.map(e=>(0,a.jsx)("button",{onClick:()=>I(e),className:"px-6 py-2.5 rounded-full text-[10px] font-black uppercase tracking-widest whitespace-nowrap transition-all border-2 ".concat(S===e?"bg-brand-dark text-white border-brand-dark shadow-lg":"bg-white border-slate-100 text-slate-400"),children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-6 animate-fade-in",children:F.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl md:rounded-[2rem] border border-slate-100 shadow-sm overflow-hidden hover:shadow-xl transition-all group flex flex-col active:scale-[0.98]",children:[(0,a.jsxs)("div",{className:"relative aspect-square overflow-hidden bg-slate-50",children:[(0,a.jsx)("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),!e.inStock&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white/70 backdrop-blur-[1px] flex items-center justify-center",children:(0,a.jsx)("span",{className:"bg-slate-800 text-white px-2 py-1 rounded text-[9px] font-black uppercase tracking-widest",children:"Esgotado"})}),(0,a.jsxs)("div",{className:"absolute top-2 left-2 bg-white/90 backdrop-blur-md px-2 py-0.5 rounded-lg flex items-center gap-1 shadow-sm",children:[(0,a.jsx)(tp.A,{size:10,className:"text-amber-500 fill-amber-500"}),(0,a.jsx)("span",{className:"text-[9px] font-black text-slate-800",children:e.rating})]})]}),(0,a.jsxs)("div",{className:"p-3 md:p-5 flex flex-col flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-slate-800 text-xs md:text-base mb-2 leading-tight line-clamp-2 min-h-[2rem]",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-auto",children:[(0,a.jsxs)("span",{className:"text-sm md:text-lg font-black text-brand-dark leading-none",children:["R$ ",e.price.toFixed(2)]}),(0,a.jsx)("button",{onClick:()=>(e=>{let t=u.findIndex(t=>t.id===e.id);if(t>-1){let e=[...u];e[t].quantity+=1,b(e)}else b([...u,{...e,cartId:"".concat(e.id,"-").concat(Date.now()),selectedVariation:"Padr\xe3o",quantity:1}])})(e),disabled:!e.inStock,className:"bg-slate-100 text-brand-dark p-2 md:p-3 rounded-xl active:bg-brand-dark active:text-white transition-all disabled:opacity-30 hover:shadow-lg",children:(0,a.jsx)(K.A,{size:18})})]})]})]},e.id))}),p&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex justify-end",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-brand-dark/40 backdrop-blur-sm animate-fade-in",onClick:()=>h(!1)}),(0,a.jsxs)("div",{className:"relative w-full md:max-w-md bg-white h-full shadow-2xl flex flex-col animate-slide-in",children:[(0,a.jsxs)("div",{className:"px-6 pt-8 pb-6 border-b border-slate-100 flex justify-between items-center bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center text-brand-dark",children:(0,a.jsx)(tQ.A,{size:22})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-black text-slate-900 tracking-tighter",children:"Carrinho"}),(0,a.jsxs)("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:[u.length," ",1===u.length?"item selecionado":"itens selecionados"]})]})]}),(0,a.jsx)("button",{onClick:()=>h(!1),className:"p-2.5 bg-slate-50 hover:bg-slate-100 rounded-full text-slate-400 transition-all active:scale-90",children:(0,a.jsx)(C.A,{size:20,strokeWidth:3})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4 custom-scrollbar bg-slate-50/20",children:[0===u.length?(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-60 space-y-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center text-slate-300",children:(0,a.jsx)(w.A,{size:40})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-black text-slate-800 uppercase tracking-widest",children:"Saco vazio"}),(0,a.jsxs)("p",{className:"text-xs font-medium text-slate-400 mt-1",children:["Que tal adicionar alguns",(0,a.jsx)("br",{}),"produtos premium?"]})]}),(0,a.jsx)("button",{onClick:()=>h(!1),className:"text-xs font-black text-brand-accent uppercase tracking-widest py-2 px-4 border-2 border-brand-accent/20 rounded-xl hover:bg-brand-accent hover:text-white transition-all",children:"Voltar para a loja"})]}):u.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-[1.5rem] border border-slate-100 shadow-sm flex gap-4 items-center group animate-fade-in",children:[(0,a.jsx)("div",{className:"relative w-16 h-16 rounded-xl overflow-hidden flex-shrink-0 border border-slate-50 shadow-inner",children:(0,a.jsx)("img",{src:e.images[0],className:"w-full h-full object-cover",alt:e.name})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,a.jsx)("h4",{className:"font-bold text-slate-800 text-xs leading-tight line-clamp-1 pr-2",children:e.name}),(0,a.jsx)("button",{onClick:()=>b(u.filter(t=>t.cartId!==e.cartId)),className:"text-slate-300 hover:text-red-500 transition-colors p-1",children:(0,a.jsx)(tN.A,{size:14})})]}),(0,a.jsxs)("p",{className:"text-sm font-black text-brand-dark mb-3",children:["R$ ",e.price.toFixed(2)]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center bg-slate-100 rounded-xl p-0.5 border border-slate-200",children:[(0,a.jsx)("button",{onClick:()=>Y(e.cartId,-1),className:"w-7 h-7 flex items-center justify-center bg-white rounded-lg shadow-sm active:scale-75 text-slate-400 hover:text-brand-dark transition-all",children:(0,a.jsx)(tZ.A,{size:12,strokeWidth:3})}),(0,a.jsx)("span",{className:"w-9 text-center text-xs font-black text-slate-800",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>Y(e.cartId,1),className:"w-7 h-7 flex items-center justify-center bg-white rounded-lg shadow-sm active:scale-75 text-slate-400 hover:text-brand-dark transition-all",children:(0,a.jsx)(K.A,{size:12,strokeWidth:3})})]}),(0,a.jsxs)("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["R$ ",(e.price*e.quantity).toFixed(2)]})]})]})]},e.cartId)),u.length>0&&W>=er.MIN_POINTS_TO_REDEEM&&(0,a.jsx)("div",{className:"pt-4 pb-2",children:(0,a.jsxs)("button",{onClick:()=>R(!E),className:"w-full p-4 rounded-2xl flex items-center gap-3 border transition-all ".concat(E?"bg-blue-50 border-blue-200":"bg-slate-50 border-slate-100"),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(E?"bg-blue-600 text-white":"bg-blue-100 text-blue-600"),children:(0,a.jsx)(eD.A,{size:16})}),(0,a.jsxs)("div",{className:"text-left flex-1",children:[(0,a.jsxs)("p",{className:"text-[10px] font-black text-blue-800 uppercase leading-tight",children:["Usar meus ",W," pontos"]}),(0,a.jsxs)("p",{className:"text-[9px] text-slate-400 font-bold",children:["Desconto de R$ ",G.toFixed(2)," dispon\xedvel"]})]}),(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat(E?"bg-blue-600 border-blue-600":"border-slate-200"),children:E&&(0,a.jsx)(eC.A,{size:12,className:"text-white",strokeWidth:4})})]})}),u.length>0&&!E&&(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsxs)("div",{className:"bg-emerald-50 border border-emerald-100 p-4 rounded-2xl flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-600",children:(0,a.jsx)(eR.A,{size:16})}),(0,a.jsxs)("p",{className:"text-[10px] font-bold text-emerald-800 uppercase leading-tight",children:["Voc\xea ganhar\xe1 ",(0,a.jsxs)("span",{className:"font-black underline",children:[e$(X)," pontos"]})," com esta compra!"]})]})})]}),u.length>0&&(0,a.jsxs)("div",{className:"p-6 bg-white border-t border-slate-100 shadow-[0_-15px_40px_rgba(0,0,0,0.04)] space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-slate-400 font-bold uppercase tracking-widest flex items-center gap-2",children:[(0,a.jsx)(t0.A,{size:14})," Subtotal"]}),(0,a.jsxs)("span",{className:"font-black text-slate-800",children:["R$ ",V.toFixed(2)]})]}),E&&(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs animate-fade-in",children:[(0,a.jsxs)("span",{className:"text-slate-400 font-bold uppercase tracking-widest flex items-center gap-2",children:[(0,a.jsx)(tL.A,{size:14})," Pontos Fidelidade"]}),(0,a.jsxs)("span",{className:"font-black text-emerald-600",children:["- R$ ",H.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t border-slate-50 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-black text-slate-900 uppercase tracking-[0.2em]",children:"Total"}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("span",{className:"text-2xl font-black text-brand-dark tracking-tighter",children:["R$ ",X.toFixed(2)]})})]})]}),(0,a.jsxs)("button",{onClick:()=>{h(!1),f(!0)},className:"w-full bg-brand-dark text-white font-black py-5 rounded-[2rem] shadow-2xl active:scale-[0.97] hover:bg-black transition-all text-xs uppercase tracking-[0.2em] flex items-center justify-center gap-4 group",children:["Ir para o Pagamento",(0,a.jsx)("div",{className:"bg-white/10 p-1 rounded-lg group-hover:translate-x-1 transition-transform",children:(0,a.jsx)(U.A,{size:16,strokeWidth:3})})]}),(0,a.jsx)("p",{className:"text-center text-[9px] font-black text-slate-300 uppercase tracking-widest",children:"Retirada gr\xe1tis na unidade selecionada"})]})]})]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/60 backdrop-blur-md animate-fade-in overflow-y-auto p-2",children:(0,a.jsxs)("div",{className:"w-full max-w-5xl h-auto md:min-h-0 flex flex-col md:flex-row relative bg-white rounded-[2.5rem] md:rounded-[3rem] shadow-2xl overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>f(!1),className:"absolute top-5 right-5 z-50 p-2.5 text-slate-400 hover:text-slate-800 bg-slate-100 rounded-full transition-colors",children:(0,a.jsx)(C.A,{size:20})}),(0,a.jsx)("div",{className:"w-full md:w-1/2 p-6 md:p-16 bg-white flex flex-col justify-center border-r border-slate-50",children:(0,a.jsxs)("div",{className:"max-w-md w-full mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-brand-dark/40 font-bold text-[10px] uppercase tracking-widest",children:[(0,a.jsx)(tH.A,{size:18})," ",(0,a.jsx)("span",{children:"Checkout 100% Seguro"})]}),(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-black text-slate-800 mb-6 md:mb-8 tracking-tighter",children:"Pagamento"}),(0,a.jsx)("div",{className:"flex gap-1 mb-6 bg-slate-50 p-1 rounded-xl",children:["SAVED_CARD","NEW_CARD","PIX"].map(e=>(0,a.jsx)("button",{onClick:()=>D(e),className:"flex-1 py-2.5 text-[9px] md:text-[10px] font-black uppercase rounded-lg transition-all ".concat(z===e?"bg-white text-slate-900 shadow-md":"text-slate-400"),children:"SAVED_CARD"===e?"Cart\xe3o":"NEW_CARD"===e?"Novo":"Pix"},e))}),"GENERATING_PIX"===z?(0,a.jsxs)("div",{className:"text-center py-10 animate-pulse",children:[(0,a.jsx)(eS.A,{className:"animate-spin mx-auto text-emerald-500 mb-4",size:40}),(0,a.jsx)("p",{className:"text-xs font-black text-slate-600 uppercase tracking-widest",children:"Gerando Pix..."})]}):"PIX_DISPLAY"===z?(0,a.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,a.jsxs)("div",{className:"bg-slate-50 p-6 md:p-8 rounded-[2rem] border-2 border-emerald-100 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"bg-white p-3 rounded-[1.5rem] shadow-xl mb-4",children:(0,a.jsx)("img",{src:"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=BARVO_PIX_MOCK",className:"w-32 h-32 md:w-40 md:h-40",alt:"QR Pix"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-emerald-600 font-black",children:[(0,a.jsx)(eI.A,{size:18})," ",(0,a.jsx)("span",{className:"text-lg",children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(L)})]})]}),(0,a.jsx)("button",{onClick:J,className:"w-full bg-emerald-600 text-white py-4 rounded-xl font-black text-xs uppercase tracking-widest shadow-xl active:scale-95 transition-all",children:"J\xe1 paguei via Pix"})]}):(0,a.jsxs)("form",{className:"space-y-5",onSubmit:e=>{e.preventDefault(),"PIX"===z?(D("GENERATING_PIX"),setTimeout(()=>D("PIX_DISPLAY"),1500)):J()},children:["SAVED_CARD"===z&&(0,a.jsx)("div",{className:"space-y-2",children:null==(n=o.paymentMethods)?void 0:n.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>M(e.id),className:"w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all ".concat(P===e.id?"border-brand-dark bg-slate-50":"border-slate-100 bg-white"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:"https://img.icons8.com/color/48/".concat(e.brand,".png"),className:"h-5"}),(0,a.jsxs)("span",{className:"text-xs font-black text-slate-800",children:["•••• ",e.last4]})]}),(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center ".concat(P===e.id?"border-brand-dark bg-brand-dark":"border-slate-200"),children:P===e.id&&(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]},e.id))}),"NEW_CARD"===z&&(0,a.jsx)("div",{className:"space-y-3 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-200 flex items-center gap-3",children:[(0,a.jsx)(eE.A,{size:18,className:"text-slate-400"}),(0,a.jsx)("input",{required:!0,placeholder:"N\xfamero do cart\xe3o",className:"bg-transparent outline-none text-xs w-full font-bold",value:T.number,onChange:e=>B({...T,number:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex divide-x divide-slate-200",children:[(0,a.jsx)("input",{required:!0,placeholder:"MM/AA",className:"bg-transparent outline-none p-4 text-xs w-1/2 font-bold",value:T.expiry,onChange:e=>B({...T,expiry:e.target.value})}),(0,a.jsx)("input",{required:!0,placeholder:"CVC",className:"bg-transparent outline-none p-4 text-xs w-1/2 font-bold",value:T.cvc,onChange:e=>B({...T,cvc:e.target.value})})]})]})}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsxs)("button",{type:"button",onClick:()=>R(!E),className:"w-full flex items-center justify-between p-3 rounded-xl border-2 transition-all ".concat(E?"bg-blue-50 border-blue-200":"bg-slate-50 border-slate-100"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eD.A,{size:18,className:E?"text-blue-600":"text-slate-400"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("span",{className:"block font-black text-[10px] text-slate-800 uppercase tracking-widest",children:"Usar Fidelidade"}),(0,a.jsxs)("span",{className:"text-[9px] text-slate-400 font-bold",children:["Saldo: ",W," pts"]})]})]}),(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center ".concat(E?"bg-blue-600 border-blue-600":"border-slate-300"),children:E&&(0,a.jsx)(eC.A,{size:12,className:"text-white",strokeWidth:4})})]})}),(0,a.jsx)("button",{type:"submit",disabled:j||"SAVED_CARD"===z&&!P&&!!(null==(d=o.paymentMethods)?void 0:d.length),className:"w-full ".concat("PIX"===z?"bg-emerald-600":"bg-brand-dark"," text-white py-4 rounded-xl font-black text-xs uppercase tracking-widest shadow-2xl transition-all disabled:opacity-50 active:scale-95"),children:j?(0,a.jsx)(eS.A,{className:"animate-spin mx-auto",size:20}):"PIX"===z?"Gerar Qr Code Pix":"Pagar R$ ".concat(X.toFixed(2))})]})]})}),(0,a.jsx)("div",{className:"hidden md:flex w-1/2 p-16 bg-slate-50 flex-col justify-center",children:(0,a.jsxs)("div",{className:"max-w-sm w-full mx-auto",children:[(0,a.jsx)("h3",{className:"text-slate-400 font-black uppercase text-[10px] tracking-widest mb-10",children:"Resumo da Compra"}),(0,a.jsx)("div",{className:"space-y-6 max-h-[30vh] overflow-y-auto pr-4 custom-scrollbar mb-10",children:u.map(e=>(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.images[0],className:"w-14 h-14 rounded-xl object-cover shadow-lg border-2 border-white"}),(0,a.jsx)("span",{className:"absolute -top-1.5 -right-1.5 bg-slate-900 text-white text-[9px] font-black w-5 h-5 flex items-center justify-center rounded-full border-2 border-white",children:e.quantity})]}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("h4",{className:"font-bold text-slate-800 text-xs truncate",children:e.name})}),(0,a.jsxs)("span",{className:"font-black text-slate-900 text-xs",children:["R$ ",(e.price*e.quantity).toFixed(2)]})]},e.cartId))}),(0,a.jsxs)("div",{className:"space-y-2 pt-6 border-t-2 border-slate-200/50",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-slate-400 font-black uppercase tracking-widest",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:["R$ ",V.toFixed(2)]})]}),E&&(0,a.jsxs)("div",{className:"flex justify-between text-xs text-emerald-600 font-black uppercase tracking-widest",children:[(0,a.jsx)("span",{children:"Desconto"}),(0,a.jsxs)("span",{children:["- R$ ",H.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4 text-slate-900",children:[(0,a.jsx)("span",{className:"font-black text-sm uppercase tracking-widest",children:"Total"}),(0,a.jsxs)("span",{className:"text-3xl font-black tracking-tighter",children:["R$ ",X.toFixed(2)]})]})]})]})})]})}),N&&k&&(0,a.jsx)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-slate-900/90 backdrop-blur-md p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-sm overflow-hidden text-center p-8 md:p-12 border border-white/20",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-6 text-emerald-600",children:(0,a.jsx)(ea.A,{size:32,className:"animate-bounce"})}),(0,a.jsx)("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tighter",children:"Tudo pronto!"}),(0,a.jsx)("p",{className:"text-slate-500 text-xs font-medium mb-8",children:"Pedido confirmado. Retire seus itens no balc\xe3o da barbearia."}),(0,a.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-4 mb-8 flex items-center justify-between border border-slate-100",children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("span",{className:"text-[9px] text-slate-400 font-black uppercase block",children:"Pago"}),(0,a.jsxs)("span",{className:"text-xl font-black text-slate-900",children:["R$ ",k.total.toFixed(2)]})]}),k.pointsEarned>0&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-[9px] text-amber-600 font-black uppercase block",children:"Ganhou"}),(0,a.jsxs)("span",{className:"text-sm font-black text-amber-700",children:["+",k.pointsEarned," pts"]})]})]}),(0,a.jsx)("button",{onClick:()=>{y(!1)},className:"w-full bg-brand-dark text-white py-4 rounded-xl font-black text-xs uppercase tracking-widest shadow-xl active:scale-95 transition-all",children:"Continuar Navegando"})]})})]})};var t2=s(46398),t4=s(52472);let t5=e=>{let{orders:t,users:s,onUpdateStatus:r,onNavigate:i}=e,[n,o]=(0,l.useState)("ALL"),[c,m]=(0,l.useState)(""),[u,b]=(0,l.useState)(null),[p,h]=(0,l.useState)(""),g=t.filter(e=>{let t="ALL"===n||e.status===n,s=e.customerName.toLowerCase().includes(c.toLowerCase())||e.id.includes(c);return t&&s}),j=(e,t)=>{switch(e){case"PAID":return(0,a.jsx)("span",{className:"bg-emerald-100 text-emerald-700 text-[9px] font-black px-2 py-0.5 rounded uppercase",children:"Pago"});case"PREPARING":return(0,a.jsx)("span",{className:"bg-blue-100 text-blue-700 text-[9px] font-black px-2 py-0.5 rounded uppercase",children:"Preparando"});case"READY_FOR_PICKUP":return(0,a.jsx)("span",{className:"bg-indigo-100 text-indigo-700 text-[9px] font-black px-2 py-0.5 rounded uppercase",children:"Pronto p/ Retirada"});case"SHIPPED":return(0,a.jsx)("span",{className:"bg-purple-100 text-purple-700 text-[9px] font-black px-2 py-0.5 rounded uppercase",children:"DELIVERY"===t?"Saiu p/ Entrega":"Despachado"});case"DELIVERED":return(0,a.jsx)("span",{className:"bg-slate-100 text-slate-500 text-[9px] font-black px-2 py-0.5 rounded uppercase",children:"Conclu\xeddo"});case"CANCELLED":return(0,a.jsx)("span",{className:"bg-red-100 text-red-700 text-[9px] font-black px-2 py-0.5 rounded uppercase",children:"Cancelado"});default:return(0,a.jsx)("span",{className:"bg-slate-100 text-slate-400 text-[9px] font-black px-2 py-0.5 rounded uppercase",children:"Pendente"})}},v=e=>{u&&(r(u.id,e,p||void 0),b(null),h(""))};return(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in pb-10",children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 border-b border-slate-100 pb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-slate-800 tracking-tight flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"text-blue-500"})," Gest\xe3o de Pedidos"]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Controle de faturamento e log\xedstica da loja."})]})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(tA.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por cliente ou ID...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 text-sm font-medium",value:c,onChange:e=>m(e.target.value)})]}),(0,a.jsxs)("select",{className:"bg-white border border-slate-200 rounded-xl px-4 py-2 text-xs font-bold text-slate-600 outline-none cursor-pointer",value:n,onChange:e=>o(e.target.value),children:[(0,a.jsx)("option",{value:"ALL",children:"Todos Status"}),(0,a.jsx)("option",{value:"PAID",children:"Pagos (Novos)"}),(0,a.jsx)("option",{value:"PREPARING",children:"Em Preparo"}),(0,a.jsx)("option",{value:"SHIPPED",children:"Em Rota / Enviados"}),(0,a.jsx)("option",{value:"DELIVERED",children:"Entregues"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500 text-[10px] font-black uppercase tracking-widest border-b border-slate-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-center w-20",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Cliente"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Itens"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Tipo"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"Valor"}),(0,a.jsx)("th",{className:"px-6 py-4 text-center",children:"A\xe7\xf5es"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===g.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-400 text-sm font-medium italic",children:"Nenhum pedido encontrado no momento."})}):g.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors group cursor-pointer",onClick:()=>b(e),children:[(0,a.jsxs)("td",{className:"px-6 py-4 text-center font-mono text-[10px] text-slate-400",children:["#",e.id.slice(-6).toUpperCase()]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("p",{className:"font-bold text-slate-800 text-sm",children:e.customerName}),(0,a.jsx)("p",{className:"text-[10px] text-slate-400",children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex -space-x-2",children:[e.items.slice(0,3).map((e,t)=>(0,a.jsx)("img",{src:e.images[0],className:"w-7 h-7 rounded-lg border-2 border-white object-cover shadow-sm",title:e.name},t)),e.items.length>3&&(0,a.jsxs)("div",{className:"w-7 h-7 rounded-lg bg-slate-100 border-2 border-white flex items-center justify-center text-[10px] font-black text-slate-500",children:["+",e.items.length-3]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"text-[10px] font-bold uppercase tracking-tighter flex items-center gap-1 ".concat("DELIVERY"===e.deliveryMethod?"text-amber-600":"text-slate-500"),children:["PICKUP"===e.deliveryMethod?(0,a.jsx)(w.A,{size:12}):(0,a.jsx)(t2.A,{size:12}),"PICKUP"===e.deliveryMethod?"Retirada":"Entrega"]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:j(e.status,e.deliveryMethod)}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right font-black text-slate-900 text-sm",children:["R$ ",e.totalAmount.toFixed(2)]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),b(e)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all active:scale-90",children:(0,a.jsx)(tf.A,{size:16})})})]},e.id))})]})})}),u&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-4xl overflow-hidden border border-slate-100 animate-slide-in flex flex-col md:flex-row h-full md:h-auto max-h-[90vh]",children:[(0,a.jsxs)("div",{className:"w-full md:w-72 bg-slate-50 border-r border-slate-100 p-6 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Informa\xe7\xf5es do Cliente"}),(0,a.jsx)("button",{onClick:()=>b(null),className:"md:hidden p-2",children:(0,a.jsx)(C.A,{size:20})})]}),(()=>{let e,l,r=(e=u.customerId,s.find(t=>t.id===e)),i=(l=u.customerId,t.filter(e=>e.customerId===l).length);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(d,{url:null==r?void 0:r.avatar,name:null==r?void 0:r.name,size:"md",className:"!w-14 !h-14 border-2 border-white shadow-sm"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-slate-800 text-sm leading-tight",children:u.customerName}),(0,a.jsx)("p",{className:"text-[10px] text-slate-400 mt-1 font-bold uppercase",children:(null==r?void 0:r.membershipId)?"Clube Barvo":"Cliente Avulso"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-600",children:[(0,a.jsx)(tM.A,{size:14,className:"text-slate-400"}),(0,a.jsx)("span",{className:"font-medium",children:(null==r?void 0:r.phone)||"(11) 99999-0000"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-600",children:[(0,a.jsx)(te.A,{size:14,className:"text-slate-400"}),(0,a.jsx)("span",{className:"truncate font-medium",children:(null==r?void 0:r.email)||"cliente@email.com"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm",children:[(0,a.jsx)("p",{className:"text-[8px] font-black text-slate-400 uppercase mb-1",children:"Pontos"}),(0,a.jsxs)("p",{className:"text-sm font-black text-amber-600 flex items-center gap-1",children:[(0,a.jsx)(t4.A,{size:12})," ",(null==r?void 0:r.points)||0]})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm",children:[(0,a.jsx)("p",{className:"text-[8px] font-black text-slate-400 uppercase mb-1",children:"Pedidos"}),(0,a.jsxs)("p",{className:"text-sm font-black text-slate-800 flex items-center gap-1",children:[(0,a.jsx)(tF.A,{size:12})," ",i]})]})]}),"DELIVERY"===u.deliveryMethod&&(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-100 rounded-xl",children:[(0,a.jsxs)("p",{className:"text-[9px] font-black text-amber-700 uppercase mb-2 flex items-center gap-1",children:[(0,a.jsx)(tX.A,{size:10})," Endere\xe7o p/ Entrega"]}),(0,a.jsxs)("p",{className:"text-[10px] text-amber-900 leading-relaxed font-bold",children:["Rua das Flores, 123 - Ap 42",(0,a.jsx)("br",{}),"Jardim Paulista, S\xe3o Paulo - SP"]})]})]})})(),(0,a.jsx)("div",{className:"mt-auto pt-6 border-t border-slate-200 hidden md:block",children:(0,a.jsxs)("button",{onClick:()=>{i("crm"),b(null)},className:"w-full py-3 bg-brand-dark text-white rounded-xl text-[10px] font-black uppercase hover:bg-black transition-all flex items-center justify-center gap-2 active:scale-95 shadow-lg",children:[(0,a.jsx)(y.A,{size:14})," Ver CRM Completo"]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-white",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/30",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-slate-800",children:["Pedido #",u.id.slice(-6).toUpperCase()]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Log\xedstica e Controle Financeiro"})]}),(0,a.jsx)("button",{onClick:()=>b(null),className:"p-2 text-slate-400 hover:text-slate-800 transition-colors hidden md:block",children:(0,a.jsx)(C.A,{})})]}),(0,a.jsxs)("div",{className:"p-6 flex-1 overflow-y-auto space-y-8 custom-scrollbar",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[(0,a.jsx)("div",{className:"p-3 bg-brand-dark text-white rounded-xl",children:(0,a.jsx)(f.A,{size:20})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Estado Atual"}),(0,a.jsx)("div",{className:"mt-1",children:j(u.status,u.deliveryMethod)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pagamento"}),(0,a.jsx)("p",{className:"text-xs font-black text-slate-800 uppercase",children:"PIX"===u.paymentMethod?"Instant\xe2neo":"Cr\xe9dito"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Processamento"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,a.jsxs)("button",{onClick:()=>v("PREPARING"),className:"w-full py-3.5 bg-white border border-slate-200 rounded-xl text-[11px] font-black uppercase text-slate-700 hover:border-blue-500 hover:text-blue-600 transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(x.A,{size:14})," Iniciar Preparo"]}),"PICKUP"===u.deliveryMethod?(0,a.jsxs)("button",{onClick:()=>v("READY_FOR_PICKUP"),className:"w-full py-3.5 bg-indigo-600 text-white rounded-xl text-[11px] font-black uppercase hover:bg-indigo-700 transition-all flex items-center justify-center gap-2 shadow-xl shadow-indigo-500/10",children:[(0,a.jsx)(w.A,{size:14})," Pronto p/ Retirada"]}):(0,a.jsxs)("button",{onClick:()=>v("SHIPPED"),className:"w-full py-3.5 bg-purple-600 text-white rounded-xl text-[11px] font-black uppercase hover:bg-purple-700 transition-all flex items-center justify-center gap-2 shadow-xl shadow-purple-500/10",children:[(0,a.jsx)(t2.A,{size:14})," Saiu para Entrega"]}),(0,a.jsxs)("button",{onClick:()=>v("DELIVERED"),className:"w-full py-3.5 bg-emerald-600 text-white rounded-xl text-[11px] font-black uppercase hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(ea.A,{size:14})," Confirmar Conclus\xe3o"]}),(0,a.jsxs)("button",{onClick:()=>v("CANCELLED"),className:"w-full py-3 bg-white border border-red-100 text-red-500 rounded-xl text-[11px] font-black uppercase hover:bg-red-50 transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(tw.A,{size:14})," Cancelar Pedido"]})]}),"DELIVERY"===u.deliveryMethod&&(0,a.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"C\xf3digo de Rastreio"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Ex: BR123...",className:"flex-1 p-3 bg-slate-50 border border-slate-200 rounded-xl text-xs font-bold uppercase outline-none focus:ring-2 focus:ring-blue-500",value:p,onChange:e=>h(e.target.value)}),(0,a.jsx)("button",{onClick:()=>v(u.status),className:"p-3 bg-slate-900 text-white rounded-xl hover:bg-black transition-all",children:(0,a.jsx)(eR.A,{size:16})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-100",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"An\xe1lise Financeira"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs font-bold text-slate-500",children:[(0,a.jsx)("span",{children:"Venda Bruta"}),(0,a.jsxs)("span",{children:["R$ ",u.totalAmount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs font-bold text-slate-500",children:[(0,a.jsx)("span",{children:"Taxa Adquirente"}),(0,a.jsxs)("span",{children:["- R$ ",(.05*u.totalAmount).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t border-slate-200 flex justify-between items-center text-slate-900",children:[(0,a.jsx)("span",{className:"font-black text-[10px] uppercase",children:"L\xedquido Estimado"}),(0,a.jsxs)("span",{className:"text-xl font-black",children:["R$ ",(.95*u.totalAmount).toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:["Carrinho (",u.items.length,")"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:u.items.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2.5 hover:bg-slate-50 rounded-xl transition-all border border-transparent hover:border-slate-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:e.images[0],className:"w-10 h-10 rounded-lg object-cover shadow-sm"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs font-black text-slate-800",children:[e.quantity,"x ",e.name]}),(0,a.jsx)("p",{className:"text-[9px] text-slate-400 uppercase font-bold",children:e.category})]})]}),(0,a.jsxs)("span",{className:"font-black text-slate-900 text-xs",children:["R$ ",(e.price*e.quantity).toFixed(2)]})]},e.cartId))})]})]})]})]})]})]})})]})},t6={PENDING_PAYMENT:{label:"Aguardando Pagamento",color:"text-amber-500",step:0},PAID:{label:"Pagamento Confirmado",color:"text-blue-500",step:1},PREPARING:{label:"Em Prepara\xe7\xe3o",color:"text-indigo-500",step:2},READY_FOR_PICKUP:{label:"Pronto para Retirada",color:"text-emerald-500",step:3},SHIPPED:{label:"Em Transporte",color:"text-purple-500",step:3},DELIVERED:{label:"Entregue",color:"text-emerald-600",step:4},CANCELLED:{label:"Cancelado",color:"text-red-500",step:-1}},t3=e=>{let{orders:t,onNavigate:s,onRepeatOrder:r}=e,[i,n]=(0,l.useState)(null);return(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in pb-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Meus Pedidos"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Acompanhe suas compras na loja Barvo."})]}),(0,a.jsxs)("button",{onClick:()=>s("shop"),className:"text-xs font-bold text-blue-600 flex items-center gap-1 hover:underline",children:[(0,a.jsx)(w.A,{size:14})," Ir para a loja"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-slate-200",children:[(0,a.jsx)(f.A,{size:48,className:"mx-auto text-slate-200 mb-4"}),(0,a.jsx)("p",{className:"text-slate-400 font-medium text-sm",children:"Voc\xea ainda n\xe3o fez nenhum pedido."})]}):t.map(e=>{let t=t6[e.status],s=i===e.id;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden transition-all hover:shadow-md",children:[(0,a.jsxs)("div",{className:"p-5 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 cursor-pointer",onClick:()=>n(s?null:e.id),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(4===t.step?"bg-emerald-50 text-emerald-600":"bg-slate-50 text-brand-dark"),children:(0,a.jsx)(f.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("h3",{className:"font-bold text-slate-800 text-sm",children:["Pedido #",e.id.slice(-6).toUpperCase()]}),(0,a.jsx)("span",{className:"text-[9px] font-black uppercase px-2 py-0.5 rounded-full ".concat(t.color.replace("text","bg"),"/10 ").concat(t.color),children:t.label})]}),(0,a.jsxs)("p",{className:"text-[10px] text-slate-400 mt-1",children:["Realizado em ",new Date(e.createdAt).toLocaleDateString("pt-BR")," • ",e.items.reduce((e,t)=>e+t.quantity,0)," itens"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 w-full md:w-auto justify-between md:justify-end",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Total"}),(0,a.jsxs)("p",{className:"text-sm font-black text-slate-900",children:["R$ ",e.totalAmount.toFixed(2)]})]}),(0,a.jsx)(Q.A,{size:20,className:"text-slate-300 transition-transform ".concat(s?"rotate-90":"")})]})]}),s&&(0,a.jsxs)("div",{className:"px-5 pb-6 pt-2 border-t border-slate-50 bg-slate-50/30 animate-fade-in",children:[(0,a.jsxs)("div",{className:"py-8 px-4 flex justify-between relative max-w-lg mx-auto",children:[(0,a.jsx)("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-slate-100 -translate-y-1/2 z-0"}),[{icon:x.A,label:"Pagamento"},{icon:w.A,label:"Preparo"},{icon:t2.A,label:"PICKUP"===e.deliveryMethod?"Retirada":"Transporte"},{icon:ea.A,label:"Conclu\xeddo"}].map((e,s)=>(0,a.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center border-4 border-white shadow-sm transition-all ".concat(t.step>=s+1?"bg-brand-dark text-white":"bg-slate-100 text-slate-400"),children:(0,a.jsx)(e.icon,{size:14})}),(0,a.jsx)("span",{className:"text-[8px] font-black uppercase tracking-tighter ".concat(t.step>=s+1?"text-brand-dark":"text-slate-400"),children:e.label})]},s))]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Resumo dos Itens"}),(0,a.jsx)("div",{className:"space-y-3",children:e.items.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-3 rounded-xl border border-slate-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:e.images[0],className:"w-10 h-10 rounded-lg object-cover"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-800",children:e.name}),(0,a.jsxs)("p",{className:"text-[10px] text-slate-400",children:[e.quantity,"x R$ ",e.price.toFixed(2)]})]})]}),(0,a.jsxs)("span",{className:"text-xs font-bold text-slate-900",children:["R$ ",(e.price*e.quantity).toFixed(2)]})]},e.cartId))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Log\xedstica & Rastreio"}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-slate-100 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(tX.A,{size:16,className:"text-slate-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-800",children:"PICKUP"===e.deliveryMethod?"Retirada na Loja Augusta":"Entrega no Endere\xe7o"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-400 leading-relaxed",children:"Rua Augusta, 1500 - Consola\xe7\xe3o, S\xe3o Paulo - SP"})]})]}),e.trackingCode&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-[9px] font-black text-blue-700 uppercase",children:"C\xf3digo de Rastreio"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-blue-900",children:e.trackingCode})]}),(0,a.jsx)("button",{className:"w-full py-2 bg-blue-600 text-white text-[10px] font-bold rounded-lg hover:bg-blue-700 transition-colors uppercase tracking-widest",children:"Ver Mapa de Entrega"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)("button",{onClick:()=>r(e),className:"flex-1 py-3 bg-slate-900 text-white text-[10px] font-black uppercase rounded-lg shadow-md flex items-center justify-center gap-2 active:scale-95 transition-all",children:[(0,a.jsx)(tv.A,{size:14})," Repetir Pedido"]}),(0,a.jsxs)("button",{className:"flex-1 py-3 bg-white border border-slate-200 text-slate-700 text-[10px] font-black uppercase rounded-lg flex items-center justify-center gap-2 hover:bg-slate-50 transition-all",children:[(0,a.jsx)(ti.A,{size:14})," Suporte"]})]})]})]})]})]})]},e.id)})})]})};var t8=s(50906),t9=s(30814),t7=s(48055);let se=e=>{var t,s,r;let{services:i,plans:n,setPlans:o,currentUser:c}=e,[x,m]=(0,l.useState)("membership"),[h,g]=(0,l.useState)(null),[f,j]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[y,k]=(0,l.useState)(null),[A,S]=(0,l.useState)(""),[I,E]=(0,l.useState)(0),[R,z]=(0,l.useState)({}),[D,P]=(0,l.useState)({name:"",price:0,servicesPerMonth:2,includedServiceIds:[],includesBeard:!1,cac:25});n.find(e=>e.id===h),(0,l.useEffect)(()=>{E(e_()),z(eU())},[]);let M=eo.filter(e=>e.membershipId||eL(e.id)),T=(()=>{let e=i.filter(e=>D.includedServiceIds.includes(e.id)),t=e.length?e.reduce((e,t)=>e+t.price,0)/e.length:0,s=e.length?e.reduce((e,t)=>e+t.cost,0)/e.length:0,a=s*D.servicesPerMonth,l=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2;return e<=0?0:(e-(t+e*s+.025*e))/e*100}(D.price,a),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;return e*t}(D.price-a,12);return{avgServicePrice:t,avgServiceCost:s,monthlyServicesCost:a,margin:Math.max(0,l),ltv:Math.max(0,r),break_even_months:a>0?Math.ceil(D.price/a):0}})(),B=e=>{let{title:t,value:s,trend:l,icon:r,color:i}=e;return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm flex flex-col justify-between group hover:shadow-md transition-all",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("div",{className:"p-3 rounded-2xl ".concat(i),children:r}),(0,a.jsx)("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full text-emerald-600 bg-emerald-50",children:l})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:t}),(0,a.jsx)("h3",{className:"text-3xl font-black text-brand-dark tracking-tighter",children:s})]})]})};return(0,a.jsxs)("div",{className:"space-y-8 animate-fade-in pb-10",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-brand-dark tracking-tight",children:"Estrat\xe9gia & Crescimento"}),(0,a.jsx)("p",{className:"text-brand-midGray mt-1 font-medium",children:"Gest\xe3o inteligente de planos e reten\xe7\xe3o."})]}),(0,a.jsxs)("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 shadow-sm",children:[(0,a.jsx)("button",{onClick:()=>m("membership"),className:"px-4 py-2 rounded-xl text-xs font-bold transition-all ".concat("membership"===x?"bg-brand-dark text-white":"text-slate-400"),children:"Clubes"}),(0,a.jsx)("button",{onClick:()=>m("subscribers"),className:"px-4 py-2 rounded-xl text-xs font-bold transition-all ".concat("subscribers"===x?"bg-brand-dark text-white":"text-slate-400"),children:"Relat\xf3rio Assinantes"}),(0,a.jsx)("button",{onClick:()=>m("analysis"),className:"px-4 py-2 rounded-xl text-xs font-bold transition-all ".concat("analysis"===x?"bg-brand-dark text-white":"text-slate-400"),children:"An\xe1lise"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(B,{title:"Receita Recorrente (MRR)",value:"R$ ".concat(ey.mrr.toFixed(2)),trend:"+15%",icon:(0,a.jsx)(tv.A,{size:20}),color:"bg-blue-50 text-blue-600"}),(0,a.jsx)(B,{title:"Churn Rate",value:"".concat(ey.churnRate,"%"),trend:"-2%",icon:(0,a.jsx)(t8.A,{size:20}),color:"bg-red-50 text-red-600"}),(0,a.jsx)(B,{title:"Membros Ativos",value:I.toString(),trend:"+".concat(I>0?I:0),icon:(0,a.jsx)(N.A,{size:20}),color:"bg-emerald-50 text-emerald-600"}),(0,a.jsx)(B,{title:"LTV M\xe9dio",value:"R$ ".concat(ey.clv.toFixed(0)),trend:"+R$ 20",icon:(0,a.jsx)(t9.A,{size:20}),color:"bg-amber-50 text-amber-600"})]}),"membership"===x&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.map(e=>(0,a.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-light/5 rounded-full blur-3xl -mr-16 -mt-16"}),(0,a.jsxs)("div",{className:"relative z-10 flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-black text-brand-dark tracking-tighter",children:e.name}),(0,a.jsxs)("p",{className:"text-sm font-bold text-slate-400 mb-4 uppercase tracking-widest",children:[e.servicesPerMonth," servi\xe7os p/ m\xeas"]}),(0,a.jsxs)("div",{className:"text-3xl font-black text-brand-dark mb-6",children:["R$ ",e.price.toFixed(2)," ",(0,a.jsx)("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"/ mensal"})]})]}),(0,a.jsxs)("div",{className:"bg-emerald-50 text-emerald-600 px-4 py-2 rounded-2xl font-bold text-xs uppercase border border-emerald-100",children:[e.activeMembers," Ativos"]})]}),(0,a.jsxs)("div",{className:"pt-6 border-t border-slate-50 flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{k(e.id),w(!0)},className:"flex-1 py-3 bg-brand-dark text-white rounded-xl text-xs font-bold hover:bg-black transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(tQ.A,{size:16})," Assinar Plano"]}),(0,a.jsx)("button",{className:"p-3 bg-slate-100 text-slate-400 rounded-xl hover:text-brand-dark transition-all",children:(0,a.jsx)(b.A,{size:18})})]})]},e.id)),(0,a.jsxs)("button",{onClick:()=>j(!0),className:"bg-slate-50 border-2 border-dashed border-slate-200 rounded-[2.5rem] p-8 flex flex-col items-center justify-center gap-3 text-slate-400 hover:border-brand-dark hover:text-brand-dark transition-all group",children:[(0,a.jsx)(K.A,{size:40,className:"group-hover:scale-110 transition-transform"}),(0,a.jsx)("span",{className:"font-bold",children:"Criar Novo Clube Barvo"})]})]}),"subscribers"===x&&(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-sm overflow-hidden animate-fade-in",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-100 flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-brand-dark flex items-center gap-2",children:[(0,a.jsx)(N.A,{size:20,className:"text-blue-500"})," Relat\xf3rio de Assinantes"]}),(0,a.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,a.jsx)(tA.A,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Filtrar por nome...",className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 text-sm",value:A,onChange:e=>S(e.target.value)})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500 text-[10px] font-bold uppercase tracking-widest",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Assinante"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Plano"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Ativo desde"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"Hist\xf3rico / Migra\xe7\xe3o"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:M.filter(e=>e.name.toLowerCase().includes(A.toLowerCase())).map(e=>{let t=n.find(t=>t.id===e.membershipId);return(0,a.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d,{url:e.avatar,name:e.name,size:"sm",className:"!w-10 !h-10"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-brand-dark text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-[10px] text-slate-400",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"font-bold text-slate-700 text-sm",children:null==t?void 0:t.name})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-slate-500",children:e.membershipStartDate||"12/10/2023"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-black px-2 py-1 rounded uppercase",children:"Ativo"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("button",{className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors group",title:"Ver Migra\xe7\xf5es",children:(0,a.jsx)(tF.A,{size:18})})})]},e.id)})})]})})]}),v&&y&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-md p-4 transition-all duration-300",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-md overflow-hidden border border-slate-100 animate-fade-in relative",children:[(0,a.jsx)("button",{onClick:()=>{w(!1),k(null)},className:"absolute top-6 right-6 p-3 bg-slate-100 text-slate-400 hover:text-brand-dark hover:bg-slate-200 rounded-full transition-all z-20",children:(0,a.jsx)(C.A,{size:20,strokeWidth:3})}),(0,a.jsxs)("div",{className:"p-8 bg-gradient-to-r from-brand-dark to-black text-white text-center",children:[(0,a.jsx)(tu.A,{size:40,className:"mx-auto mb-4 text-amber-400 fill-amber-400"}),(0,a.jsx)("h3",{className:"text-2xl font-black tracking-tighter mb-2",children:"Ativar Assinatura"}),(0,a.jsx)("p",{className:"text-slate-300 text-sm",children:"Desfrute de benef\xedcios exclusivos do plano"})]}),(0,a.jsx)("div",{className:"p-8 space-y-6",children:n.find(e=>e.id===y)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6 text-center border border-slate-100",children:[(0,a.jsx)("h4",{className:"text-2xl font-black text-brand-dark mb-2",children:null==(t=n.find(e=>e.id===y))?void 0:t.name}),(0,a.jsxs)("div",{className:"text-4xl font-black text-brand-dark mb-2",children:["R$ ",null==(s=n.find(e=>e.id===y))?void 0:s.price.toFixed(2)]}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"por m\xeas"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h5",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Benef\xedcios Inclusos:"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(ea.A,{size:18,className:"text-emerald-500 mt-0.5 flex-shrink-0",fill:"currentColor"}),(0,a.jsxs)("span",{className:"text-sm text-slate-700",children:[null==(r=n.find(e=>e.id===y))?void 0:r.servicesPerMonth,"x Servi\xe7os por m\xeas"]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(ea.A,{size:18,className:"text-emerald-500 mt-0.5 flex-shrink-0",fill:"currentColor"}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"15% de desconto em cada servi\xe7o"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(ea.A,{size:18,className:"text-emerald-500 mt-0.5 flex-shrink-0",fill:"currentColor"}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Prioridade no agendamento"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(ea.A,{size:18,className:"text-emerald-500 mt-0.5 flex-shrink-0",fill:"currentColor"}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Suporte priorit\xe1rio"})]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex gap-3",children:[(0,a.jsx)(W.A,{size:18,className:"text-blue-600 flex-shrink-0"}),(0,a.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,a.jsx)("span",{className:"font-bold",children:"Simula\xe7\xe3o:"})," Este \xe9 um checkout mockado para demonstra\xe7\xe3o. O plano ser\xe1 ativado imediatamente."]})]}),(0,a.jsxs)("button",{onClick:()=>(e=>{if(!c)return void alert("Fa\xe7a login para assinar um plano");let t=function(e,t){let s=eU();return s[e]?{success:!1,message:"Cliente j\xe1 possui assinatura ativa"}:(s[e]={planId:t,startDate:new Date().toISOString()},localStorage.setItem(eM,JSON.stringify(s)),eF(e),{success:!0,message:"Assinatura ativada com sucesso"})}(c.id,e);t.success?(E(e_()),z(eU()),w(!1),k(null),alert("✅ ".concat(t.message,"\n\nVoc\xea agora est\xe1 inscrito no plano e pode aproveitar os benef\xedcios!"))):alert("⚠️ ".concat(t.message))})(y),className:"w-full py-4 bg-brand-dark text-white font-black text-lg rounded-2xl shadow-xl hover:bg-black transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(tQ.A,{size:20})," Confirmar Assinatura"]}),(0,a.jsx)("p",{className:"text-[10px] text-slate-400 text-center",children:"Voc\xea pode cancelar ou alterar seu plano a qualquer momento."})]})})]})}),f&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-md p-4 transition-all duration-300",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-2xl overflow-hidden border border-slate-100 max-h-[90vh] flex flex-col animate-fade-in relative",children:[(0,a.jsx)("button",{onClick:()=>j(!1),className:"absolute top-6 right-6 p-3 bg-slate-100 text-slate-400 hover:text-brand-dark hover:bg-slate-200 rounded-full transition-all z-20 shadow-sm",children:(0,a.jsx)(C.A,{size:20,strokeWidth:3})}),(0,a.jsxs)("div",{className:"p-8 md:p-10 border-b border-slate-50 bg-slate-50/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(tu.A,{size:24,className:"text-amber-500 fill-amber-500"}),(0,a.jsx)("h3",{className:"text-2xl font-black text-brand-dark tracking-tighter",children:"Criador de Clubes Barvo"})]}),(0,a.jsx)("p",{className:"text-slate-500 text-sm font-medium",children:"Configure a recorr\xeancia e benef\xedcios exclusivos para seus clientes."})]}),(0,a.jsxs)("div",{className:"p-8 md:p-10 overflow-y-auto space-y-8 custom-scrollbar",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:"Nome do Plano"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tL.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Ex: Premium Mensal",className:"w-full pl-12 pr-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-brand-dark focus:bg-white text-slate-900 font-bold text-lg placeholder:text-slate-300 transition-all shadow-sm",value:D.name,onChange:e=>P({...D,name:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:"Mensalidade (R$)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(t7.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),(0,a.jsx)("input",{type:"number",className:"w-full pl-12 pr-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-brand-dark focus:bg-white text-slate-900 font-bold text-lg shadow-sm",value:D.price||99,onChange:e=>P({...D,price:Number(e.target.value)})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:"Frequ\xeancia / M\xeas"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(t_.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),(0,a.jsx)("input",{type:"number",className:"w-full pl-12 pr-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-brand-dark focus:bg-white text-slate-900 font-bold text-lg shadow-sm",value:D.servicesPerMonth,onChange:e=>P({...D,servicesPerMonth:Number(e.target.value)})})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(p.A,{size:14,className:"text-slate-400"}),(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Incluso no Plano"})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar bg-slate-50/50 p-2 rounded-2xl border border-slate-100",children:i.map(e=>(0,a.jsxs)("button",{onClick:()=>(e=>{P(t=>({...t,includedServiceIds:t.includedServiceIds.includes(e)?t.includedServiceIds.filter(t=>t!==e):[...t.includedServiceIds,e]}))})(e.id),className:"w-full flex justify-between items-center p-3.5 rounded-xl border transition-all ".concat(D.includedServiceIds.includes(e.id)?"bg-brand-dark text-white border-brand-dark":"bg-white text-slate-600 border-slate-200"),children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-xs font-bold mb-1",children:e.name}),(0,a.jsxs)("p",{className:"text-[10px] ".concat(D.includedServiceIds.includes(e.id)?"text-brand-light/60":"text-slate-400"),children:["Valor avulso: R$ ",e.price]})]}),D.includedServiceIds.includes(e.id)&&(0,a.jsx)(ea.A,{size:18,className:"text-brand-light",fill:"currentColor"})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900 rounded-[2.5rem] p-8 text-white relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-light/10 rounded-full blur-3xl -mr-16 -mt-16"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-6 border-b border-white/10 pb-4",children:[(0,a.jsx)(u.A,{size:18,className:"text-brand-light"}),(0,a.jsx)("h4",{className:"font-black text-brand-light uppercase tracking-widest text-xs",children:"An\xe1lise de Lucratividade"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[10px] text-slate-400 font-bold uppercase block mb-1",children:"Margem"}),(0,a.jsxs)("span",{className:"text-2xl font-black ".concat(T.margin>=50?"text-emerald-400":T.margin>=30?"text-amber-400":"text-red-400"),children:[T.margin.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[10px] text-slate-400 font-bold uppercase block mb-1",children:"Custo Mensal"}),(0,a.jsxs)("span",{className:"text-2xl font-black text-slate-300",children:["R$ ",T.monthlyServicesCost.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[10px] text-slate-400 font-bold uppercase block mb-1",children:"LTV Anual"}),(0,a.jsxs)("span",{className:"text-2xl font-black text-blue-400",children:["R$ ",T.ltv.toFixed(0)]})]})]})]}),(0,a.jsx)("button",{onClick:()=>{o([{id:"plan_".concat(Date.now()),name:D.name||"Novo Plano",price:D.price||99,servicesPerMonth:D.servicesPerMonth,includedServiceIds:D.includedServiceIds,includesBeard:D.includesBeard,benefits:["".concat(D.servicesPerMonth,"x Servi\xe7os/m\xeas")],activeMembers:0,utilizationRate:0,revenueGenerated:0},...n]),j(!1)},disabled:0===D.includedServiceIds.length||!D.name,className:"w-full py-5 bg-brand-dark text-white font-black text-lg rounded-2xl shadow-2xl hover:bg-black transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"Ativar Clube de Assinatura"})]})]})})]})};var st=s(7013),ss=s(67840),sa=s(41740),sl=s(80019),sr=s(47643),si=s(7620);let sn=e=>{let{appointments:t,membershipPlans:s,services:r,users:i}=e,[n,d]=(0,l.useState)("3m"),[o,c]=(0,l.useState)("revenue"),m=e_();e_();let p=s.reduce((e,t)=>e+t.price*t.activeMembers,0),h=12*p,g=s.length>0?s.reduce((e,t)=>e+12*t.price,0)/s.length:0,f=new Date,j=t.filter(e=>{let t=new Date(e.startTime);return t.getMonth()===f.getMonth()&&t.getFullYear()===f.getFullYear()}).length,w=t.reduce((e,t)=>{let s=r.find(e=>e.id===t.serviceId);return e+((null==s?void 0:s.price)||0)},0),y=p+w,k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,a=[e];for(let e=1;e<s;e++){let s=a[e-1]*(1+t);a.push(s)}return a}(p,.12,12),A=k.map((e,t)=>({month:"M".concat(t+1),MRR:Math.round(e),forecast:!0})),C=[{name:"Assinaturas",value:p,color:"#3b82f6"},{name:"Avulso",value:w,color:"#10b981"}],S=i.filter(e=>"CUSTOMER"===e.role).length,I=S-m,E=[{name:"Assinantes",value:m,color:"#8b5cf6"},{name:"Ocasionais",value:I,color:"#f59e0b"}],R=e=>{let{title:t,value:s,trend:l,icon:r,color:i,suffix:n=""}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] border border-slate-100 p-6 shadow-sm hover:shadow-md transition-all",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(i),children:r}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-full ".concat(l>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"),children:[l>=0?(0,a.jsx)(st.A,{size:14}):(0,a.jsx)(ss.A,{size:14}),(0,a.jsxs)("span",{children:[Math.abs(l),"%"]})]})]}),(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:t}),(0,a.jsxs)("p",{className:"text-2xl font-black text-slate-900",children:[s,n]})]})};return(0,a.jsxs)("div",{className:"space-y-8 pb-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-black text-brand-dark tracking-tight",children:"Vis\xe3o do Investidor"}),(0,a.jsx)("p",{className:"text-brand-midGray mt-1 font-medium",children:"M\xe9tricas e Proje\xe7\xf5es de Crescimento"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(R,{title:"MRR (Receita Recorrente)",value:"R$ ".concat(p.toFixed(0)),trend:15,icon:(0,a.jsx)(v.A,{size:20,className:"text-blue-600"}),color:"bg-blue-50"}),(0,a.jsx)(R,{title:"ARR (Receita Anual)",value:"R$ ".concat(h.toFixed(0)),trend:15,icon:(0,a.jsx)(u.A,{size:20,className:"text-green-600"}),color:"bg-green-50"}),(0,a.jsx)(R,{title:"Membros Ativos",value:m,trend:8,icon:(0,a.jsx)(N.A,{size:20,className:"text-purple-600"}),color:"bg-purple-50"}),(0,a.jsx)(R,{title:"LTV M\xe9dio",value:"R$ ".concat(g.toFixed(0)),trend:12,icon:(0,a.jsx)(t9.A,{size:20,className:"text-amber-600"}),color:"bg-amber-50"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(R,{title:"Churn Rate",value:2,trend:-2,icon:(0,a.jsx)(t8.A,{size:20,className:"text-red-600"}),color:"bg-red-50",suffix:"%"}),(0,a.jsx)(R,{title:"Agendamentos (m\xeas)",value:j,trend:20,icon:(0,a.jsx)(x.A,{size:20,className:"text-cyan-600"}),color:"bg-cyan-50"}),(0,a.jsx)(R,{title:"Receita Total (m\xeas)",value:"R$ ".concat(y.toFixed(0)),trend:18,icon:(0,a.jsx)(eR.A,{size:20,className:"text-yellow-600"}),color:"bg-yellow-50"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] border border-slate-100 p-8 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-black text-slate-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(sa.A,{size:20,className:"text-blue-600"}),"Proje\xe7\xe3o de MRR (12 meses)"]}),(0,a.jsx)(M.u,{width:"100%",height:300,children:(0,a.jsxs)(sl.b,{data:A,children:[(0,a.jsx)(B.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(L.W,{dataKey:"month",stroke:"#9ca3af"}),(0,a.jsx)(O.h,{stroke:"#9ca3af"}),(0,a.jsx)(_.m,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"0.75rem"},formatter:e=>"R$ ".concat(e)}),(0,a.jsx)(sr.N,{type:"monotone",dataKey:"MRR",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6"}})]})}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-slate-100",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Proje\xe7\xe3o:"}),(0,a.jsxs)("p",{className:"text-2xl font-black text-brand-dark",children:["R$ ",k[11].toFixed(0)]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Estimado para m\xeas 12 com crescimento de 12%/m\xeas"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] border border-slate-100 p-8 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-black text-slate-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(tI.A,{size:20,className:"text-purple-600"}),"Mix de Receita"]}),(0,a.jsx)(M.u,{width:"100%",height:300,children:(0,a.jsxs)(tz.r,{children:[(0,a.jsx)(tD.F,{data:C,cx:"50%",cy:"50%",innerRadius:80,outerRadius:120,paddingAngle:2,dataKey:"value",children:C.map((e,t)=>(0,a.jsx)(F.f,{fill:e.color},"cell-".concat(t)))}),(0,a.jsx)(_.m,{formatter:e=>"R$ ".concat(e)}),(0,a.jsx)(si.s,{})]})}),(0,a.jsx)("div",{className:"mt-6 space-y-3 pt-6 border-t border-slate-100",children:C.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-slate-600",children:e.name}),(0,a.jsxs)("span",{className:"font-black text-slate-900",children:["R$ ",e.value.toFixed(0)]})]},t))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] border border-slate-100 p-8 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-black text-slate-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(b.A,{size:20,className:"text-green-600"}),"Segmenta\xe7\xe3o de Clientes"]}),(0,a.jsx)(M.u,{width:"100%",height:300,children:(0,a.jsxs)(T.E,{data:E,children:[(0,a.jsx)(B.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(L.W,{dataKey:"name",stroke:"#9ca3af"}),(0,a.jsx)(O.h,{stroke:"#9ca3af"}),(0,a.jsx)(_.m,{}),(0,a.jsx)(q.y,{dataKey:"value",fill:"#8b5cf6",children:E.map((e,t)=>(0,a.jsx)(F.f,{fill:e.color},"cell-".concat(t)))})]})}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-slate-100 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-slate-600",children:"Total de Clientes"}),(0,a.jsx)("span",{className:"font-black text-slate-900",children:S})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-slate-600",children:"Taxa de Convers\xe3o"}),(0,a.jsxs)("span",{className:"font-black text-emerald-600",children:[(m/S*100).toFixed(1),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] border border-slate-100 p-8 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-black text-slate-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(tY.A,{size:20,className:"text-amber-600"}),"Proje\xe7\xf5es Financeiras"]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-slate-600",children:"Break-even"}),(0,a.jsx)("span",{className:"font-black text-amber-600",children:"3-4 meses"})]}),(0,a.jsx)("div",{className:"w-full bg-slate-100 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:"65%"}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-slate-600",children:"ROI 12 meses"}),(0,a.jsx)("span",{className:"font-black text-emerald-600",children:"+240%"})]}),(0,a.jsx)("div",{className:"w-full bg-slate-100 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:"95%"}})})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-slate-100",children:(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2",children:"Impacto do Investimento"}),(0,a.jsxs)("p",{className:"text-sm font-black text-blue-900",children:["Crescimento de MRR: R$ ",p.toFixed(0)," → R$ ",k[11].toFixed(0)," em 12 meses"]})]})})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-brand-dark to-black rounded-[2.5rem] p-8 md:p-12 text-white text-center",children:[(0,a.jsx)("h3",{className:"text-2xl font-black mb-3 tracking-tighter",children:"Pronto para Escalar?"}),(0,a.jsx)("p",{className:"text-slate-300 mb-6 max-w-2xl mx-auto",children:"Com a plataforma Pro Barber, voc\xea tem um SaaS totalmente funcional pronto para crescimento exponencial. Todas as m\xe9tricas acima s\xe3o conservadoras e baseadas em dados reais de mercado."}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-center",children:[(0,a.jsx)("button",{className:"bg-white text-brand-dark font-black py-4 px-8 rounded-2xl uppercase tracking-widest text-sm shadow-xl hover:scale-105 transition-transform",children:"Agendar Demo"}),(0,a.jsx)("button",{className:"border-2 border-white text-white font-black py-4 px-8 rounded-2xl uppercase tracking-widest text-sm hover:bg-white/10 transition-colors",children:"Baixar Pitch Deck"})]})]})]})};var sd=s(3166),so=s(33738);function sc(){let[e,t]=(0,l.useState)(null),[s,r]=(0,l.useState)(!1),[n,d]=(0,l.useState)("dashboard"),[o,c]=(0,l.useState)(!0),[x,m]=(0,l.useState)(eh),[u,b]=(0,l.useState)(ec),[h,g]=(0,l.useState)(ev),[f,j]=(0,l.useState)([]),[v,N]=(0,l.useState)(ei),[w,y]=(0,l.useState)(ew),[k,A]=(0,l.useState)(en),[C,S]=(0,l.useState)(eo),[I,E]=(0,l.useState)(ed),[R,z]=(0,l.useState)(ek),[D,M]=(0,l.useState)("offline"),[T,B]=(0,l.useState)(null),L=C.filter(e=>e.role===i.BARBER),O=C.filter(e=>e.role===i.CUSTOMER),_=(0,l.useCallback)(async e=>{if(!eQ())return void M("offline");try{var t;c(!0);let s=e.role===i.OWNER?null==(t=await e7.getBarbershopByOwner(e.id))?void 0:t.id:e.barbershopId;if(s){let[e,t,a,l,r]=await Promise.all([e7.getServices(s),e7.getAppointments(s),e7.getInventory(s),e7.getOrders(s),e7.getBarbershopById(s)]);b(e),m(t),g(a),j(l),r&&N({shopName:r.name,address:r.address,phone:r.phone,openingHours:r.opening_hours,workingDays:r.working_days,defaultCommissionRate:r.default_commission_rate}),M("connected")}}catch(e){console.error("Erro na sincronizacao:",e),B("Falha ao sincronizar dados com o servidor.")}finally{c(!1)}},[]);(0,l.useEffect)(()=>{(async()=>{if(eQ())try{let{data:{session:e}}=await eZ.auth.getSession();if(e){let s=await e7.getProfile(e.user.id);if(s){let a={...s,email:e.user.email};t(a),await _(a)}}}catch(e){console.error("Erro ao checar sessao:",e)}c(!1)})()},[_]);let q=async e=>{t(e),r(!1),await _(e),d("dashboard")},F=async()=>{eQ()&&await eZ.auth.signOut(),t(null),r(!1),d("dashboard")},U=async t=>{try{var s,a,l,r;if(eQ()&&e){let l=e.role===i.OWNER?null==(s=await e7.getBarbershopByOwner(e.id))?void 0:s.id:e.barbershopId,r=await e7.createAppointment({...t,barbershop_id:l,status:"CONFIRMED",startTime:null==(a=t.startTime)?void 0:a.toISOString()});m(e=>[...e,{...r,startTime:new Date(r.startTime)}])}else{let s={id:"local-".concat(Date.now()),barberId:t.barberId||(null==(l=L[0])?void 0:l.id)||"u2",customerId:(null==e?void 0:e.id)||"guest",customerName:(null==e?void 0:e.name)||"Visitante",serviceId:t.serviceId||(null==(r=u[0])?void 0:r.id)||"s1",startTime:t.startTime||new Date,status:"CONFIRMED"};m(e=>[...e,s])}return!0}catch(e){return B("Nao foi possivel salvar o agendamento."),!1}},V=e=>{z(t=>{let s=t.findIndex(t=>t.id===e.id);if(s>=0){let a=[...t];return a[s]=e,a}return[...t,e]})};return o?(0,a.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center bg-brand-dark text-white font-sans animate-pulse",children:[(0,a.jsx)(p.A,{size:48,className:"mb-4 text-brand-light"}),(0,a.jsx)("span",{className:"tracking-[0.3em] uppercase text-xs font-black",children:"Carregando Barvo..."})]}):e||s?(0,a.jsxs)(P,{currentUser:e,currentView:n,onNavigate:d,onLogout:F,notifications:k,onMarkAllRead:()=>A(e=>e.map(e=>({...e,read:!0}))),children:[T&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 flex justify-between items-center rounded-r-xl shadow-sm animate-slide-in",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-bold",children:[(0,a.jsx)($.A,{size:20})," ",T]}),(0,a.jsx)("button",{onClick:()=>B(null),className:"text-xs font-black uppercase hover:underline",children:"Fechar"})]}),(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest transition-all ".concat("connected"===D?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"),children:["connected"===D?(0,a.jsx)(sd.A,{size:12}):(0,a.jsx)(so.A,{size:12}),"connected"===D?"Sincronizado":"Modo Offline"]}),"connected"===D&&e&&(0,a.jsx)("button",{onClick:()=>_(e),className:"p-2 text-slate-400 hover:text-brand-dark transition-all",children:(0,a.jsx)(tv.A,{size:14,className:o?"animate-spin":""})})]}),(()=>{let s=(null==e?void 0:e.role)||i.CUSTOMER;switch(n){case"dashboard":if(s===i.OWNER)return(0,a.jsx)(Y,{stats:ej,onNavigate:d});if(s===i.BARBER)return(0,a.jsx)(tb,{currentUser:e,appointments:x,commissionRate:v.defaultCommissionRate||50,onCompleteAppointment:e=>{eQ()&&e7.updateAppointmentStatus(e,"COMPLETED"),m(t=>t.map(t=>t.id===e?{...t,status:"COMPLETED"}:t))},onNoShow:e=>{eQ()&&e7.updateAppointmentStatus(e,"CANCELLED"),m(t=>t.map(t=>t.id===e?{...t,status:"CANCELLED"}:t))},services:u,exceptions:[],onBlockTime:()=>{}});return(0,a.jsx)(tg,{currentUser:e,appointments:x,onNavigate:d,membershipPlans:w});case"calendar":return(0,a.jsx)(ee,{appointments:x,barbers:L,services:u,onAddAppointment:U});case"queue":return(0,a.jsx)(el,{initialQueue:eg,services:u});case"booking":return(0,a.jsx)(eH,{currentUser:e,initialData:null,services:u,onBook:U,shopSettings:v,allAppointments:x,availabilityExceptions:[]});case"appointments":return(0,a.jsx)(tk,{currentUser:e,appointments:x.filter(t=>t.customerId===(null==e?void 0:e.id)),onRebook:e=>{d("booking")},onCancel:e=>{eQ()&&e7.updateAppointmentStatus(e,"CANCELLED"),m(t=>t.map(t=>t.id===e?{...t,status:"CANCELLED"}:t))},onNavigate:d,services:u});case"shop":return(0,a.jsx)(t1,{currentUser:e,inventory:h,onPurchase:async(t,s,a,l)=>{try{if(t.forEach(e=>{if(e.id.startsWith("inv_")){let t=e.id.replace("inv_",""),s=h.find(e=>e.id===t);s&&s.quantity>=e.quantity&&g(s=>s.map(s=>s.id===t?{...s,quantity:s.quantity-e.quantity}:s))}}),eQ()&&e){var r;let a=e.role===i.OWNER?null==(r=await e7.getBarbershopByOwner(e.id))?void 0:r.id:e.barbershopId;await e7.createOrder({customerId:e.id,items:t,totalAmount:s,barbershop_id:a,status:"PAID"}),await _(e)}return!0}catch(e){return B("Erro ao processar compra."),!1}}});case"orders":return(0,a.jsx)(t3,{orders:f.filter(t=>t.customerId===(null==e?void 0:e.id)),onNavigate:d,onRepeatOrder:e=>{d("shop")}});case"inventory":return(0,a.jsx)(tq,{items:h,onUpdateItem:async(t,s)=>{if("UPSERT"===s)if(eQ()&&e){var a;let s=e.role===i.OWNER?null==(a=await e7.getBarbershopByOwner(e.id))?void 0:a.id:e.barbershopId;await e7.upsertInventoryItem({...t,barbershop_id:s}),await _(e)}else g(e=>{let s=e.findIndex(e=>e.id===t.id);if(s>=0){let a=[...e];return a[s]=t,a}return[...e,t]});else g(e=>e.filter(e=>e.id!==t.id))}});case"services":return(0,a.jsx)(tS,{services:u,onUpdateServices:b});case"order_management":return(0,a.jsx)(t5,{orders:f,users:C,onNavigate:d,onUpdateStatus:async(t,s,a)=>{eQ()?(await e7.updateOrderStatus(t,s,a),e&&await _(e)):j(e=>e.map(e=>e.id===t?{...e,status:s}:e))}});case"financials":return(0,a.jsx)(tP,{transactions:ef});case"team":return(0,a.jsx)(tT,{barbers:L,setUsers:S});case"crm":return(0,a.jsx)(tU,{services:u,notes:R,onSaveNote:V,customers:O,appointments:x,onScheduleReturn:e=>{d("calendar")}});case"marketing":return(0,a.jsx)(tW,{automations:I,setAutomations:E});case"strategic":return(0,a.jsx)(se,{services:u,plans:w,setPlans:y,currentUser:e||void 0});case"investor":return(0,a.jsx)(sn,{appointments:x,membershipPlans:w,services:u,users:C});case"settings":return(0,a.jsx)(tJ,{currentUser:e,settings:v,onUpdateSettings:N,onUpdateUser:t});default:return(0,a.jsx)(Y,{stats:ej,onNavigate:d})}})(),(0,a.jsx)(tc,{currentUser:e})]}):(0,a.jsx)(tr,{onLogin:q,onGuestContinue:()=>{r(!0),d("booking")}})}}},e=>{e.O(0,[75,441,255,358],()=>e(e.s=693)),_N_E=e.O()}]);